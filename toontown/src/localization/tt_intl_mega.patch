--- src/ai/HolidayManagerAI.py	4 Dec 2004 01:47:44 -0000	1.48
+++ src/ai/HolidayManagerAI.py	22 Jul 2008 23:59:29 -0000	1.48.4.2
@@ -29,6 +29,18 @@
 from toontown.racing import RaceManagerAI
 
 #################################################################
+# Localization Specific Modules
+#################################################################
+from toontown.toonbase import TTLocalizer
+
+language = TTLocalizer.getLanguage()
+print ("HolidayManagerAI: Running in language: %s" % (language))
+_languageModule = "toontown.ai."+language
+
+if language != 'english':
+     exec("from "+_languageModule+" import HolidayManagerAI_local")
+
+#################################################################
 # Python Specific Modules
 #################################################################
 import random
--- src/battle/PlayByPlayText.py	1 Jun 2004 19:32:10 -0000	1.8
+++ src/battle/PlayByPlayText.py	6 Oct 2005 17:14:15 -0000	1.8.6.2
@@ -1,5 +1,6 @@
 from direct.showbase.DirectObject import *
 from direct.showbase.ShowBaseGlobal import *
+from toontown.toonbase import TTLocalizer
 from toontown.toonbase.ToontownBattleGlobals import *
 from toontown.toonbase.ToontownGlobals import *
 from SuitBattleGlobals import *
@@ -21,7 +22,7 @@
             self, 
             mayChange = 1,
             pos = (0.0, 0.75),
-            scale = 0.2,
+            scale = TTLocalizer.PBPTonscreenText,
             fg = (1, 0, 0, 1),
             font = getSignFont(),
             wordwrap = 13
--- src/battle/RewardPanel.py	1 Jun 2004 19:32:10 -0000	1.94
+++ src/battle/RewardPanel.py	23 Jul 2008 00:00:36 -0000	1.95.4.5
@@ -27,7 +27,7 @@
                              relief=None,
                              geom = getDefaultDialogGeom(),
                              geom_color = ToontownGlobals.GlobalDialogColor,
-                             geom_scale = (1.75,1,0.75),                             
+                             geom_scale = TTLocalizer.RPdirectFrame,
                              pos = (0,0,0.587),
                              )
         self.initialiseoptions(RewardPanel)
@@ -69,7 +69,7 @@
             text_pos = (0, 0.2),
             text_scale = 0.08,
             )
-        
+
         self.itemLabel = DirectLabel(
             parent = self.itemFrame,
             text = "",
@@ -101,7 +101,7 @@
             label = DirectLabel(
                 parent = self.questFrame,
                 relief = None,
-                pos = (-0.85, 0, (-0.1*i)),                
+                pos = (-0.85, 0, (-0.1*i)),
                 text = (TTLocalizer.RewardPanelQuestLabel % (i)),
                 text_scale = 0.05,
                 text_align = TextNode.ALeft,
@@ -120,15 +120,15 @@
             )
         self.congratsLeft = DirectLabel(
             parent = self.newGagFrame,
-            pos = (-0.2, 0, -0.1),            
+            pos = (-0.2, 0, -0.1),
             text = "",
             text_pos = (0, 0),
-            text_scale = 0.06,            
+            text_scale = 0.06,
             )
         self.congratsLeft.setHpr(0, 0, -30)
         self.congratsRight = DirectLabel(
             parent = self.newGagFrame,
-            pos = (0.2, 0, -0.1),            
+            pos = (0.2, 0, -0.1),
             text = "",
             text_pos = (0, 0),
             text_scale = 0.06,
@@ -149,7 +149,7 @@
         self.trackIncLabels = []
         self.trackBars = []
         self.trackBarsOffset = 0
-        
+
         self.meritLabels = []
         self.meritIncLabels = []
         self.meritBars = []
@@ -165,7 +165,7 @@
                 text = deptName,
                 text_scale = 0.05,
                 text_align = TextNode.ARight,
-                pos = (0.55, 0, (-0.09*i) - 0.125),
+                pos = (0.7, 0, (-0.09*i) - 0.125),
                 text_pos = (0, -0.02),
                 ))
 
@@ -176,7 +176,7 @@
                 text = "",
                 text_scale = 0.05,
                 text_align = TextNode.ALeft,
-                pos = (0.7, 0, (-0.09*i) - 0.125),
+                pos = (0.85, 0, (-0.09*i) - 0.125),
                 text_pos = (0, -0.02),
                 ))
 
@@ -200,7 +200,7 @@
                 text_fg = (0, 0, 0, 1),
                 text_align = TextNode.ALeft,
                 text_pos = (-0.96, -0.05),
-                pos = (0.825, 0, (-0.09*i) - 0.125),
+                pos = (0.975, 0, (-0.09*i) - 0.125),
                 ))
 
         # loop and make all the track exp bars
@@ -215,14 +215,14 @@
 
         # loop and make all the track exp bars
         for i in range(len(ToontownBattleGlobals.Tracks)):
-            trackName = ToontownBattleGlobals.Tracks[i].upper()
+            trackName = TextEncoder.upper(ToontownBattleGlobals.Tracks[i])
 
             # Name of track label
             self.trackLabels.append(DirectLabel(
                 parent = self.gagExpFrame,
                 relief = None,
                 text = trackName,
-                text_scale = 0.05,
+                text_scale = TTLocalizer.RPtrackLabels,
                 text_align = TextNode.ARight,
                 pos = (0.13,0,-0.09*i),
                 text_pos = (0,-0.02),
@@ -351,7 +351,7 @@
     def initQuestFrame(self, toon, avQuests):
         self.gagExpFrame.hide()
         self.newGagFrame.hide()
-        self.promotionFrame.hide()        
+        self.promotionFrame.hide()
         self.questFrame.show()
         self.itemFrame.hide()
         self.cogPartFrame.hide()
@@ -396,7 +396,7 @@
         self.missedItemFrame.hide()
 
         trackBarOffset = 0
-        
+
         # Initialize the cog merit bars if enabled
         for i in range(len(SuitDNA.suitDepts)):
             meritBar = self.meritBars[i]
@@ -402,7 +402,7 @@
                     # only do this once! :)
                     self.trackBarsOffset = 1
                 meritBar.show()
-                meritLabel.show()                
+                meritLabel.show()
                 meritLabel.show()
                 if totalMerits:
                     meritBar["range"] = totalMerits
@@ -412,7 +412,7 @@
                     else:
                         meritBar["text"] = ("%s/%s %s" % (merits,
                                                           totalMerits,
-                                                          TTLocalizer.RewardPanelMeritBarLabels[i],))                    
+                                                          TTLocalizer.RewardPanelMeritBarLabels[i],))
                 else:
                     # if total merits = None, this dept is maxed out
                     meritBar["range"] = 1
@@ -428,14 +428,14 @@
                     meritBar["text"] = TTLocalizer.RewardPanelMeritsMaxed
                 self.resetMeritBarColor(i)
             else:
-                meritBar.hide()                
+                meritBar.hide()
                 meritLabel.hide()
 
         # Initialize all the bars with the current and next exp
         for i in range(len(expList)):
             curExp = expList[i]
             trackBar = self.trackBars[i]
-            trackLabel = self.trackLabels[i]            
+            trackLabel = self.trackLabels[i]
             trackIncLabel = self.trackIncLabels[i]
             trackBar.setX(trackBar.getX() - trackBarOffset)
             trackLabel.setX(trackLabel.getX() - trackBarOffset)
@@ -451,7 +451,7 @@
             else:
                 trackBar.hide()
 
-                
+
         return
 
     def incrementExp(self, track, newValue):
@@ -484,7 +484,7 @@
             else:
                 meritBar["text"] = ("%s/%s %s" % (newValue,
                                                   totalMerits,
-                                                  TTLocalizer.RewardPanelMeritBarLabels[dept],))                    
+                                                  TTLocalizer.RewardPanelMeritBarLabels[dept],))
         return
 
 
@@ -506,7 +506,7 @@
 
         numStrings = len(congratsStrings)
         assert(numStrings >= 2)
-                           
+
         indexList = range(numStrings)
 
         index1 = whrandom.choice(indexList)
@@ -521,11 +521,11 @@
     def newGag(self, toon, track, level):
         self.gagExpFrame.hide()
         self.newGagFrame.show()
-        self.promotionFrame.hide()        
+        self.promotionFrame.hide()
         self.questFrame.hide()
         self.itemFrame.hide()
         self.missedItemFrame.hide()
-        
+
         self.newGagFrame['text'] = (TTLocalizer.RewardPanelNewGag %
                                     {"gagName": ToontownBattleGlobals.Tracks[track].capitalize(),
                                      "avName":  toon.getName(),})
@@ -548,7 +548,7 @@
         self.newGagIcon = None
         self.gagExpFrame.show()
         self.newGagFrame.hide()
-        self.promotionFrame.hide()        
+        self.promotionFrame.hide()
         self.questFrame.hide()
         self.itemFrame.hide()
         self.missedItemFrame.hide()
@@ -578,7 +578,7 @@
         self.meritIncLabels[dept]["text"] = "+ " + str(earnedMerits)
         self.meritIncLabels[dept].show()
 
-        
+
     def getTrackIntervalList(self, toon, track, origSkill, earnedSkill):
         """
         returns a list of intervals that, if played, will show experience
@@ -630,9 +630,9 @@
                 finalGagFlag = 1
             else:
                 nextExpValue = newNextExpValue
-            
+
         return intervalList
-            
+
     def getMeritIntervalList(self, toon, dept, origMerits, earnedMerits):
         """
         returns a list of intervals that, if played, will show merits
@@ -642,7 +642,7 @@
         intervalList = []
         totalMerits = CogDisguiseGlobals.getTotalMerits(toon, dept)
         neededMerits = 0
-        
+
         # Only show the inc value if we are not maxed
         if totalMerits and (origMerits != totalMerits):
             neededMerits = totalMerits - origMerits
@@ -658,7 +658,7 @@
         # we don't need a promotion if we've reach level 50
         if (toon.cogLevels[dept] < ToontownGlobals.MaxCogSuitLevel):
             if neededMerits and toon.readyForPromotion(dept):
-                intervalList.append(Wait(0.4))            
+                intervalList.append(Wait(0.4))
                 intervalList += self.getPromotionIntervalList(toon, dept)
 
         return intervalList
@@ -670,12 +670,12 @@
     def promotion(self, toon, dept):
         self.gagExpFrame.hide()
         self.newGagFrame.hide()
-        self.promotionFrame.show()        
+        self.promotionFrame.show()
         self.questFrame.hide()
         self.itemFrame.hide()
         self.missedItemFrame.hide()
         name = SuitDNA.suitDepts[dept]
-        self.promotionFrame['text'] = "Ready for promotion in %s track!" % SuitDNA.suitDeptFullnames[name]
+        self.promotionFrame['text'] = (TTLocalizer.RewardPanelPromotion % (SuitDNA.suitDeptFullnames[name]))
 
         # copy a gag
         icons = loader.loadModelOnce('phase_3/models/gui/cog_icons')
@@ -693,13 +693,13 @@
         # Set scale (big)
         self.deptIcon.setScale(0.33)
         return
-    
+
     def cleanupPromotion(self):
         # protect against multiple cleanups
         if not hasattr(self, 'deptIcon'):
@@ -698,7 +698,7 @@
         self.deptIcon = None
         self.gagExpFrame.show()
         self.newGagFrame.hide()
-        self.promotionFrame.hide()        
+        self.promotionFrame.hide()
         self.questFrame.hide()
         self.itemFrame.hide()
         self.missedItemFrame.hide()
@@ -711,7 +711,7 @@
                         Func(self.cleanupPromotion),
                         ]
         return intervalList
-    
+
     def getQuestIntervalList(self, toon, deathList, toonList, itemList):
         # This is the battle notifying us that a toon killed some cogs
         # See if this toon has a quest on these cogs. If so, update the
@@ -828,7 +828,7 @@
         return intervalList
 
     def getCogPartIntervalList(self, toon, cogPartList):
-        itemName = CogDisguiseGlobals.getPartName(cogPartList) 
+        itemName = CogDisguiseGlobals.getPartName(cogPartList)
         intervalList = []
         intervalList.append(Func(self.cogPartLabel.setProp, 'text', itemName))
         intervalList.append(Wait(1))
@@ -830,8 +830,8 @@
                         if (quest.getCompletionStatus(toon, questDesc) == Quests.COMPLETE):
                             intervalList.append(Func(questLabel.setProp, 'text_fg', (0, 0.3, 0, 1)))
                         intervalList.append(Func(questLabel.setProp, 'text', str))
-                        intervalList.append(Wait(tickDelay))                    
-                
+                        intervalList.append(Wait(tickDelay))
+
         return intervalList
 
 
@@ -844,7 +844,7 @@
         return intervalList
 
     def getCogPartIntervalList(self, toon, cogPartList):
-        itemName = CogDisguiseGlobals.getPartName(cogPartList) 
+        itemName = CogDisguiseGlobals.getPartName(cogPartList)
         intervalList = []
         intervalList.append(Func(self.cogPartLabel.setProp, 'text', itemName))
         intervalList.append(Wait(1))
@@ -872,7 +872,7 @@
         list will be flattened triplets of (suitIndex, level, involvedToonBits)
         suitIndex is the index of the suit in SuitDNA.suitHeadTypes.
         For example, Flunky is suitIndex 0, Yes Man is suitIndex 2.
-        
+
         toonList is a list of toons that positionally corresponds to the
         bitmasks embedded in the deathlist; toons that are no longer
         present are represented as 'None'. Note that this might be
@@ -907,7 +907,7 @@
             track += itemInterval
             track.append(Wait(1.0))
 
-        missedItemInterval = self.getMissedItemIntervalList(toon, missedItemList) 
+        missedItemInterval = self.getMissedItemIntervalList(toon, missedItemList)
         if missedItemInterval:
             track.append(Func(self.initMissedItemFrame, toon))
             track.append(Wait(1.0))
@@ -900,7 +900,7 @@
 
         # debug
         self.notify.debug("partList = %s" % partList)
-        
+
         newPart = 0
         for part in partList:
             if part != 0:
@@ -925,7 +925,7 @@
             track.append(Wait(1.0))
             track += questList
             track.append(Wait(2.0))
-            
+
         return track
 
 
@@ -957,7 +957,7 @@
             [3, 1, 3, 0, 2, 2, 1, 1, 30, 2, 1, 0], # deathList
             [], # itemList
             [], # missedItemList
-            [0, 0, 0, 0], # origMeritList            
+            [0, 0, 0, 0], # origMeritList
             [0, 0, 0, 0], # meritList
             [], # cogPartList
             [base.localAvatar] + otherToons, # toonList
--- src/building/DistributedHQInterior.py	1 Jun 2004 19:32:10 -0000	1.14
+++ src/building/DistributedHQInterior.py	14 Dec 2004 02:18:29 -0000	1.14.6.1
@@ -135,8 +135,8 @@
         nameText.setTextColor(1, 1, 1, 0.7)
         nameText.setText("-")
         namePath = row.attachNewNode(nameText)
-        namePath.setPos(-4,0,0)
-        namePath.setScale(0.9)
+        namePath.setPos(*TTLocalizer.DHtoonNamePos)
+        namePath.setScale(TTLocalizer.DHtoonName)
 
         # Text node for the score
         scoreText = TextNode("scoreText")
@@ -145,7 +145,7 @@
         scoreText.setTextColor(1, 1, 0.1, 0.7)
         scoreText.setText("-")
         scorePath = row.attachNewNode(scoreText)
-        scorePath.setPos(-4.6,0,0)
+        scorePath.setPos(*TTLocalizer.DHscorePos)
 
         # Put a star on the row, just like over the Toon heads
         trophyStar = self.buildTrophyStar()
@@ -234,7 +234,7 @@
     def buildTrophyStar(self):
         trophyStar = loader.loadModelCopy('phase_3.5/models/gui/name_star')
         trophyStar.hide()
-        trophyStar.setPos(-6.6,0,0.3)
+        trophyStar.setPos(*TTLocalizer.DHtrophyPos)
         return trophyStar
 
     def updateTrophyStar(self, trophyStar, score):
--- src/building/DistributedKnockKnockDoor.py	1 Jun 2004 19:32:10 -0000	1.26
+++ src/building/DistributedKnockKnockDoor.py	14 Dec 2004 02:18:29 -0000	1.26.6.1
@@ -109,7 +109,7 @@
         self.nametag.setAvatar(doorNP)
         self.nametag.setFont(ToontownGlobals.getToonFont())
         # nametag.setName must come after setFont().
-        self.nametag.setName("door")
+        self.nametag.setName(TTLocalizer.DoorNametag)
         # Do not allow user to click on door nametag
         self.nametag.setActive(0)
         self.nametag.manage(base.marginManager)
--- src/building/Elevator.py	1 Jun 2004 19:32:10 -0000	1.20
+++ src/building/Elevator.py	14 Dec 2004 02:18:29 -0000	1.20.6.1
@@ -162,7 +162,7 @@
             text = TTLocalizer.ElevatorHopOff,
             text_fg = (0.9, 0.9, 0.9, 1),
             text_pos = (0, -0.23),
-            text_scale = 0.8,
+            text_scale = TTLocalizer.EelevatorHopOff,
             image = (self.upButton, self.downButton, self.rolloverButton),
             image_color = (0.5, 0.5, 0.5, 1),
             image_scale = (20, 1, 11),
--- src/catalog/CatalogChatItemPicker.py	1 Jun 2004 19:32:11 -0000	1.10
+++ src/catalog/CatalogChatItemPicker.py	15 Dec 2004 04:30:23 -0000	1.10.6.1
@@ -103,7 +103,7 @@
             relief = None,
             pos = (0, 0, -0.7),
             text = TTLocalizer.MessagePickerCancel,
-            text_scale = 0.06,
+            text_scale = TTLocalizer.CCIPmessagePickerCancel,
             text_pos = (-0.005,-0.01),
             text_fg = Vec4(1,1,1,1),
             textMayChange = 0,            
--- src/catalog/CatalogGenerator.py	18 Nov 2004 05:17:43 -0000	1.75
+++ src/catalog/CatalogGenerator.py	3 Jun 2008 00:46:02 -0000	1.75.4.1
@@ -141,8 +141,8 @@
       CatalogFlooringItem(10010),
       )),
 
-    # Valentines items -- on sale 2/1 through 2/14
-    (2, 1, 2, 14,
+    # Valentines items -- on sale
+    (TTLocalizer.CGvalentine_month, TTLocalizer.CGvalentine_startday, TTLocalizer.CGvalentine_month, TTLocalizer.CGvalentine_endday,
      ((3, 2920),
       CatalogClothingItem(1200, 0),
       CatalogClothingItem(1201, 0),
--- src/catalog/CatalogItemPanel.py	24 Jun 2008 18:52:22 -0000	1.51.2.1.4.2
+++ src/catalog/CatalogItemPanel.py	11 Dec 2008 01:55:29 -0000	1.51.2.1.4.3
@@ -11,7 +11,7 @@
 from CatalogFurnitureItem import getAllFurnitures
 from toontown.toontowngui.TeaserPanel import TeaserPanel
 
-CATALOG_PANEL_WORDWRAP = 8
+CATALOG_PANEL_WORDWRAP = 10
 
 
 class CatalogItemPanel(DirectFrame):
--- src/catalog/CatalogScreen.py	1 Jul 2008 00:58:23 -0000	1.83.6.3
+++ src/catalog/CatalogScreen.py	5 Dec 2008 03:30:25 -0000	1.83.6.5
@@ -39,7 +39,7 @@
     This class presents the user interface to an individual's catalog.
     """
     notify = DirectNotifyGlobal.directNotify.newCategory("CatalogScreen")
-    
+
     def __init__(self, parent=aspect2d, **kw):
         guiItems = loader.loadModelCopy('phase_5.5/models/gui/catalog_gui')
         background = guiItems.find('**/catalog_background')
@@ -85,12 +85,7 @@
         self.gifting = -1
         self.createdGiftGui = None
 
-        
-        
-        
-        
     def show(self):
-
         # listen for update requests
         self.accept("CatalogItemPurchaseRequest", self.__handlePurchaseRequest)
         self.accept("CatalogItemGiftPurchaseRequest", self.__handleGiftPurchaseRequest)
@@ -231,7 +226,6 @@
             # get the appropriate text"
             if self.viewing == 'New':
                 text = TTLocalizer.CatalogNew
-                
             else:
                 text = TTLocalizer.CatalogBackorder
             self.pageLabel['text'] = text + (' - %d' % (self.pageIndex + 1))
@@ -241,9 +235,9 @@
             elif ((self.viewing == 'Backorder') or
                   ((self.viewing == 'New') and (self.numBackPages == 0))):
                 self.nextPageButton.hide()
-                
+
             self.update()
-            
+
     def hidePages(self):
         for page in self.pageList:
             page.hide()
@@ -305,7 +299,7 @@
                 i = 0
         return numPages
 
-        
+
     def load(self, guiItems, guiButton, guiBack):
         # Initialize variables
         self.pageIndex = -1
@@ -388,40 +382,37 @@
             text2_fg = (0.353, 0.427, 0.427, 1.000),
             )
         self.newCatalogButton2.hide()
-        
+
         #~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-        #Friends list 
+        #Friends list
         self.__makeFFlist()
-                
+
         if len(self.ffList) > 0:
-            
-            
             self.giftToggle = DirectButton(
-            self.base,
-            relief = None,
-            pressEffect = 0,
-            image = (giftToggleUp,
-                     giftToggleDown,
-                     giftToggleUp,
-                     ),
-            image_scale = (1.0,1,0.7),
-            command = self.__giftToggle,
-            text = TTLocalizer.CatalogGiftToggleOff,
-            text_font = ToontownGlobals.getBuildingNametagFont(),
-            text_pos = TTLocalizer.CSgiftTogglePos,
-            text_scale = TTLocalizer.CSgiftToggle,
-            text_fg = (0.353, 0.627, 0.627, 1.000),
-            text3_fg = (0.15, 0.3, 0.3, 1.000),
-            text2_fg = (0.353, 0.427, 0.427, 1.000),
-            image_color = Vec4(1.0, 1.0, 0.2, 1.0),
-            image1_color = Vec4(0.9, 0.85, 0.2, 1.0),
-            image2_color = Vec4(0.9, 0.85, 0.2, 1.0),
-            image3_color = Vec4(0.5, 0.45, 0.2, 1.0),
-            )
+                self.base,
+                relief = None,
+                pressEffect = 0,
+                image = (giftToggleUp,
+                         giftToggleDown,
+                         giftToggleUp,
+                         ),
+                image_scale = (1.0,1,0.7),
+                command = self.__giftToggle,
+                text = TTLocalizer.CatalogGiftToggleOff,
+                text_font = ToontownGlobals.getBuildingNametagFont(),
+                text_pos = TTLocalizer.CSgiftTogglePos,
+                text_scale = TTLocalizer.CSgiftToggle,
+                text_fg = (0.353, 0.627, 0.627, 1.000),
+                text3_fg = (0.15, 0.3, 0.3, 1.000),
+                text2_fg = (0.353, 0.427, 0.427, 1.000),
+                image_color = Vec4(1.0, 1.0, 0.2, 1.0),
+                image1_color = Vec4(0.9, 0.85, 0.2, 1.0),
+                image2_color = Vec4(0.9, 0.85, 0.2, 1.0),
+                image3_color = Vec4(0.5, 0.45, 0.2, 1.0),
+                )
             self.giftToggle.setPos(0.0,0,-0.035)
-            
-            
-            #says "this gift is for"             
+
+            #says "this gift is for"
             self.giftLabel = DirectLabel(
                 self.base, relief = None,
                 image = giftFriends,
@@ -436,7 +427,7 @@
             )
             self.giftLabel.setPos(-0.15,0,0.080)
             self.giftLabel.hide()
-            
+
             #says the name of the friend the gift is for
             self.friendLabel = DirectLabel(
                 self.base, relief = None,
@@ -451,11 +442,9 @@
             )
             self.friendLabel.setPos(0.5,0,-0.42)
             self.friendLabel.hide()
-            
 
-           
             gui = loader.loadModelOnce("phase_3.5/models/gui/friendslist_gui")
-            
+
             self.scrollList = DirectScrolledList(
                 parent = self,
                 relief = None,
@@ -481,7 +470,7 @@
                 # Make the disabled button darker
                 decButton_image1_color = Vec4(1.0, 1.0, 0.6, 1.0),
                 decButton_image3_color = Vec4(1.0, 1.0, 0.6, 0.6),
-                
+
                 # itemFrame is a DirectFrame
                 itemFrame_pos = (-0.17, 0.0, 0.06),
                 itemFrame_relief = None,
@@ -492,7 +481,7 @@
             self.scrollList.setPos(1.2,0,-0.58)
             self.scrollList.setScale(1.5)
             self.scrollList.hide()
-     
+
             # Set up a clipping plane to truncate names that would extend
             # off the right end of the scrolled list.
             clipper = PlaneNode('clipper')
@@ -500,24 +489,21 @@
             self.scrollList.attachNewNode(clipper)
             cpa = ClipPlaneAttrib.make(ClipPlaneAttrib.OSet, clipper)
             self.scrollList.node().setAttrib(cpa)
-   
+
             #self.__addFamilyToScrollList()
             #self.__updateScrollList()
-            
+
             self.__makeScrollList()
-            
+
             #self.__setFriendLabelName() #sets the label name
             #self.__loadFriend()
-            
+
             friendId = self.ffList[0]
             self.__chooseFriend(self.ffList[0][0], self.ffList[0][1])
             self.update()
-            
+
             self.createdGiftGui = 1;
-            
 
-            
-        
         #~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
         for i in range(4):
             self.backCatalogButton.component('text%d' % i).setR(90)
@@ -543,7 +529,7 @@
         itemList.sort(lambda a,b: priceSort(a,b,CatalogItem.CatalogTypeWeekly))
         itemList.reverse()
         for item in itemList:
-            
+
             self.panelList.append(
                 CatalogItemPanel.CatalogItemPanel(
                 parent = hidden,
@@ -551,13 +537,13 @@
                 type=CatalogItem.CatalogTypeWeekly,
                 parentCatalogScreen = self,
                 ))
-            
+
         itemList = base.localAvatar.backCatalog
         itemList.sort(
             lambda a,b: priceSort(a,b,CatalogItem.CatalogTypeBackorder))
         itemList.reverse()
         for item in itemList:
-            
+
             self.backPanelList.append(
                 CatalogItemPanel.CatalogItemPanel(
                 parent = hidden,
@@ -565,7 +551,7 @@
                 type=CatalogItem.CatalogTypeBackorder,
                 parentCatalogScreen = self,
                 ))
-            
+
         numPages = self.packPages(self.panelList, self.pageList, 'new')
         self.setNumNewPages(numPages)
         numPages = self.packPages(self.backPanelList,self.backPageList,'back')
@@ -577,7 +563,7 @@
             seriesNumber = currentWeek / ToontownGlobals.CatalogNumWeeksPerSeries + 1
             weekNumber = currentWeek % ToontownGlobals.CatalogNumWeeksPerSeries + 1
         # Catalog Series 5 & 6 are short. Need some special math here.
-        elif currentWeek < 65: 
+        elif currentWeek < 65:
             seriesNumber = 6
             weekNumber = (currentWeek - 56)
         # All catalogs after 5 & 6 now need to get bumped up by
@@ -591,7 +577,7 @@
         # is OK, and partly because we don't necessarily want all the
         # nodes.
         geom = NodePath('cover')
-        
+
         cover = guiItems.find('**/cover')
 
         # if the catalog has wrapped around, wrap around the images too
@@ -611,7 +597,7 @@
         else:
             topSquare.setColor(0.651, 0.404, 0.322, 1.000)
             bottomSquare.setColor(0.655, 0.522, 0.263, 1.000)
-            
+
         bottomSquare.reparentTo(geom)
         topSquare.reparentTo(geom)
         cover.find('**/clarabelle_text').reparentTo(geom)
@@ -643,7 +629,7 @@
             text_font = ToontownGlobals.getInterfaceFont()
             )
         self.catalogSeries.setShxz(0.4)
-                
+
         # Rings, visible when catalog is open
         self.rings = DirectLabel(
             self.base, relief = None, geom = guiItems.find('**/rings'))
@@ -727,7 +713,7 @@
 
         self.cDr = base.win.makeDisplayRegion(0.58, 0.82, 0.53, 0.85)
         self.cDr.setSort(1)
-            
+
         self.cDr.setClearDepthActive(1)
         self.cDr.setClearColorActive(1)
         self.cDr.setClearColor(Vec4(0.3,0.3,0.3,1))
@@ -750,7 +736,7 @@
         switchboard = loader.loadModel("phase_5.5/models/estate/switchboard")
         switchboard.reparentTo(self.clarabelle)
         switchboard.setPos(0, -2, 0)
-        
+
         # self.clarabelle = Char.Char()
         # clarabelleDNA = CharDNA.CharDNA()
         # clarabelleDNA.newChar('cl')
@@ -818,7 +804,7 @@
         self.setMaxPageIndex(self.numNewPages)
         self.setPageIndex(-1)
         self.showPageItems()
-        
+
     def unload(self):
         taskMgr.remove("clearClarabelleChat")
         taskMgr.remove("postGoodbyeHangUp")
@@ -860,9 +846,9 @@
         if self.responseDialog:
             self.responseDialog.cleanup()
             self.responseDialog = None
-            
+
         if self.giftAvatar:
-            if hasattr(self.giftAvatar, 'doId'):                
+            if hasattr(self.giftAvatar, 'doId'):
                 self.giftAvatar.delete()
             else:
                 self.giftAvatar = None
@@ -897,12 +883,12 @@
         taskMgr.remove("clarabelleGreeting")
         taskMgr.remove("clarabelleHelpText1")
         taskMgr.remove("clarabelleAskAnythingElse")
-        
+
         def postGoodbyeHangUp(task):
             messenger.send(self['doneEvent'])
             self.unload()
         taskMgr.doMethodLater(1.5, postGoodbyeHangUp, "postGoodbyeHangUp")
-        
+
     def remoteUpdate(self):
         print("remoteupdate")
         #print self.gifting
@@ -927,19 +913,19 @@
                         item.updateButtons(self.gifting)
                     #item.updateBuyButton()
                     #item.updateGiftButton(giftActivate)
-                
+
     def __handlePurchaseRequest(self, item):
         # ask the user to customize this purchase (if necessary) and
         # then ask AI to make the purchase.
         item.requestPurchase(self['phone'], self.__handlePurchaseResponse)
         # If you are buying something else, she should not say this
         taskMgr.remove("clarabelleAskAnythingElse")
-        
+
     def __handleGiftPurchaseRequest(self, item):
         # ask the user to customize this purchase (if necessary) and
         # then ask AI to make the purchase.
         #friendPair = base.localAvatar.friendsList[self.friendGiftIndex]
-        #frienddoId = base.cr.identifyFriend(friendPair[0]).getDoId() 
+        #frienddoId = base.cr.identifyFriend(friendPair[0]).getDoId()
         item.requestGiftPurchase(self['phone'], self.frienddoId,self.__handleGiftPurchaseResponse)
         # If you are buying something else, she should not say this
         taskMgr.remove("clarabelleAskAnythingElse")
@@ -960,24 +946,27 @@
             command = self.__clearDialog,
             )
         """
-        
+
     def __handleGiftPurchaseResponse(self, retCode, item):
         # AI has returned the status of the purchase in retCode
         if retCode == ToontownGlobals.P_UserCancelled:
             # No big deal; the user bailed.
             return
+        if self.isEmpty() or self.isHidden():
+            # the user hung up the phone before we got the uberdog response
+            return
         self.setClarabelleChat(item.getRequestGiftPurchaseErrorText(retCode) % (self.receiverName));
         self.__loadFriend()
 
         def askAnythingElse(task):
             self.setClarabelleChat(TTLocalizer.CatalogAnythingElse)
-        
+
         if retCode >= 0:
             # success: update catalog screen and buttons
             # After a while, have Clarabelle ask if there is anything else you would like
             taskMgr.doMethodLater(8, askAnythingElse, "clarabelleAskAnythingElse")
-            
-            
+
+
     def __clearDialog(self, event):
         self.responseDialog.cleanup()
         self.responseDialog = None
@@ -1006,7 +995,7 @@
         self.clarabelleChatNP.setPos(0.7,0,0.6)
         if timeout:
             taskMgr.doMethodLater(timeout, self.clearClarabelleChat, "clearClarabelleChat")
-        
+
     def clearClarabelleChat(self, task=None):
         # Clean up old chat
         taskMgr.remove("clearClarabelleChat")
@@ -1014,7 +1003,7 @@
             self.clarabelleChatNP.removeNode()
             self.clarabelleChatNP = None
             del self.clarabelleChat
-        
+
 
     def __moneyChange(self, money):
         if self.gifting > 0:
@@ -1036,8 +1025,8 @@
             if familyMember.id == doId:
                 test = 1
         return test
-        
-        
+
+
     def __makeFFlist(self):
         for familyMember in base.cr.avList:
             if familyMember.id != base.localAvatar.doId:
@@ -1047,8 +1036,8 @@
             friendId, flags = friendPair
             #print "adding friend"
             handle = base.cr.identifyFriend(friendId)
-            if handle and not self.checkFamily(friendId): 
-                if hasattr(handle, 'getName'):            
+            if handle and not self.checkFamily(friendId):
+                if hasattr(handle, 'getName'):
                     colorCode = NametagGroup.CCNoChat
                     if (flags & ToontownGlobals.FriendChat):
                         colorCode = NametagGroup.CCNormal
@@ -1057,7 +1046,7 @@
                 else:
                     self.notify.warning("Bad Handle for getName in makeFFlist")
         #import pdb; pdb.set_trace()
-            
+
     def __makeScrollList(self):
         for ff in self.ffList:
             ffbutton = self.makeFamilyButton(ff[0], ff[1], ff[2])
@@ -1070,9 +1059,7 @@
                 #print "not adding button"
                 #import pdb; pdb.set_trace()
         self.scrollList.refresh()
-            
-        
-            
+
     def makeFamilyButton(self, familyId, familyName, colorCode):
 
         #print("Making Family Button")
@@ -1081,9 +1068,9 @@
         # appropriate nametag color, according to whether we are
         # "special friends" or not.
         fg = NametagGlobals.getNameFg(colorCode, PGButton.SInactive)
-        
+
         #print "made family button"
-        
+
         return DirectButton(
             relief = None,
             text = familyName,
@@ -1093,12 +1080,12 @@
             text1_bg = self.textDownColor,
             text2_bg = self.textRolloverColor,
             text3_fg = self.textDisabledColor,
-            textMayChange = 0,            
+            textMayChange = 0,
             command = self.__chooseFriend,
             extraArgs = [familyId, familyName],
             )
 
-            
+
     def __chooseFriend(self, friendId, friendName):
         """selects a friend for loading"""
         #messenger.send('wakeup') # I have no idea what this is for
@@ -1109,12 +1096,12 @@
         #    self.friendGiftHandle = handle;
         #    self.frienddoId = handle.getDoId()
         #    self.__loadFriend()
-            
+
         self.frienddoId = friendId
         self.receiverName = friendName
         self.friendLabel['text'] = (TTLocalizer.CatalogGiftTo % (self.receiverName))
         self.__loadFriend()
-            
+
     def __loadFriend(self):
 
             #return
@@ -1133,8 +1120,6 @@
                 self.allowGetDetails = 0
                 self.scrollList['state'] = DISABLED
 
-            
-    
     def __handleAvatarDetails(self, gotData, avatar, dclass):
 
         """Receives and uses the detail avatar"""
@@ -1153,8 +1138,6 @@
         self.allowGetDetails = 1
         self.update()
 
-        
-        
     def __giftToggle(self):
         if self.gifting == -1:
             self.gifting = 1
@@ -1169,12 +1152,4 @@
             self.friendLabel.hide()
             self.scrollList.hide()
             self.giftToggle['text'] = TTLocalizer.CatalogGiftToggleOff
-            self.update() 
-        
-               
-        
-
-
-        
-    
-        
+            self.update()
--- src/chat/TTChatInputSpeedChat.py	7 Oct 2004 03:23:56 -0000	1.20
+++ src/chat/TTChatInputSpeedChat.py	15 Jul 2005 18:56:54 -0000	1.17.2.1.2.3
@@ -16,6 +16,7 @@
 from direct.fsm import State
 import string
 from otp.otpbase import OTPLocalizer
+from toontown.toonbase import TTLocalizer
 from otp.otpbase import OTPGlobals
 from toontown.shtiker.OptionsPage import speedChatStyles
 
@@ -71,7 +71,7 @@
      # This isn't what you need (1208) after This isn't what I'm looking for
      # I found what you need (1209) after I'm going to look for that
      1200,1201,1202,1208,1203,1209,1204,1205,1206,1210,1211,1207,1213,1214],
-    
+
     [OTPLocalizer.SCMenuBattle,
      [OTPLocalizer.SCMenuBattleGags, 1500,1501,1502,1503,1504,1505,1506,
       1401,1402,1413,],
@@ -271,7 +271,7 @@
 
         self.emoteNoAccessPanel.reparentTo(hidden)
 
-    # these handle selection messages coming from the speedchat object 
+    # these handle selection messages coming from the speedchat object
     def handleLinkedEmote(self, emoteId):
         # don't do the emote if we're whispering
         if self.whisperAvatarId is None:
@@ -318,9 +326,9 @@
             structure=structure,
             backgroundModelName='phase_3/models/gui/ChatPanel',
             guiModelName='phase_3.5/models/gui/speedChatGui')
-        self.speedChat.setScale(.055)
+        self.speedChat.setScale(TTLocalizer.CISCspeedChat)
         self.speedChat.setBin('gui-popup',0)
-        self.speedChat.setTopLevelOverlap(0.)
+        self.speedChat.setTopLevelOverlap(TTLocalizer.CISCtopLevelOverlap)
         self.speedChat.setColorScheme(self.DefaultSCColorScheme)
         # tell the speedchat to generate the gui elements for the entire
         # tree, so that the menu won't be chuggy the first time it's used
@@ -350,17 +350,17 @@
         # tell the speedchat to generate the gui elements for the entire
         # tree, so that the menu won't be chuggy the first time it's used
         self.speedChat.finalizeAll()
-        
+
     def addFactoryMenu(self):
         if self.factoryMenu == None:
             menu = TTSCFactoryMenu()
             self.factoryMenu = SCMenuHolder(OTPLocalizer.SCMenuFactory, menu=menu)
             self.speedChat[2:2] = [self.factoryMenu]
-        
+
     def removeFactoryMenu(self):
         if self.factoryMenu:
             i = self.speedChat.index(self.factoryMenu)
-            del self.speedChat[i] 
+            del self.speedChat[i]
             self.factoryMenu.destroy()
             self.factoryMenu = None
     #methods for creating Kart Racing speed chat menus
@@ -369,24 +369,24 @@
             menu = TTSCKartRacingMenu()
             self.kartRacingMenu = SCMenuHolder(OTPLocalizer.SCMenuKartRacing, menu=menu)
             self.speedChat[2:2] = [self.kartRacingMenu]
-        
+
     def removeKartRacingMenu(self):
         if self.kartRacingMenu:
             i = self.speedChat.index(self.kartRacingMenu)
-            del self.speedChat[i] 
+            del self.speedChat[i]
             self.kartRacingMenu.destroy()
             self.kartRacingMenu = None
-            
+
     def addCogMenu(self, indices):
         if self.cogMenu == None:
             menu = TTSCCogMenu(indices)
             self.cogMenu = SCMenuHolder(OTPLocalizer.SCMenuCog, menu=menu)
             self.speedChat[2:2] = [self.cogMenu]
-        
+
     def removeCogMenu(self):
         if self.cogMenu:
             i = self.speedChat.index(self.cogMenu)
-            del self.speedChat[i] 
+            del self.speedChat[i]
             self.cogMenu.destroy()
             self.cogMenu = None
 
@@ -400,7 +400,7 @@
     def removeCFOMenu(self):
         if self.cfoMenu:
             i = self.speedChat.index(self.cfoMenu)
-            del self.speedChat[i] 
+            del self.speedChat[i]
             self.cfoMenu.destroy()
             self.cfoMenu = None
 
@@ -420,6 +420,6 @@
     def removeCJMenu(self):
         if self.cjMenu:
             i = self.speedChat.index(self.cjMenu)
-            del self.speedChat[i] 
+            del self.speedChat[i]
             self.cjMenu.destroy()
             self.cjMenu = None
--- src/chat/ToontownChatManager.py	11 Dec 2004 03:10:38 -0000	1.9.2.3
+++ src/chat/ToontownChatManager.py	19 Jun 2008 02:13:08 -0000	1.9.4.10
@@ -4,6 +4,7 @@
 from direct.showbase import PandaObject
 from otp.otpbase import OTPGlobals
 from otp.otpbase import OTPLocalizer
+from toontown.toonbase import TTLocalizer
 from toontown.toontowngui import TeaserPanel
 #import ToontownGlobals
 from direct.directnotify import DirectNotifyGlobal
@@ -55,11 +56,11 @@
             relief = None,
             image_color = Vec4(1,1,1,1),
             text = ("", OTPLocalizer.ChatManagerChat, OTPLocalizer.ChatManagerChat),
-            text_align = TextNode.ALeft,            
-            text_scale = 0.06,
+            text_align = TextNode.ALeft,
+            text_scale = TTLocalizer.CMnormalButton,
             text_fg = Vec4(1,1,1,1),
             text_shadow = Vec4(0,0,0,1),
-            text_pos = (-0.0525, -0.09),            
+            text_pos = (-0.0525, -0.09),
             textMayChange = 0,
             sortOrder = FOREGROUND_SORT_INDEX,
             command = self.__normalButtonPressed,
@@ -76,14 +77,14 @@
                      gui.find("**/ChtBx_ChtBtn_DN"),
                      gui.find("**/ChtBx_ChtBtn_RLVR"),
                      ),
-            pos = (-1.129, 0, 0.928),
+            pos = TTLocalizer.CMscButtonPos,
             scale = 1.179,
             relief = None,
             image_color = Vec4(0.75,1,0.6,1),
             text = ("",
                     OTPLocalizer.GlobalSpeedChatName,
                     OTPLocalizer.GlobalSpeedChatName),
-            text_scale = 0.06,
+            text_scale = TTLocalizer.CMscButton,
             text_fg = Vec4(1,1,1,1),
             text_shadow = Vec4(0,0,0,1),
             text_pos = (0,-0.09),
@@ -102,7 +103,7 @@
             pos = (-0.4, 0, 0.754),
             text = OTPLocalizer.ChatManagerWhisperTo,
             text_wordwrap = 7.0,
-            text_scale = 0.06,
+            text_scale = TTLocalizer.CMwhisperFrame,
             text_fg = Vec4(0,0,0,1),
             text_pos = (0,0.14),
             textMayChange = 1,
@@ -150,7 +150,7 @@
                     ""),
             # Make the disabled button darker
             image3_color = Vec4(0.6, 0.6, 0.6, 0.6),
-            text_scale = 0.05,
+            text_scale = TTLocalizer.CMwhisperButton,
             text_fg = (0,0,0,1),
             text_pos = (0,-0.09),
             textMayChange = 0,
@@ -175,10 +175,10 @@
             textMayChange = 0,
             command = self.__whisperCancelPressed,
             )
-       
+
         gui.removeNode()
 
-        ChatManager.ChatManager.__init__(self, cr, localAvatar) 
+        ChatManager.ChatManager.__init__(self, cr, localAvatar)
         self.chatInputSpeedChat = TTChatInputSpeedChat(self)
         self.chatInputNormal = TTChatInputNormal(self)
 
@@ -237,7 +238,7 @@
                            image_scale = (1.2, 1.0, 0.9),
                            text = OTPLocalizer.OpenChatWarning,
                            text_wordwrap = 19,
-                           text_scale = 0.06,
+                           text_scale = TTLocalizer.CMopenChatWarning,
                            text_pos = (0.0, 0.28),
                            textMayChange = 0,
                            )
@@ -266,7 +266,7 @@
         normObs, scObs = self.isObscured()
         if (not scObs):
             self.scButton.show()
-        
+
     def exitOpenChatWarning(self):
         assert self.debugFunction()
         self.openChatWarning.hide()
@@ -281,7 +281,7 @@
         # Pop up a dialog indicating the user can't chat and show the appropriate
         # dialog box
         if (self.paidNoParentPassword):
-            if base.cr.productName in ['DisneyOnline-UK', 'ES', 'JP', 'T-Online', 'FR', 'Terra']:
+            if base.cr.productName in ['DisneyOnline-UK', 'ES', 'JP', 'DE', 'BR', 'FR']:
                 #print "### paid - uk user need to enable chat!!!"
                 directFrameText = OTPLocalizer.PaidParentPasswordUKWarning
                 payButtonText = OTPLocalizer.PaidParentPasswordUKWarningSet
@@ -296,9 +297,9 @@
                                                    image_color = OTPGlobals.GlobalDialogColor,
                                                    image_scale = (1.2, 1.0, 0.7),
                                                    text = directFrameText,
-                                                   text_wordwrap = 18,
-                                                   text_scale = 0.06,
-                                                   text_pos = (0.0, 0.23),
+                                                   text_wordwrap = TTLocalizer.CMunpaidChatWarningwordwrap,
+                                                   text_scale = TTLocalizer.CMunpaidChatWarning,
+                                                   text_pos = (0.0, TTLocalizer.CMunpaidChatWarning_text_y),
                                                    textMayChange = 0,
                                                    )
                 self.payButton = DirectButton(self.unpaidChatWarning,
@@ -306,20 +307,20 @@
                                               relief = None,
                                               text = payButtonText,
                                               image_scale = (1.75, 1, 1.15),
-                                              text_scale = 0.06,
+                                              text_scale = TTLocalizer.CMpayButton,
                                               text_pos = (0,-0.02),
                                               textMayChange = 0,
-                                              pos = (0.0, 0.0, -0.08),
+                                              pos = (0.0, 0.0, TTLocalizer.CMpayButton_pos_y),
                                               command = self.__handleUnpaidChatWarningPay)
                 DirectButton(self.unpaidChatWarning,
                              image = buttonImage,
                              relief = None,
                              text = directButtonText,
-                             textMayChange = 0,                         
+                             textMayChange = 0,
                              image_scale = (1.75, 1, 1.15),
                              text_scale = 0.06,
                              text_pos = (0,-0.02),
-                             pos = (0.0, 0.0, -0.23),
+                             pos = (0.0, 0.0, TTLocalizer.CMNoPasswordContinue_y),
                              command = self.__handleUnpaidChatWarningContinue)
                 guiButton.removeNode()
 
@@ -308,7 +308,7 @@
                                                    text = directFrameText,
                                                    text_wordwrap = TTLocalizer.CMunpaidChatWarningwordwrap,
                                                    text_scale = TTLocalizer.CMunpaidChatWarning,
-                                                   text_pos = (0.0, TTLocalizer.CMunpaidChatWarning_text_z),
+                                                   text_pos = (0.0, TTLocalizer.CMunpaidChatWarning_text_y),
                                                    textMayChange = 0,
                                                    )
                 self.payButton = DirectButton(self.unpaidChatWarning,
@@ -319,17 +319,17 @@
                                               text_scale = TTLocalizer.CMpayButton,
                                               text_pos = (0,-0.02),
                                               textMayChange = 0,
-                                              pos = (0.0, 0.0, TTLocalizer.CMpayButton_pos_z),
+                                              pos = (0.0, 0.0, TTLocalizer.CMpayButton_pos_y),
                                               command = self.__handleUnpaidChatWarningPay)
                 DirectButton(self.unpaidChatWarning,
                              image = buttonImage,
                              relief = None,
                              text = directButtonText,
-                             textMayChange = 0,                         
+                             textMayChange = 0,
                              image_scale = (1.75, 1, 1.15),
                              text_scale = 0.06,
                              text_pos = (0,-0.02),
-                             pos = (0.0, 0.0, TTLocalizer.CMNoPasswordContinue_z),
+                             pos = (0.0, 0.0, TTLocalizer.CMNoPasswordContinue_y),
                              command = self.__handleUnpaidChatWarningContinue)
                 guiButton.removeNode()
 
@@ -339,7 +339,7 @@
                 self.payButton.hide()
             else:
                 self.payButton.show()
-                
+
             self.unpaidChatWarning.show()
         else:
             # in this case, show the feature browser
@@ -352,11 +352,11 @@
             place = base.cr.playGame.getPlace()
             if place:
                 place.fsm.request("stopped")
-            
+
             # make a teaser panel
             self.teaser = TeaserPanel.TeaserPanel('secretChat',
                                                   self.__handleUnpaidChatWarningDone)
-            
+
             # Do not show the pay button if they are in tutorial.
             # Let them finish the tutorial first or they will have to do it again.
             if base.localAvatar.inTutorial:
@@ -364,7 +364,7 @@
 
         # The speedchat button is visible in this mode, but not the
         # normal chat button.
-        normObs, scObs = self.isObscured()        
+        normObs, scObs = self.isObscured()
         if (not scObs):
             self.scButton.show()
 
@@ -387,7 +388,7 @@
 
             # make sure these come up on top of everything else
             self.noSecretChatAtAll.setBin('gui-popup', 10)
-            
+
             DirectLabel(parent = self.noSecretChatAtAll,
                         relief = None,
                         pos = (0, 0, 0.35),
@@ -414,9 +414,9 @@
                          pos = (0.0, 0.0, -0.35),
                          command = self.__handleNoSecretChatAtAllOK)
             buttons.removeNode()
-            
+
         self.noSecretChatAtAll.show()
-        
+
     def exitNoSecretChatAtAll(self):
         assert self.debugFunction()
         self.noSecretChatAtAll.hide()
@@ -448,11 +448,11 @@
             # The Castillian (and all foreign) version relies on a seperate parent
             # password system. Omit the the password entry field and cancel button.
 
-            if base.cr.productName != "Terra-DMC":
+            if toonbase.tcr.productName == 'DisneyOnline-US':
                 okPos = (-0.22, 0.0, -0.35)
                 textPos = (0, 0.25)
                 okCommand = self.__handleNoSecretChatWarningOK
-            else:
+            else:               # is foreign
                 self.passwordEntry = None
                 okPos = (0, 0, -0.35)
                 textPos = (0, 0.125)
@@ -462,9 +463,6 @@
                            textMayChange = 1,
                            )
 
-            # make sure these come up on top of everything else
-            self.noSecretChatWarning.setBin('gui-popup', 10)
-
             DirectButton(self.noSecretChatWarning,
                          image = okButtonImage,
                          relief = None,
@@ -482,7 +482,7 @@
                          textMayChange = 0,
                          pos = okPos,
                          command = okCommand)
-                
+
             DirectLabel(parent = self.noSecretChatWarning,
                         relief = None,
                         pos = (0, 0, 0.35),
@@ -491,7 +491,7 @@
                         text_scale = 0.08)
 
             # if not foreign, make the domestic only password entry elements
-            if base.cr.productName != "Terra-DMC":
+            if toonbase.tcr.productName == 'DisneyOnline-US':
                 self.passwordLabel = DirectLabel(
                     parent = self.noSecretChatWarning,
                     relief = None,
@@ -499,7 +499,7 @@
                     text = OTPLocalizer.ParentPassword,
                     text_scale = 0.06,
                     text_align = TextNode.ARight,
-                    textMayChange = 0,                
+                    textMayChange = 0,
                     )
 
                 self.passwordEntry = DirectEntry(
@@ -535,9 +535,9 @@
             if self.passwordEntry:
                 self.passwordEntry['focus'] = 1
                 self.passwordEntry.enterText('')
-            
+
         self.noSecretChatWarning.show()
-        
+
     def exitNoSecretChatWarning(self):
         assert self.debugFunction()
         self.noSecretChatWarning.hide()
@@ -547,7 +547,7 @@
         assert self.debugFunction()
         # The parent password has been entered, so now provide the
         # option to enable secret friends.
-        
+
         if self.activateChat == None:
             # setup ok/cancel button art
             guiButton = loader.loadModelOnce("phase_3/models/gui/quit_button")
@@ -567,7 +565,7 @@
                            text = OTPLocalizer.ActivateChat,
                            text_align = TextNode.ALeft,
                            text_wordwrap = 33,
-                           text_scale = 0.05,
+                           text_scale = TTLocalizer.CMactivateChat,
                            text_pos = (-0.82, 0.58),
                            textMayChange = 0,
                            )
@@ -613,7 +611,7 @@
                         text_pos = (0, 0.7),
                         textMayChange = 0,
                         )
-            if (base.cr.productName != "NTT-DMC"):
+            if (base.cr.productName != "JP"):
                 # In the Japanese version, we do not want the more info button
                 # so we will simply not create it
                 DirectButton(self.activateChat,
@@ -689,8 +687,6 @@
         self.activateChat.show()
 
     def __initializeCheckBoxen(self):
-        print "### init check boxen: \n\tchat = %s\n\tneed password = %s\n" % (base.cr.secretChatAllowed,
-                                                                               base.cr.secretChatNeedsParentPassword)
         # update the check box gui based on current chat state
         if base.cr.secretChatAllowed and not base.cr.secretChatNeedsParentPassword:
             # enabled
@@ -729,7 +725,7 @@
     def exitActivateChat(self):
         assert self.debugFunction()
         self.activateChat.hide()
-        
+
     def enterSecretChatActivated(self, mode=2):
         assert self.debugFunction()
         # Feedback that secret chat mode been changed.
@@ -760,7 +756,7 @@
                            text = modeText,
                            text_align = TextNode.ACenter,
                            text_wordwrap = 14,
-                           text_scale = 0.06,
+                           text_scale = TTLocalizer.CMchatActivated,
                            text_pos = (0, 0.25),
                            )
             # ok button
@@ -805,7 +805,7 @@
     def enterProblemActivatingChat(self):
         assert self.debugFunction()
         # Some rare problem activating secret chat.
-        
+
         if self.problemActivatingChat == None:
             buttons = loader.loadModelOnce('phase_3/models/gui/dialog_box_buttons_gui')
             buttonImage = (buttons.find('**/ChtBx_OKBtn_UP'),
@@ -836,7 +836,7 @@
                          command = self.__handleProblemActivatingChatOK)
             buttons.removeNode()
         self.problemActivatingChat.show()
-        
+
     def exitProblemActivatingChat(self):
         assert self.debugFunction()
         self.problemActivatingChat.hide()
@@ -838,67 +834,46 @@
         The "normal button" is the button in the upper left of the screen
         that is normally used to do free chat.
         """
-        print "### nbp: in normal button pressed"
         assert self.debugFunction()
-        if (base.cr.productName == "DisneyOnline-US"):
+        if base.cr.productName in ['DisneyOnline-US', 'DE']:
             if not base.cr.isPaid():
-                print "### nbp: not paid"
                 self.fsm.request("unpaidChatWarning")
-            elif launcher and not launcher.getParentPasswordSet():
-                print "### nbp: no parentPasswordSet"
+            elif not base.cr.isParentPasswordSet():
                 self.paidNoParentPassword = 1
-                self.fsm.request("unpaidChatWarning")            
+                self.fsm.request("unpaidChatWarning")
             elif not base.cr.allowSecretChat():
-                print "### nbp: not allowSecretChat"
                 tt = base.cr.loginInterface
                 if tt.supportsParentPassword():
-                    print "### nbp: supports parent password"
                     self.fsm.request("noSecretChatWarning")
                 else:
-                    print "### nbp: np parent password support"
                     self.fsm.request("noSecretChatAtAll")
             elif not base.localAvatar.canChat():
-                print "### nbp: can't chat"
                 self.fsm.request("openChatWarning")
             else:
-                print "### nbp: normal chat"
                 self.fsm.request("normalChat")
-        elif (base.cr.productName == "Terra-DMC"):
+        elif (base.cr.productName == 'ES'):
             if not base.cr.allowSecretChat():
                 self.fsm.request("noSecretChatWarning")
             elif not base.localAvatar.canChat():
                 self.fsm.request("openChatWarning")
             else:
                 self.fsm.request("normalChat")
-        # TODO: finalize Disney Japan chat policy
-        elif (base.cr.productName == "NTT-DMC"):
-            if not base.cr.allowSecretChat():
-                self.fsm.request("noSecretChatWarning")
-            elif not base.localAvatar.canChat():
-                self.fsm.request("openChatWarning")
-            else:
-                self.fsm.request("normalChat")                
-        elif (base.cr.productName == "DisneyOnline-UK"):
+        elif base.cr.productName in ['DisneyOnline-UK', 'DisneyOnline-AP', 'ES', 'JP', 'DE', 'BR', 'FR']:
             if not base.cr.isPaid():
                 self.fsm.request("unpaidChatWarning")
+            elif not base.cr.isParentPasswordSet():
+                self.paidNoParentPassword = 1
+                self.fsm.request("unpaidChatWarning")
             elif not base.cr.allowSecretChat():
-                if launcher and launcher.getParentPasswordSet():
-                    print ("ChatManager: productName: %s " % (base.cr.productName))
-                    self.paidNoParentPassword = 1
-                    self.fsm.request("unpaidChatWarning")
-                    return
-                tt = base.cr.loginInterface
-                if tt.supportsParentPassword():
-                    self.fsm.request("noSecretChatWarning")
-                else:
-                    self.fsm.request("noSecretChatAtAll")
+                self.paidNoParentPassword = 1
+                self.fsm.request("unpaidChatWarning")
             elif not base.localAvatar.canChat():
                 self.fsm.request("openChatWarning")
             else:
                 self.fsm.request("normalChat")
         else:
             print ("ChatManager: productName: %s not recognized" % (base.cr.productName))
-        
+
     def __scButtonPressed(self):
         assert self.debugFunction()
         self.fsm.request("speedChat")
@@ -863,22 +863,14 @@
                 self.fsm.request("openChatWarning")
             else:
                 self.fsm.request("normalChat")
-        elif (base.cr.productName == "Terra-DMC"):
+        elif (base.cr.productName == 'ES'):
             if not base.cr.allowSecretChat():
                 self.fsm.request("noSecretChatWarning")
             elif not base.localAvatar.canChat():
                 self.fsm.request("openChatWarning")
             else:
                 self.fsm.request("normalChat")
-        # TODO: finalize Disney Japan chat policy
-        elif (base.cr.productName == "JP"):
-            if not base.cr.allowSecretChat():
-                self.fsm.request("noSecretChatWarning")
-            elif not base.localAvatar.canChat():
-                self.fsm.request("openChatWarning")
-            else:
-                self.fsm.request("normalChat")                
-        elif base.cr.productName in ['DisneyOnline-UK', "DisneyOnline-AP", 'ES', 'JP', 'T-Online', 'FR', 'Terra']:
+        elif base.cr.productName in ['DisneyOnline-UK', 'DisneyOnline-AP', 'ES', 'JP', 'DE', 'BR', 'FR']:
             if not base.cr.isPaid():
                 self.fsm.request("unpaidChatWarning")
             elif not base.cr.isParentPasswordSet():
@@ -906,7 +881,7 @@
     def __whisperButtonPressed(self, avatarName, avatarId):
         assert self.debugFunction()
         self.fsm.request("whisperChat", [avatarName, avatarId])
-        
+
     def __whisperScButtonPressed(self, avatarId):
         assert self.debugFunction()
         self.fsm.request("whisperSpeedChat", [avatarId])
@@ -959,7 +934,7 @@
             self.noSecretChatWarning['text'] = OTPLocalizer.NoSecretChatWarningWrongPassword
             self.passwordEntry['focus'] = 1
             self.passwordEntry.enterText('')
-            
+
     def __handleNoSecretChatWarningCancel(self):
         assert self.debugFunction()
         self.fsm.request("mainMenu")
@@ -969,10 +944,6 @@
         password = self.passwordEntry.get()
         tt = base.cr.loginInterface
 
-        print "### setting secret chat flags!!!"
-        
-        # TODO: make the appropriate call based on mode
-        # for now, a hack
         if self.dcb1['indicatorValue']:
             base.cr.secretChatAllowed = 0
             mode = 0
@@ -984,7 +955,7 @@
             base.cr.secretChatAllowed = 1
             base.cr.secretChatNeedsParentPassword = 0
             mode = 2
-            
+
         okflag, message = tt.enableSecretFriends(
             base.cr.userName, base.cr.password, password)
         if okflag:
@@ -1019,7 +990,7 @@
     def __handleProblemActivatingChatOK(self):
         assert self.debugFunction()
         self.fsm.request("mainMenu")
-    
+
     if __debug__:
         def debugFunction(self):
             """for debugging"""
--- src/classicchars/DistributedDaisyAI.py	24 Jun 2008 18:52:22 -0000	1.1.6.1
+++ src/classicchars/DistributedDaisyAI.py	29 Oct 2008 03:03:00 -0000	1.1.6.2
@@ -1,3 +1,5 @@
+"""DistributedDaisyAI module: contains the DistributedDaisyAI class"""
+
 from otp.ai.AIBaseGlobal import *
 import DistributedCCharBaseAI
 from direct.directnotify import DirectNotifyGlobal
--- src/coghq/CogDisguiseGlobals.py	1 Jun 2004 19:32:12 -0000	1.18
+++ src/coghq/CogDisguiseGlobals.py	18 Jun 2008 23:23:06 -0000	1.18.6.2
@@ -35,9 +35,9 @@
      (160, 210, 260, 310, 1300), # p 2-6
      (260, 340, 420, 500, 2100), # ym 3-7
      (420, 550, 680, 810, 3400), # mm 4-8
-     (680, 890, 1100, 1310, 5500), # hh 5-9
-     (1100, 1440, 1780, 2120, 8900), # cr 6-10
-     (1780, 2330, 2880, 3430, 14400), # ls 7-11
+     (680, 890, 1100, 1310, 5500), # ds 5-9
+     (1100, 1440, 1780, 2120, 8900), # hh 6-10
+     (1780, 2330, 2880, 3430, 14400), # cr 7-11
      (2880, 3770, 4660, 5500, 23300, # tbc 8-12
      # these are at irregular intervals to correspond with laff point bonuses
       2880, 23300, # tbc 13-14
@@ -45,8 +45,8 @@
       2880, 3770, 4660, 5500, 6440, 7330, 8220, 9110, 10000, 23300, # tbc 20-29
       2880, 3770, 4660, 5500, 6440, 7330, 8220, 9110, 10000, 23300, # tbc 30-39
       2880, 3770, 4660, 5500, 6440, 7330, 8220, 9110, 10000, 23300, # tbc 40-49
-      0), # tbc 
-     
+      0), # tbc
+
      # lawbots
      (60, 80, 100, 120, 500), # bf 1-5
      (100, 130, 160, 190, 800), # b 2-6
@@ -154,8 +154,8 @@
 
 PartsQueryNames = (
     # bossbots
-    {1: PartNameStrings[0], 2: PartNameStrings[1], 4: PartNameStrings[2],       
-       8: PartNameStrings[3], 16: PartNameStrings[4], 32: PartNameStrings[5],       
+    {1: PartNameStrings[0], 2: PartNameStrings[1], 4: PartNameStrings[2],
+       8: PartNameStrings[3], 16: PartNameStrings[4], 32: PartNameStrings[5],
        64: PartNameStrings[6], 128: PartNameStrings[7], 256: PartNameStrings[8],
        512: PartNameStrings[9], 1024: PartNameStrings[10],
        2048: PartNameStrings[11], 4096: PartNameStrings[12], 8192: PartNameStrings[13],
@@ -235,7 +235,7 @@
     # map the cog level to btwn 0 and max
     cogLevel = max(min(cogLevel, len(MeritsPerLevel[cogIndex])-1), 0)
     return MeritsPerLevel[cogIndex][cogLevel]
-    
+
 def getTotalParts(bitString, shiftWidth=32):
     sum = 0
     for shift in range(0, shiftWidth):
@@ -270,9 +270,3 @@
         dept = SuitDNA.suitDepts.index(dept)
     return dept
 
-    
-
-    
-    
-    
-    
--- src/coghq/DistributedFactory.py	1 Jun 2004 19:32:13 -0000	1.89
+++ src/coghq/DistributedFactory.py	21 Nov 2005 18:18:19 -0000	1.89.6.2
@@ -30,6 +30,10 @@
     def createEntityCreator(self):
         return FactoryEntityCreator.FactoryEntityCreator(level=self)
 
+    # allow localized versions to change the scale of the room title text
+    def getTitleTextScale(self):
+        return TTLocalizer.DFfactoryRoomTitle
+
     def generate(self):
         self.notify.debug('generate')
         DistributedLevel.DistributedLevel.generate(self)
--- src/coghq/DistributedLawbotChair.py	24 Jul 2008 22:35:22 -0000	1.14.12.1
+++ src/coghq/DistributedLawbotChair.py	5 Dec 2008 01:42:43 -0000	1.14.12.2
@@ -520,7 +520,7 @@
         if self.index:
             rowIndex = self.index % 6
         else:
-            rowIndex = 1
+            rowIndex = 0
         if self.index < 6:
             startPt = Point3(*ToontownGlobals.LawbotBossChairRow1PosA)
             endPt = Point3(*ToontownGlobals.LawbotBossChairRow1PosB)
--- src/coghq/SellbotCogHQLoader.py	1 Jun 2004 19:32:14 -0000	1.16
+++ src/coghq/SellbotCogHQLoader.py	15 Jul 2005 18:57:08 -0000	1.16.6.1
@@ -68,7 +68,7 @@
             dgText = DirectGui.OnscreenText(
                 text = TTLocalizer.DaisyGardens[-1],
                 font = ToontownGlobals.getSuitFont(),
-                pos = (0,-0.3), scale = 0.1,
+                pos = (0,-0.3), scale = TTLocalizer.SCLdgSign,
                 parent = dgSign)
             dgText.setDepthWrite(0)
 
@@ -151,7 +151,7 @@
             fdTypeText = DirectGui.OnscreenText(
                 text = TTLocalizer.Factory,
                 font = ToontownGlobals.getSuitFont(),
-                pos = (0,-0.25), scale = .075,
+                pos = (0,-0.25), scale = TTLocalizer.SCLfdSign,
                 parent = fdSign)
             fdTypeText.setDepthWrite(0)
             fdText = DirectGui.OnscreenText(
--- src/coghq/SellbotLegFactorySpec.py	28 Feb 2004 01:38:44 -0000	1.198
+++ src/coghq/SellbotLegFactorySpec.py	6 Oct 2005 05:22:19 -0000	1.198.16.1
@@ -1,3 +1,4 @@
+from toontown.toonbase import TTLocalizer
 from SpecImports import *
 
 GlobalEntities = {
@@ -39,7 +40,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': Vec3(1.0,1.0,1.0),
-        'description': 'Main Entrance',
+        'description': TTLocalizer.SellbotLegFactorySpecMainEntrance ,
         'visibility': [114],
         }, # end entity 3
     4: {
@@ -48,7 +49,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': Vec3(1.0,1.0,1.0),
-        'description': 'Lobby',
+        'description': TTLocalizer.SellbotLegFactorySpecLobby ,
         'visibility': [113, 114],
         }, # end entity 4
     5: {
@@ -66,7 +67,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'Lobby Hallway',
+        'description': TTLocalizer.SellbotLegFactorySpecLobbyHallway ,
         'visibility': [109, 116, 117, 118],
         }, # end entity 6
     7: {
@@ -75,7 +76,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'Gear Room',
+        'description':  TTLocalizer.SellbotLegFactorySpecGearRoom ,
         'visibility': [109, 110],
         }, # end entity 7
     8: {
@@ -84,7 +85,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'Boiler Room',
+        'description': TTLocalizer.SellbotLegFactorySpecBoilerRoom ,
         'visibility': [108, 117],
         }, # end entity 8
     9: {
@@ -93,7 +94,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'East Catwalk',
+        'description': TTLocalizer.SellbotLegFactorySpecEastCatwalk ,
         'visibility': [23, 25, 26, 33, 34, 35, 38, 41, 53, 110, 112, 115, 124, 200, 222],
         }, # end entity 9
     10: {
@@ -102,7 +103,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'Paint Mixer',
+        'description': TTLocalizer.SellbotLegFactorySpecPaintMixer ,
         'visibility': [11, 111, 112],
         }, # end entity 10
     11: {
@@ -111,7 +112,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'Paint Mixer Storage Room',
+        'description': TTLocalizer.SellbotLegFactorySpecPaintMixerStorageRoom ,
         'visibility': [10, 111, 112],
         }, # end entity 11
     12: {
@@ -120,7 +121,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'West Silo Catwalk',
+        'description': TTLocalizer.SellbotLegFactorySpecWestSiloCatwalk ,
         'visibility': [21, 26, 33, 34, 35, 36, 37, 40, 41, 53, 60, 61, 108, 110, 119, 120, 125, 127, 128, 129, 130, 200],
         }, # end entity 12
     13: {
@@ -129,7 +130,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'Pipe Room',
+        'description': TTLocalizer.SellbotLegFactorySpecPipeRoom ,
         'visibility': [119, 121],
         }, # end entity 13
     14: {
@@ -147,7 +148,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'Duct Room',
+        'description': TTLocalizer.SellbotLegFactorySpecDuctRoom ,
         'visibility': [106, 126],
         }, # end entity 15
     16: {
@@ -156,7 +157,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'Side Entrance',
+        'description': TTLocalizer.SellbotLegFactorySpecSideEntrance ,
         'visibility': [106],
         }, # end entity 16
     17: {
@@ -165,7 +166,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'Stomper Alley',
+        'description': TTLocalizer.SellbotLegFactorySpecStomperAlley ,
         'visibility': [14, 121, 126, 131],
         }, # end entity 17
     18: {
@@ -174,7 +175,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'Lava Room Foyer',
+        'description': TTLocalizer.SellbotLegFactorySpecLavaRoomFoyer ,
         'visibility': [19, 20, 102, 103, 105, 131],
         }, # end entity 18
     19: {
@@ -183,7 +184,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'Lava Room',
+        'description': TTLocalizer.SellbotLegFactorySpecLavaRoom ,
         'visibility': [17, 18, 20, 105, 131],
         }, # end entity 19
     20: {
@@ -192,7 +193,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'Lava Storage Room',
+        'description': TTLocalizer.SellbotLegFactorySpecLavaStorageRoom ,
         'visibility': [18, 19, 105],
         }, # end entity 20
     21: {
@@ -201,7 +202,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'West Catwalk',
+        'description': TTLocalizer.SellbotLegFactorySpecWestCatwalk ,
         'visibility': [12, 23, 26, 33, 34, 35, 40, 41, 53, 60, 108, 119, 120, 125, 127, 200],
         }, # end entity 21
     22: {
@@ -210,7 +211,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'Oil Room',
+        'description': TTLocalizer.SellbotLegFactorySpecOilRoom ,
         'visibility': [107],
         }, # end entity 22
     23: {
@@ -219,7 +220,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'Lookout',
+        'description': TTLocalizer.SellbotLegFactorySpecLookout ,
         'visibility': [24, 39, 115, 118, 120, 123, 124, 125],
         }, # end entity 23
     24: {
@@ -228,7 +229,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'Warehouse',
+        'description': TTLocalizer.SellbotLegFactorySpecWarehouse ,
         'visibility': [23, 39, 115, 120, 123, 124, 125],
         }, # end entity 24
     25: {
@@ -255,7 +256,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'Oil Room Hallway',
+        'description': TTLocalizer.SellbotLegFactorySpecOilRoomHallway ,
         'visibility': [105, 107, 127],
         }, # end entity 27
     30: {
@@ -264,7 +265,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'East Silo Control Room',
+        'description': TTLocalizer.SellbotLegFactorySpecEastSiloControlRoom ,
         'visibility': [130],
         }, # end entity 30
     31: {
@@ -273,7 +274,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'West Silo Control Room',
+        'description': TTLocalizer.SellbotLegFactorySpecWestSiloControlRoom ,
         'visibility': [128],
         }, # end entity 31
     32: {
@@ -282,7 +283,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'Center Silo Control Room',
+        'description': TTLocalizer.SellbotLegFactorySpecCenterSiloControlRoom ,
         'visibility': [129],
         }, # end entity 32
     33: {
@@ -291,7 +292,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'East Silo',
+        'description': TTLocalizer.SellbotLegFactorySpecEastSilo ,
         'visibility': [9, 12, 21, 25, 26, 34, 35, 36, 37, 38, 40, 41, 53, 60, 61, 108, 110, 112, 119, 124, 128, 129, 130, 200, 222],
         }, # end entity 33
     34: {
@@ -300,7 +301,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'West Silo',
+        'description': TTLocalizer.SellbotLegFactorySpecWestSilo ,
         'visibility': [9, 12, 21, 25, 26, 33, 35, 36, 37, 40, 41, 53, 60, 61, 108, 110, 112, 119, 120, 125, 127, 128, 129, 130, 200],
         }, # end entity 34
     35: {
@@ -309,7 +310,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'Center Silo',
+        'description': TTLocalizer.SellbotLegFactorySpecCenterSilo ,
         'visibility': [9, 21, 25, 26, 33, 34, 36, 37, 40, 41, 53, 60, 61, 108, 110, 112, 119, 128, 129, 130, 200],
         }, # end entity 35
     36: {
@@ -336,7 +337,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'East Silo Catwalk',
+        'description': TTLocalizer.SellbotLegFactorySpecEastSiloCatwalk ,
         'visibility': [9, 25, 26, 33, 34, 35, 36, 37, 41, 53, 60, 110, 112, 115, 124, 200, 222],
         }, # end entity 38
     39: {
@@ -381,7 +382,7 @@
         'comment': '',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'West Elevator Shaft',
+        'description': TTLocalizer.SellbotLegFactorySpecWestElevatorShaft ,
         'visibility': [],
         }, # end entity 60
     61: {
@@ -390,7 +391,7 @@
         'comment': 'no geom or DCS',
         'parentEntId': 0,
         'scale': 1,
-        'description': 'East Elevator Shaft',
+        'description': TTLocalizer.SellbotLegFactorySpecEastElevatorShaft ,
         'visibility': [],
         }, # end entity 61
     101: {
--- src/configfiles/Sources.pp	12 Jun 2004 00:19:05 -0000	1.11
+++ src/configfiles/Sources.pp	9 Sep 2005 00:40:36 -0000	1.12
@@ -2,3 +2,17 @@
   toontown.init 60_toontown.prc
 
 #include $[THISDIRPREFIX]toontown.prc.pp
+
+#if $[LANGUAGE]
+  #if $[eq $[LANGUAGE], castillian]
+    #set INSTALL_CONFIG $[INSTALL_CONFIG] castillianPRC
+  #elif $[eq $[LANGUAGE], japanese]
+    #set INSTALL_CONFIG $[INSTALL_CONFIG] japanesePRC
+  #elif $[eq $[LANGUAGE], german]
+    #set INSTALL_CONFIG $[INSTALL_CONFIG] germanPRC
+  #elif $[eq $[LANGUAGE], portuguese]
+    #set INSTALL_CONFIG $[INSTALL_CONFIG] portuguesePRC
+  #elif $[eq $[LANGUAGE], french]
+    #set INSTALL_CONFIG $[INSTALL_CONFIG] frenchPRC
+  #endif
+#endif
--- src/distributed/PlayGame.py	9 Sep 2004 21:07:47 -0000	1.96
+++ src/distributed/PlayGame.py	15 Jul 2005 18:58:29 -0000	1.96.6.1
@@ -321,10 +321,10 @@
                         loader.beginBulkLoad("hood", (TTLocalizer.HeadingToEstate % avName), count,
                                              1, TTLocalizer.TIP_ESTATE)
             elif ZoneUtil.isCogHQZone(zoneId):
-                loader.beginBulkLoad("hood", (TTLocalizer.HeadingToHood % (toHoodPhrase,hoodName)), count,
+                loader.beginBulkLoad("hood", (TTLocalizer.HeadingToHood % {'to':toHoodPhrase,'hood':hoodName}), count,
                                      1, TTLocalizer.TIP_COGHQ)
             else:
-                loader.beginBulkLoad("hood", (TTLocalizer.HeadingToHood % (toHoodPhrase,hoodName)), count,
+                loader.beginBulkLoad("hood", (TTLocalizer.HeadingToHood % {'to':toHoodPhrase,'hood':hoodName}), count,
                                      1, TTLocalizer.TIP_GENERAL)
 
         if hoodId == ToontownGlobals.Tutorial:
--- src/distributed/ToontownClientRepository.py	22 Oct 2004 23:20:31 -0000	1.507.2.3
+++ src/distributed/ToontownClientRepository.py	30 Oct 2007 01:23:28 -0000	1.507.2.3.2.1
@@ -57,9 +57,6 @@
 import HoodMgr
 import PlayGame
 
-
-
-
 class ToontownClientRepository(OTPClientRepository.OTPClientRepository):
     """ToontownClientRepository class: handle distribution for client"""
 
@@ -86,7 +83,7 @@
         setInterfaceFont(TTLocalizer.InterfaceFont)
         setSignFont(TTLocalizer.SignFont)
         self.toons = {}
-        
+
         # We won't bother to check expiration dates when validating
         # SSL certificates.  Users have a funny tendency to leave the
         # dates on their computers out of whack by several years, so
@@ -130,11 +127,11 @@
         self.welcomeValleyManager = None
         self.newsManager = None
         self.distributedDistrict = None
-        
+
         self.deliveryManager = self.generateGlobalObject(
             OtpDoGlobals.OTP_DO_ID_TOONTOWN_DELIVERY_MANAGER,
-            "DistributedDeliveryManager") 
-        
+            "DistributedDeliveryManager")
+
         # This one is a little different, because it doesn't live in
         # the Uber zone; a different one lives in the zone for each
         # house.  But still it is similar.
@@ -164,7 +161,7 @@
 
         # The music will get passed in from ToontownStart
         self.hoodMgr = HoodMgr.HoodMgr(self)
-        
+
         self.setZonesEmulated = 0
         # this is used to emulate the old setzone behavior
         # with set location and set interest
@@ -179,7 +176,7 @@
 
         # keep track of the objects that we've manually deleted
         self._deletedSubShardDoIds = set()
-        
+
     # Each state will have an enter function, an exit function,
     # and a datagram handler, which will be set during each enter function.
 
@@ -221,7 +218,7 @@
                                      )
         buttons.removeNode()
         base.transitions.noFade()
-        
+
     def __handleCongrats(self, avatarChoice):
         self.acceptedBanner.destroy()
         self.acceptedText.destroy()
@@ -238,7 +235,7 @@
         datagram.addUint32(avatarChoice.id)
         datagram.addUint8(1)
         # Send the message
-        self.send(datagram)        
+        self.send(datagram)
         self.loginFSM.request("waitForSetAvatarResponse", [avatarChoice])
 
     def betterlucknexttime(self, avList, index):
@@ -268,7 +265,7 @@
             # print "The sky is falling!"
             self.notify.error("Avatar rejected not found in avList.  Index is: " +
                               str(index))
-        
+
         datagram.addUint32(avid)
         datagram.addUint8(0)
         # Send the message
@@ -279,7 +276,7 @@
     def enterChooseAvatar(self, avList):
         ModelPool.garbageCollect()
         TexturePool.garbageCollect()
-        
+
         # Set the current avatar state to zero, just in case
         # we were playing before. I'm not completely sure this is
         # the perfect place...
@@ -303,7 +300,7 @@
                 self.music.setVolume(0.9)
                 self.music.play()
         base.playMusic(self.music, looping = 1, volume = 0.9, interrupt = None)
-        
+
         self.handler = self.handleMessageType
         # Display the avatar choice screen
         self.avChoiceDoneEvent = "avatarChooserDone"
@@ -315,7 +312,6 @@
         self.accept(self.avChoiceDoneEvent, self.__handleAvatarChooserDone,
                     [avList])
 
-
     def __handleAvatarChooserDone(self, avList, doneStatus):
         done = doneStatus['mode']
         if (done == "exit"):
@@ -369,7 +365,7 @@
         self.downloadAck = None
         self.ignore("downloadAck-response")
 
-        
+
     def exitChooseAvatar(self):
         self.handler = None
         self.avChoice.exit()
@@ -403,7 +399,7 @@
                 index,
                 1)
             avList.append(self.newPotAv)
-            
+
         # We need the avList in case we go back to chooseAvatar mode
         # Display the create avatar screen
         base.transitions.noFade()
@@ -414,7 +410,7 @@
         self.avCreate.enter()
 
         self.handler = self.handleCreateAvatar
-        
+
         # Hang hooks for when the selection is made
         self.accept("makeAToonComplete",
                     self.__handleMakeAToon, [avList, index])
@@ -420,7 +419,7 @@
         self.avCreate = None
         self.handler = None
         if hasattr(self, 'newPotAv'):
-            del self.newPotAv                
+            del self.newPotAv
 
 
     def handleAvatarResponseMsg(self, di):
@@ -424,7 +420,7 @@
     def relayMessage(self, dg):
         #print dg.dumpHex(ostream)
         self.send(dg)
-        
+
     def handleCreateAvatar(self, msgType, di):
         #print di.getDatagram().dumpHex(ostream)
         #Roger wants to remove this if msgType == CLIENT_SERVER_UP:
@@ -438,7 +434,7 @@
             self.avCreate.ns.nameShopHandler(msgType, di)
         else:
             self.handleMessageType(msgType, di)
-    
+
     def __handleMakeAToon(self, avList, avPosition):
         done = self.avCreate.getDoneStatus()
 
@@ -502,7 +501,7 @@
         # autoFinish set true.  These are intervals that the owners won't
         # necessarily stop when they get disabled.
         ivalMgr.interrupt()
-        
+
         # Note: the object manager is not a distributed object.  We just
         # need a good place to destroy it
         if self.objectManager != None:
@@ -538,7 +537,7 @@
             NametagGlobals.setToon(base.cam)
             del base.localAvatar
             del __builtins__["localAvatar"]
-            
+
         # Interrupt the loading bar, if it's up.
         loader.abortBulkLoad()
 
@@ -553,7 +552,7 @@
         FriendSecret.unloadFriendSecret()
         FriendsListPanel.unloadFriendsList()
         messenger.send('cancelFriendInvitation')
-        
+
         # Interrupt the loading bar, if it's up.
         loader.abortBulkLoad()
 
@@ -562,10 +561,10 @@
         # underlying problem of some objects that do not properly
         # clean themselves up.
         #self.abruptCleanup()
-        
+
         # Clean up messenger events for this global here:
         inputState.delete()
-        
+
         # Make sure there are no leftover tasks that shouldn't be here.
         allowedTasks = ("dataloop",
                         "resetPrevTransform",
@@ -689,7 +688,7 @@
             self.trophyManager.d_requestTrophyScore()
 
         OTPClientRepository.OTPClientRepository.reachedQuietZone(self)
-        
+
 
     ##### gameFSM: tutorialQuestion #####
 
@@ -701,7 +700,7 @@
         self.handler = self.handleTutorialQuestion
         self.__requestTutorial(hoodId, zoneId, avId)
         return
-        
+
     def handleTutorialQuestion(self, msgType, di):
         if msgType == CLIENT_CREATE_OBJECT_REQUIRED:
             self.handleGenerateWithRequired(di)
@@ -834,7 +833,7 @@
     def addAvatarToFriendsList(self, avatar):
         self.friendsMap[avatar.doId] = avatar
         return
-        
+
     def identifyFriend(self, doId):
         """identifyFriend(self, doId)
 
@@ -899,7 +898,7 @@
         listed in the friends map, false otherwise.
 
         """
-        
+
         for friendId, flags in base.localAvatar.friendsList:
             if self.identifyFriend(friendId) == None:
                 return 0
@@ -1000,7 +999,7 @@
 
         if doId and self.friendsMap.has_key(doId):
             del self.friendsMap[doId]
-        
+
     def addPetToFriendsMap(self, callback=None):
         #need to add the pet to the list
         doId = base.localAvatar.getPetId()
@@ -1010,7 +1009,7 @@
             if callback:
                 callback()
             return
-        
+
         def petDetailsCallback(petAvatar):
             #self.friendsMap[doId] = petAvatar
             handle = PetHandle.PetHandle(petAvatar)
@@ -1021,7 +1020,7 @@
                 callback()
 
         PetDetail.PetDetail(doId, petDetailsCallback)
-        
+
     def handleGetFriendsList(self, di):
         # Is this record in error?
         error = di.getUint8()
--- src/effects/DistributedFireworkShow.py	1 Jun 2004 19:32:14 -0000	1.26
+++ src/effects/DistributedFireworkShow.py	22 Jul 2008 23:58:27 -0000	1.26.6.4
@@ -94,6 +94,31 @@
             startMessage = TTLocalizer.FireworksJuly4Beginning
             endMessage = TTLocalizer.FireworksJuly4Ending
             musicFile ="phase_4/audio/bgm/firework_music.mid"
+        elif holidayId == OCTOBER31_FIREWORKS: # German and French
+            startMessage = TTLocalizer.FireworksOctober31Beginning
+            endMessage = TTLocalizer.FireworksOctober31Ending
+            musicFile ="phase_4/audio/bgm/firework_music.mid"
+            holidayId = JULY4_FIREWORKS
+        elif holidayId == NOVEMBER19_FIREWORKS: # German
+            startMessage = TTLocalizer.FireworksNovember19Beginning
+            endMessage = TTLocalizer.FireworksNovember19Ending
+            musicFile ="phase_4/audio/bgm/firework_music.mid"
+            holidayId = JULY4_FIREWORKS
+        elif holidayId in [FEBRUARY14_FIREWORKS, VALENTINES_FIREWORKS] : # French, Brazil
+            startMessage = TTLocalizer.FireworksValentinesBeginning
+            endMessage = TTLocalizer.FireworksValentinesEnding
+            musicFile ="phase_4/audio/bgm/firework_music.mid"
+            holidayId = JULY4_FIREWORKS
+        elif holidayId == JUNE22_FIREWORKS: # French
+            startMessage = TTLocalizer.FireworksBeginning
+            endMessage = TTLocalizer.FireworksEnding
+            musicFile ="phase_4/audio/bgm/firework_music.mid"
+            holidayId = JULY4_FIREWORKS
+        elif holidayId == JULY14_FIREWORKS: # French
+            startMessage = TTLocalizer.FireworksJuly14Beginning
+            endMessage = TTLocalizer.FireworksJuly14Ending
+            musicFile ="phase_4/audio/bgm/firework_music.mid"
+            holidayId = JULY4_FIREWORKS
         elif holidayId == NEWYEARS_FIREWORKS:
             startMessage = TTLocalizer.FireworksNewYearsEveBeginning
             endMessage = TTLocalizer.FireworksNewYearsEveEnding
--- src/effects/FireworkShows.py	1 Jun 2004 19:32:14 -0000	1.16
+++ src/effects/FireworkShows.py	22 Jul 2008 23:59:01 -0000	1.16.6.4
@@ -1718,6 +1718,16 @@
     }
 
 def getShow(holidayId, index):
+    # if this firework is for german holidays, show JULY4_FIREWORKS 
+    if ((holidayId >= ToontownGlobals.OCTOBER31_FIREWORKS) and (holidayId <= ToontownGlobals.NOVEMBER19_FIREWORKS)):
+        holidayId = ToontownGlobals.JULY4_FIREWORKS
+    # if this firework is for french holidays, show JULY4_FIREWORKS
+    if ((holidayId >= ToontownGlobals.FEBRUARY14_FIREWORKS) and (holidayId <= ToontownGlobals.JULY14_FIREWORKS)):
+        holidayId = ToontownGlobals.JULY4_FIREWORKS
+    # generic support for Valentine's fireworks
+    if (holidayId == ToontownGlobals.VALENTINES_FIREWORKS):
+        holidayId = ToontownGlobals.JULY4_FIREWORKS
+
     showList = shows.get(holidayId, [])
     if index < len(showList):
         return showList[index]
--- src/estate/houseDesign.py	17 Jun 2004 03:25:28 -0000	1.63
+++ src/estate/houseDesign.py	16 Dec 2004 02:59:55 -0000	1.63.6.1
@@ -1363,6 +1363,7 @@
             image = [tagUp, tagDown, tagRollover],
             pos = (2.85,0,4),
             scale = 0.8,
+            text_scale = TTLocalizer.HDatticButton,
             command = self.showAtticPicker,
             )
         self.bindHelpText(self.inAtticButton, "Attic")
@@ -1375,6 +1376,7 @@
             image = [tagUp, tagDown, tagRollover],
             pos = (2.85,0,1.1),
             scale = 0.8,
+            text_scale = TTLocalizer.HDroomButton,
             command = self.showInRoomPicker,
             )
         self.bindHelpText(self.inRoomButton,"Room")
@@ -1387,6 +1389,7 @@
             image = [tagUp, tagDown, tagRollover],
             pos = (2.85,0,-1.8),
             scale = 0.8,
+            text_scale = TTLocalizer.HDtrashButton,
             command = self.showInTrashPicker,
             )
         self.bindHelpText(self.inTrashButton,"Trash")
@@ -1523,7 +1526,7 @@
             text_wordwrap = 12,
             text_fg = (1,1,1,1),
             text_shadow = (0,0,0,1),
-            text_scale = 0.8,
+            text_scale = TTLocalizer.HDhelpText,
             pos = (3, 0.0, -7),
             scale = 1,
             text_align = TextNode.ALeft,
@@ -1670,7 +1673,7 @@
             text = text,
             text_fg = (1,1,1,1),
             text_shadow = (0,0,0,1),
-            text_scale = 0.1,
+            text_scale = TTLocalizer.HDscrolledList,
             text_pos = (0,0.4),
             # inc and dec are DirectButtons
             decButton_image = (gui.find("**/FndsLst_ScrollUp"),
--- src/fishing/BingoCardGui.py	1 Dec 2004 06:34:22 -0000	1.31
+++ src/fishing/BingoCardGui.py	19 Jun 2008 02:47:08 -0000	1.33.14.1
@@ -1,7 +1,7 @@
 #################################################################
 # class: BingoCardGui.py
 # Purpose: Provide a base layout of the bingo card GUI which can
-#          be used in a variety of games. 
+#          be used in a variety of games.
 #################################################################
 
 #################################################################
@@ -31,7 +32,7 @@
 
 class BingoCardGui(DirectFrame):
     notify = DirectNotifyGlobal.directNotify.newCategory('BingoCardGui')
-    notify.setDebug(True)
+    #notify.setDebug(True)
 
     #################################################################
     # Method: __init__
@@ -69,7 +70,7 @@
         self.game = None
         self.cellGuiList = []
         self.parent = parent
-        
+
         self.load()
         self.hide()
 
@@ -81,12 +82,12 @@
             self.__indicateBingo(True)
             if self.game.getGameType() == BG.BLOCKOUT_CARD:
                 self.showJackpot()
-        
+
     def hide(self):
         self.hideTutorial()
         self.hideJackpot()
         DirectFrame.hide(self)
-        
+
     #################################################################
     # Method: loadTimer
     # Purpose: This method instantiates a game timer, positions it
@@ -189,7 +190,7 @@
     #################################################################
     def setJackpotText(self, text):
         if text:
-            str = "Win %s jellybeans!" % text 
+            str = TTLocalizer.FishBingoJackpotWin % text
         else:
             str = ""
 
@@ -197,7 +198,7 @@
 
     #################################################################
     # Method: resetGameTypeText
-    # Purpose: This method resets the Game Type text to ''. 
+    # Purpose: This method resets the Game Type text to ''.
     # Input: text - text to display with the timer.
     # Output: None
     #################################################################
@@ -219,8 +220,8 @@
         self.nextGame = DirectLabel(parent= self,
                                     relief = None,
                                     text = '',
-                                    text_font = ToontownGlobals.getSignFont(),
-                                    text_scale = 1.71*BG.CardImageScale[2],
+                                    text_font = ToontownGlobals.getBuildingNametagFont(),
+                                    text_scale = TTLocalizer.BCGnextGame*BG.CardImageScale[2],
                                     text_fg = (1.0, 1.0, 1.0, 1),
                                     pos = (BG.GridXOffset, 0, 4*BG.CardImageScale[2]))
 
@@ -228,7 +229,7 @@
         self.nextGameTimer.reparentTo(self.nextGame)
         self.nextGameTimer.setPos(0, 0, -5*BG.CardImageScale[2])
         self.nextGameTimer.setProp('image', None)
-        self.nextGameTimer.setProp('text_font', ToontownGlobals.getSignFont())
+        self.nextGameTimer.setProp('text_font', ToontownGlobals.getBuildingNametagFont())
         self.nextGameTimer.setProp('text_scale', 0.2*BG.CardImageScale[2])
         self.nextGameTimer.setFontColor(Vec4(1.0, 1.0, 1.0, 1))
 
@@ -259,18 +260,18 @@
         # Create Timer
         self.loadGameTimer()
         self.loadNextGameTimer()
-        
+
         textScale = 0.06 #0.125*BG.CardImageScale[2]
         textHeight = 0.38*BG.CardImageScale[2]
 
         guiButton = loader.loadModelOnce("phase_3/models/gui/quit_button")
         self.bingo = DirectButton( parent = self,
-                                   pos = (BG.GridXOffset, 0, 0.305), 
+                                   pos = (BG.GridXOffset, 0, 0.305),
                                    scale = (0.0343, 0.035, 0.035),
                                    relief = None,
                                    state = DISABLED,
                                    geom = self.model.find("**/BINGObutton"),
-                                   geom_pos = (0, 0, 0), 
+                                   geom_pos = (0, 0, 0),
                                    geom_hpr = (0, 90, 0),
                                    image = (self.model.find("**/Gold_TTButtUP"),
                                             self.model.find("**/goldTTButtDown"),
@@ -292,7 +293,7 @@
                                       text="",
                                       text_scale = 0.045,
                                       text_fg = (1,1,1,1),
-                                      text_font = ToontownGlobals.getSignFont(),
+                                      text_font = ToontownGlobals.getBuildingNametagFont(),
                                       text_wordwrap = 10.5,
                                       text_pos = (0.01,0.008),
                                       pressEffect = False,
@@ -314,7 +315,7 @@
                                     text_scale = 0.0425,
                                     text_fg = (0, 0, 0, 1),
                                     #text_pos = (0, .30*iScale[1], 0),
-                                    text_font = ToontownGlobals.getInterfaceFont(),
+                                    text_font = ToontownGlobals.getSignFont(),
                                     text_wordwrap = 10.5,
                                     image = getDefaultDialogGeom(),
                                     image_scale = (iScale[0],0, iScale[1]))
@@ -324,12 +325,12 @@
                                    relief = None,
                                    state = NORMAL,
                                    text = '',
-                                   text_scale = (0.04),
+                                   text_scale = TTLocalizer.BCGjpText,
                                    text_pos = (0,0,0),
                                    text_fg = (1, 1, 1, 1),
                                    text_shadow = (0, 0, 0, 1),
-                                   text_font = ToontownGlobals.getInterfaceFont(),
-                                   text_wordwrap = 10.5)
+                                   text_font = ToontownGlobals.getSignFont(),
+                                   text_wordwrap = TTLocalizer.BCGjpTextWordwrap)
 
         self.gameOver = DirectLabel( parent = self,
                                      pos = (BG.GridXOffset, 0, 0),
@@ -338,7 +339,7 @@
                                      text = '',
                                      text_scale = textScale,
                                      text_fg = (1, 1, 1, 1),
-                                     text_font = ToontownGlobals.getSignFont())
+                                     text_font = ToontownGlobals.getBuildingNametagFont())
 
         #jpsign is parented to self.parent so we can place it behind the main card
         self.jpSign = DirectFrame( parent = self.parent,
@@ -360,7 +361,7 @@
         self.hideJackpot()
 
         self.makeTutorial()
-        
+
     #################################################################
     # Method: destroy
     # Purpose: This method cleans up the Card so that there are no
@@ -371,7 +372,7 @@
     #################################################################
     def destroy(self):
         self.cleanTutorial()
-        
+
         self.removeGame()
         del self.cellGuiList
 
@@ -380,7 +381,7 @@
         self.jpSign.destroy()
         self.nextGameTimer.destroy()
         self.nextGame.destroy()
-        self.timer.destroy()               
+        self.timer.destroy()
         self.bingo.destroy()
         self.gameType.destroy()
         DirectFrame.destroy(self)
@@ -413,7 +414,7 @@
     #          attempt.
     # Input: None
     # Output: None
-    #################################################################               
+    #################################################################
     def disableCard(self):
         self.stopCellBlinking()
         for index in xrange(self.game.getCardSize()):
@@ -426,7 +427,7 @@
     #          callback routine. The Free Cell is never enabled.
     # Input: callback - A callback routine to handle a button press.
     # Output: None
-    #################################################################              
+    #################################################################
     def enableCard(self, callback=None):
         self.notify.info("enable Bingo card")
         self.stopCellBlinking()
@@ -444,7 +445,7 @@
     #        zoneId - Needed to choose the appropriate fish for the
     #                 pond that the card instance is associated with.
     # Output: None
-    ################################################################# 
+    #################################################################
     def generateCard(self, tileSeed, zoneId):
         assert( self.game != None )
 
@@ -494,7 +495,7 @@
                 else:
                     choice = rng.randrange(0, len(fishList))
                     tmpFish = fishList.pop(choice)
- 
+
                 xPos = BG.CellImageScale * (j-2) + BG.GridXOffset
                 yPos = BG.CellImageScale * (i-2) - 0.015
                 cellGui = BingoCardCell.BingoCardCell(i*rowSize+j,
@@ -517,13 +518,13 @@
     #        Genus - Genus of the fish to check against.
     #        Species - Species of the fish to check against.
     # Output: None
-    ################################################################# 
+    #################################################################
     def cellUpdateCheck(self, id, genus, species):
         # For now, only check against genus. Perhaps
         # we shall move to species later if it is too easy.
-        fishTuple = (genus, species)       
+        fishTuple = (genus, species)
         if (self.cellGuiList[id].getFishGenus() == genus) or (fishTuple == FishGlobals.BingoBoot):
-            self.notify.debug("Square found!  Cell disabled: %s" % id) 
+            self.notify.debug("Square found!  Cell disabled: %s" % id)
             self.stopCellBlinking()
             self.cellGuiList[id].disable()
             self.game.setGameState( self.game.getGameState() | 1<<id )
@@ -537,10 +538,10 @@
     # Purpose: This method updates a particular cell. Essentially,
     #          it disables this cell so that a player can no longer
     #          click the button and generate further checks against
-    #          it. 
+    #          it.
     # Input: cellId - The Id of the Cell to update.
     # Output: None
-    ################################################################# 
+    #################################################################
     def cellUpdate(self, cellId):
         assert( 0 <= cellId < BG.CARD_SIZE )
         self.cellGuiList[cellId].disable()
@@ -549,7 +550,7 @@
     # Method: addGame
     # Input: game instance
     # Output: None
-    ################################################################# 
+    #################################################################
     def addGame(self, game):
         self.game = game
 
@@ -566,7 +567,7 @@
     #          is associated with the GUI instance.
     # Input: None
     # Output: returns the current bingo game
-    #################################################################   
+    #################################################################
     def getGame(self):
         return self.game
 
@@ -578,7 +579,7 @@
     #          will also occur the CardGui is destroyed.
     # Input: None
     # Output: None
-    #################################################################   
+    #################################################################
     def removeGame(self):
         self.stopCellBlinking()
         if self.game:
@@ -595,11 +596,11 @@
     # Method: getUnmarkedMatches
     # Purpose: returns a list of cells that match
     #          a particular fish
-    ################################################################# 
+    #################################################################
     def getUnmarkedMatches(self, fish):
         if self.game is None:
             return []
-        
+
         matches = []
         for cell in self.cellGuiList:
             if cell['state'] == NORMAL:
@@ -615,7 +616,7 @@
     #          patterns such as Diagonals or Four Corner, etc.
     # Input: id - the Cell Id to return this color
     # Output: returns specific color or base color of a cell
-    ################################################################# 
+    #################################################################
     def getCellColor(self, id):
         if self.game.checkForColor(id):
             return BG.CellColorActive
@@ -623,7 +624,7 @@
 
     #################################################################
     # Method: resetCellColors
-    ################################################################# 
+    #################################################################
     def resetCellColors(self):
         for cell in self.cellGuiList:
             c = self.getCellColor(cell.cellId)
@@ -632,7 +633,7 @@
 
     #################################################################
     # Method: stopCellBlinking
-    ################################################################# 
+    #################################################################
     def stopCellBlinking(self):
         self.hideTutorial()
         self.resetCellColors()
@@ -640,12 +641,12 @@
 
     #################################################################
     # Method: __inidicateMatches
-    ################################################################# 
+    #################################################################
     def __indicateMatches(self, bFlipFlop, fish):
         unmarkedMatches = self.getUnmarkedMatches(fish)
         if len(unmarkedMatches) is 0:
             return Task.done
-        
+
         if bFlipFlop:
             #mark the cells
             for cell in unmarkedMatches:
@@ -660,11 +661,11 @@
 
     #################################################################
     # Method: fishCaught
-    # Purpose: This method is called when a fish has been caught.  
+    # Purpose: This method is called when a fish has been caught.
     #          It then indicates which squares match.
     # Input: fish - the caught fish
     # Output: None
-    ################################################################# 
+    #################################################################
     def fishCaught(self, fish):
         self.stopCellBlinking()
         self.__indicateMatches(True, fish)
@@ -679,8 +680,8 @@
     # Output: Returns BG.WIN(2) or BG.NO_UPDATE(0)
     # Note: We may decide to DISABLE the button until there is a winner
     #       or more appropriately, make it flash a few times when
-    #       bingo is first detected. 
-    ################################################################# 
+    #       bingo is first detected.
+    #################################################################
     def setBingo(self, state=DISABLED, callback=None):
         self.notify.debug("setBingo: %s %s" % (state, callback))
         if self.bingo['state'] == state:
@@ -700,7 +701,7 @@
             c = BG.getButtonColor(self.game.getGameType())
             self.bingo['image_color'] = Vec4(c[0], c[1], c[2], c[3])
             self.hideJackpot()
-            
+
         self.bingo['state'] = state
         self.bingo['command'] = callback
 
@@ -710,18 +711,18 @@
     #          and returns if there was a win.
     # Input: None
     # Output: Returns BG.WIN(2) or BG.NO_UPDATE(0)
-    ################################################################# 
+    #################################################################
     def checkForBingo(self):
         return self.game.checkForBingo()
 
     #################################################################
     # Method: __inidicateBingo
-    ################################################################# 
+    #################################################################
     def __indicateBingo(self, bFlipFlop):
         if not self.game:
             #user has left, stop doing this task
             return Task.done
-        
+
         if bFlipFlop:
             gameType = self.game.getGameType()
             if gameType == BG.DIAGONAL_CARD:
@@ -753,14 +754,14 @@
         for light in self.jpLights:
             light.hide()
         taskMgr.remove("jackpotLightFlash")
-        
+
     def getLightName(self, lightIndex, bOn):
         lightIndex += 1
         if bOn == self.On:
             return "**/LightOn_0%02d" % lightIndex
         else:
             return "**/LightOff_0%02d" % lightIndex
-    
+
     def makeJackpotLights(self, parent):
         self.jpLights = []
         for nLight in range(self.NumLights):
@@ -817,13 +818,13 @@
 
             nTimeIndex = (nTimeIndex + 1) % 2
             delay = 0.2
-            
+
         taskMgr.doMethodLater(delay, self.flashJackpotLights, "jackpotLightFlash", extraArgs = (flashMode,nTimeIndex))
         return Task.done
-            
+
     #################################################################
     # stuff for the FishBingo tutorial
-    ################################################################# 
+    #################################################################
     def makeTutorial(self):
         self.tutorial = TTDialog.TTDialog(
             fadeScreen = 0,
@@ -849,8 +850,9 @@
         elif messageType == BG.TutorialMark:
             self.tutorial['text'] = TTLocalizer.FishBingoHelpFlash
         elif messageType == BG.TutorialCard:
-            gameType = self.game.getGameType()
-            self.tutorial['text'] = BG.getHelpString(gameType)
+            if self.game:
+                gameType = self.game.getGameType()
+                self.tutorial['text'] = BG.getHelpString(gameType)
         elif messageType == BG.TutorialBingo:
             self.tutorial['text'] = TTLocalizer.FishBingoHelpBingo
 
@@ -859,12 +861,12 @@
     def hideTutorial(self, event=None):
         if self.tutorial:
             self.tutorial.hide()
-        
+
     def onMouseEnter(self, event):
         """ the mouse has just entered this entity """
         if self.gameType['text'] is not "":
             self.showTutorial(BG.TutorialCard)
-        
+
     def onMouseLeave(self, event):
         """ the mouse has just left this entity """
         self.hideTutorial()
--- src/fishing/BingoManagerAI.py	30 Nov 2004 07:06:29 -0000	1.14
+++ src/fishing/BingoManagerAI.py	14 Jun 2006 07:47:07 -0000	1.19
@@ -49,8 +49,8 @@
 class BingoManagerAI(object):
 #    __metaclass__ = PythonUtil.Singleton
     notify = DirectNotifyGlobal.directNotify.newCategory("BingoManagerAI")
-    notify.setDebug(True)
-    notify.setInfo(True)
+    #notify.setDebug(True)
+    #notify.setInfo(True)
     serverDataFolder = simbase.config.GetString('server-data-folder', "")
 
     DefaultReward = { TTG.DonaldsDock: [BG.MIN_SUPER_JACKPOT, 1],
@@ -110,7 +110,7 @@
 
         # CHEATS
         #initState = 'Intermission'
-        for do in self.doId2do.values() :
+        for do in self.doId2do.values():
             do.startup(initState)
         self.waitForIntermission()
 
--- src/fishing/DistributedPondBingoManagerAI.py	4 Dec 2004 02:12:01 -0000	1.22
+++ src/fishing/DistributedPondBingoManagerAI.py	19 Jun 2008 03:12:13 -0000	1.22.4.1
@@ -40,7 +40,7 @@
 
 class DistributedPondBingoManagerAI(DistributedObjectAI.DistributedObjectAI, FSM.FSM):
     notify = DirectNotifyGlobal.directNotify.newCategory("DistributedPondBingoManagerAI")
-    notify.setDebug(True)
+    #notify.setDebug(True)
 
     # Class Dictionary used as a c-like switch
     TimeoutSwitch = { BG.NORMAL_GAME: 'WaitCountdown',
@@ -135,6 +135,7 @@
             self.air.bingoMgr.removePondBingoMgrAI(self.getDoId())
 
         FSM.FSM.cleanup(self)
+        self.__stopTimeout()
         DistributedObjectAI.DistributedObjectAI.delete(self)
 
 #################################################################
@@ -508,7 +509,9 @@
     # Output: None
     ############################################################
     def __handleDefaultTimeout(self, state):
-        self.request(state)
+        #check to make sure we haven't been deleted
+        if hasattr(self, "zoneId"):
+            self.request(state)
         return Task.done
 
     ############################################################
@@ -741,7 +744,7 @@
     def exitWaitCountdown(self):
         self.notify.debug("exitWaitCountdown: Exit WaitCountdown State in zone %s" % (self.zoneId))
         del self.timeStamp
-        self.timerTask = None
+        self.__stopTimeout()
 
     ################################################################# 
     # Method:  enterPlaying
@@ -800,7 +803,7 @@
     def exitPlaying(self):
         self.notify.debug("exitPlaying: Exit Playing State in zone %s" %(self.zoneId))
         del self.timeStamp
-        self.timerTask = None
+        self.__stopTimeout()
 
     ################################################################# 
     # Method:  enterReward
@@ -869,7 +872,7 @@
     def exitReward(self):
         self.notify.debug("exitReward: Exit Reward State in zone %s" %(self.zoneId))
         del self.timeStamp
-        self.timerTask = None
+        self.__stopTimeout()
 
     ################################################################# 
     # Method:  enterGameOver
@@ -928,7 +931,7 @@
     def exitGameOver(self):
         self.notify.debug("exitGameOver: Exit GameOver State in zone %s" %(self.zoneId))
         del self.timeStamp
-        self.timerTask = None
+        self.__stopTimeout()
 
     ################################################################# 
     # Method:  enterIntermission
@@ -975,7 +978,7 @@
     def exitIntermission(self):
         self.notify.debug("exitIntermission: Exit Intermission State in zone %s" %(self.zoneId))
         del self.timeStamp
-        self.timerTask = None
+        self.__stopTimeout()
 
     ################################################################# 
     # Method:  enterCloseEvent
@@ -1024,7 +1027,7 @@
     def exitCloseEvent(self):
         self.notify.debug("exitCloseEvent: Exit CloseEvent State in zone %s" %(self.zoneId))
         del self.timeStamp
-        self.timerTask = None
+        self.__stopTimeout()
 
     ################################################################# 
     # Method:  shutdown
@@ -1048,4 +1051,5 @@
     # Output: None
     #################################################################
     def resumeBingoNight(self):
+        self.__stopTimeout()
         self.request('WaitCountdown')
--- src/fishing/FishPanel.py	24 Jun 2004 21:17:11 -0000	1.26
+++ src/fishing/FishPanel.py	15 Jul 2005 18:59:14 -0000	1.26.6.2
@@ -39,7 +39,7 @@
         self.fish = fish
         self.parent = parent
         self.photo = None
-        
+
     def destroy(self):
         assert self.notify.debugStateCall(self)
         if self.photo:
@@ -111,13 +111,13 @@
                      buttons.find('**/CloseBtn_DN'),
                      buttons.find('**/CloseBtn_Rllvr')),
             image_scale = (0.6, 1, 0.6),
-            command = self.handleCancel,            
+            command = self.handleCancel,
             )
         buttons.removeNode()
         self.photo = FishPhoto.FishPhoto(parent=self)
         # make the scroll list
         self.update(self.fish)
-        
+
     def update(self, fish):
         assert self.notify.debugStateCall(self)
         self.fish = fish
@@ -151,14 +151,14 @@
         """
         assert len(bounds) == 4
         self.swimBounds=bounds
-        
+
     def setSwimColor(self, *colors):
         """
         colors are floats: red, green, blue, alpha
         """
         assert len(colors) == 4
         self.swimColor=colors
-        
+
     def handleCancel(self):
         assert self.notify.debugStateCall(self)
         self.hide()
@@ -176,11 +176,12 @@
         elif code == FishGlobals.FishItemNewEntry:
             self.extraLabel.show()
             self.extraLabel['text'] = TTLocalizer.FishingNewEntry
-            self.extraLabel['text_scale'] = 0.08
+            self.extraLabel['text_scale'] = TTLocalizer.FPnewEntry
             self.extraLabel.setPos(0,0,0.26)
         elif code == FishGlobals.FishItemNewRecord:
             self.extraLabel.show()
             self.extraLabel['text'] = TTLocalizer.FishingNewRecord
+            self.extraLabel['text_scale'] = TTLocalizer.FPnewRecord
 
         self.photo.show()
         DirectFrame.show(self)
--- src/fishing/FishSellGUI.py	22 Jul 2004 23:54:53 -0000	1.9
+++ src/fishing/FishSellGUI.py	16 Dec 2004 03:05:09 -0000	1.9.6.1
@@ -51,7 +51,7 @@
             image = cancelImageList,
             pos = (0.3, 0, -0.58),
             text = TTLocalizer.FishGuiCancel,
-            text_scale = 0.06,
+            text_scale = TTLocalizer.FSGcancelButton,
             text_pos = (0,-0.1),
             command = self.__cancel,
             )
@@ -61,7 +61,7 @@
             image = okImageList,
             pos = (0.6, 0, -0.58),
             text = TTLocalizer.FishGuiOk,
-            text_scale = 0.06,
+            text_scale = TTLocalizer.FSGokButton,
             text_pos = (0,-0.1),
             command = self.__sellFish,
             )
--- src/fishing/GenusPanel.py	8 Jun 2004 01:52:29 -0000	1.17
+++ src/fishing/GenusPanel.py	17 Nov 2005 21:56:50 -0000	1.17.6.1
@@ -17,7 +17,7 @@
         genus is an integer key into FishGlobals.__fishDict.
         itemIndex is an integer index into the item list (see optiondefs
             in FishBrowser).
-        
+
         Create a DirectFrame for displaying the genus and it's species
         """
         assert self.notify.debugStateCall(self)
@@ -26,7 +26,7 @@
         # The picture frame is in the wrong order, should be drawn first (at the back)
         albumGui.find("**/picture_frame").reparentTo(albumGui, -1)
         albumGui.find("**/arrows").removeNode()
-        
+
         optiondefs = (
             ('relief',                                    None, None),
             ('state',                                   NORMAL, None),
@@ -39,7 +39,7 @@
             ('text_pos',                         (-0.5, -0.34), None),
             ('text_font',   ToontownGlobals.getInterfaceFont(), None),
             ('text_wordwrap',                             13.5, None),
-            ('text_align',                      TextNode.ALeft, None),            
+            ('text_align',                      TextNode.ALeft, None),
             )
         # Merge keyword options with default options
         self.defineoptions({}, optiondefs)
@@ -62,7 +62,7 @@
     def load(self):
         assert self.notify.debugStateCall(self)
         pass
-        
+
     def setGenus(self, genus):
         assert self.notify.debugStateCall(self)
         if self.genus == genus:
@@ -95,7 +95,7 @@
                     pos = (0.06, 0, startPos - (species * offset)),
                     text = TTLocalizer.UnknownFish,
                     text_fg = (0.2,0.1,0.0,1),
-                    text_scale = 0.045,
+                    text_scale = TTLocalizer.GPgenus,
                     text_align = TextNode.ALeft,                    
                     text_font = ToontownGlobals.getInterfaceFont(),
                     )
--- src/friends/FriendInviter.py	18 Aug 2004 01:55:32 -0000	1.62
+++ src/friends/FriendInviter.py	17 Dec 2004 04:28:24 -0000	1.62.6.1
@@ -58,7 +58,7 @@
                              image_scale = (1.0, 1.0, 0.6),
                              text = '',
                              text_wordwrap = 13.5,
-                             text_scale = 0.06,
+                             text_scale = TTLocalizer.FIdialog,
                              text_pos = (0.0, 0.13),
                              )
 
@@ -193,7 +193,7 @@
                                            gui.find('**/Ignore_Btn_RLVR')),
                                   relief = None,
                                   text = OTPLocalizer.FriendInviterStopBeingFriends,
-                                  text_scale = 0.05,
+                                  text_scale = TTLocalizer.FIstopButton,
                                   text_pos = (0.25, -0.015),
                                   pos = (-0.2, 0.0, 0.05),
                                   command = self.__handleStop)
--- src/friends/FriendsListPanel.py	22 Oct 2004 22:46:21 -0000	1.61
+++ src/friends/FriendsListPanel.py	17 Nov 2006 03:43:22 -0000	1.61.6.2
@@ -209,7 +209,7 @@
                      auxGui.find("**/Frnds_Btn_RLVR"),
                      ),
             text = ("", TTLocalizer.FriendsListPanelNewFriend, TTLocalizer.FriendsListPanelNewFriend),
-            text_scale = 0.045,
+            text_scale = TTLocalizer.FLPnewFriend,
             text_fg = (0, 0, 0, 1),
             text_bg = (1, 1, 1, 1),
             text_pos = (0.1, -0.085),
@@ -220,19 +220,25 @@
         self.secrets = DirectButton(
             parent = self,
             relief = None,
-            pos = (0.152, 0.0, 0.14),
+            pos = TTLocalizer.FLPsecretsPos,
             image = (auxGui.find("**/ChtBx_ChtBtn_UP"),
                      auxGui.find("**/ChtBx_ChtBtn_DN"),
                      auxGui.find("**/ChtBx_ChtBtn_RLVR"),
                      ),
             text = ("", TTLocalizer.FriendsListPanelSecrets, TTLocalizer.FriendsListPanelSecrets),
-            text_scale = 0.045,
+            text_scale = TTLocalizer.FLPsecrets,
             text_fg = (0, 0, 0, 1),
             text_bg = (1, 1, 1, 1),
             text_pos = (-0.04, -0.085),
             textMayChange = 0,            
             command = self.__secrets,
             )
+        # hack: [french only] temporarily disallowed secrets-chat for french
+        if base.cr.productName == 'Wanadoo':
+            self.secrets.hide()
+            def noShow():
+                pass
+            self.secrets.show = noShow
 
         gui.removeNode()
         auxGui.removeNode()
@@ -230,7 +230,7 @@
             text_fg = (0, 0, 0, 1),
             text_bg = (1, 1, 1, 1),
             text_pos = (-0.04, -0.085),
-            textMayChange = 0,            
+            textMayChange = 0,
             command = self.__secrets,
             )
 
--- src/hood/Hood.py	25 Aug 2004 02:54:37 -0000	1.111
+++ src/hood/Hood.py	15 Jul 2005 18:59:26 -0000	1.111.6.1
@@ -33,7 +33,7 @@
 
         self.parentFSM = parentFSM
         self.dnaStore = dnaStore
-        
+
         # The event for safe zone loader or town loader done
         self.loaderDoneEvent = "loaderDone"
 
@@ -73,7 +73,7 @@
             fg = self.titleColor,
             font = getSignFont(),
             pos = (0,-0.5),
-            scale = 0.16,
+            scale = TTLocalizer.Hhoodtext_scale,
             drawOrder = 0,
             mayChange = 1,
             )
@@ -265,7 +265,7 @@
                 zoneId = requestStatus["zoneId"]
                 toPhrase = StreetNames[ZoneUtil.getCanonicalBranchZone(zoneId)][0]
                 streetName = StreetNames[ZoneUtil.getCanonicalBranchZone(zoneId)][-1]
-                loader.beginBulkLoad("hood", (TTLocalizer.HeadingToStreet % (toPhrase, streetName)),
+                loader.beginBulkLoad("hood", (TTLocalizer.HeadingToStreet % {'to':toPhrase, 'street':streetName}),
                                      townCountMap[self.id], 1, TTLocalizer.TIP_STREET)
             self.loadLoader(requestStatus)
             loader.endBulkLoad("hood")
--- src/launcher/Launcher.py	10 Dec 2004 09:43:49 -0000	1.221.2.3
+++ src/launcher/Launcher.py	18 Apr 2008 03:25:57 -0000	1.221.2.1.2.4
@@ -69,6 +69,19 @@
 
 LauncherPhases = [3,3.5,4,5,5.5,6,7,8,9]
 
+import platform
+WIN32 = (platform.system() == 'Windows')
+VISTA = (string.find(platform.platform(), 'Vista') != -1)
+
+if VISTA:
+    print 'Vista detected'
+#    import win32shell
+    # depend on Installer to precreate this directory
+#    logfilepath = win32shell.SHGetFolderPath(win32shell.CSIDL_LOCAL_APPDATA) + '\\Disney\\Disney Online\\'
+#else:
+#    logfilepath = ''
+logfilepath = ''
+
 # Setup the log files
 # We want C++ and Python to both go to the same log so they
 # will be interlaced properly.
@@ -102,7 +115,7 @@
 # property of seeking to the end of the output stream before actually
 # writing to the file. 'w' mode does not do this, so you will see Panda
 # output and Python output not interlaced properly.
-log = open(logfile, 'a')
+log = open(logfilepath + logfile, 'a')
 logOut = LogAndOutput(sys.__stdout__, log)
 logErr = LogAndOutput(sys.__stderr__, log)
 sys.stdout = logOut
@@ -125,6 +138,7 @@
 if os.environ.has_key("CONFIG_CONFIG"):
     print "CONFIG_CONFIG is set to: " + os.environ["CONFIG_CONFIG"]
     print "Resetting CONFIG_CONFIG"
+
 os.environ["CONFIG_CONFIG"] = ":_:configdir_.:configpath_:configname_Configrc.exe:configexe_1:configargs_-stdout " + Configrc_args
 
 import libdtoolconfig
@@ -142,9 +156,9 @@
 nout.addFile(Filename(logfile))
 nout.addStandardOutput()
 
-
 # For registry access
 import win32api
+
 # Import DIRECT files
 from direct.showbase.MessengerGlobal import *
 from direct.showbase.DirectObject import *
@@ -377,7 +391,7 @@
         tmpVal =  self.getRegistry(self.patchCDKey)
         if (tmpVal == None) :
             self.fromCD = 0
-        else :
+        else:
             self.fromCD = tmpVal
         self.notify.info('patch directory is ' + `self.fromCD`)
 
@@ -416,6 +430,9 @@
         # Patch files extension
         self.patchExtension = 'pch'
 
+        # scan for hack programs
+        self.scanForHacks()
+
         # Start downloading at this phase
         self.firstPhase = LauncherPhases[0]
         self.finalPhase = LauncherPhases[-1]
@@ -583,11 +600,11 @@
         # You can only set strings and integers in here
         t = type(value)
         if (t == types.IntType):
-            WindowsRegistry.setIntValue(self.toontownRegistryKey, name, value)
+            WindowsRegistry.setIntValue(self.toontownRegistryKey, name, value, WindowsRegistry.RlUser)
 
         elif (t == types.StringType):
             WindowsRegistry.setStringValue(self.toontownRegistryKey, name,
-                                           value)
+                                           value, WindowsRegistry.RlUser)
         else:
             self.notify.warning("setRegistry: Invalid type for registry value: "
                                 + `value`)
@@ -595,17 +612,17 @@
     def getRegistry(self, name, missingValue = None):
         # Return the value of this key.
 
-        t = WindowsRegistry.getKeyType(self.toontownRegistryKey, name)
+        t = WindowsRegistry.getKeyType(self.toontownRegistryKey, name, WindowsRegistry.RlUser)
         if (t == WindowsRegistry.TInt):
             if (missingValue == None):
                 missingValue = 0
             return WindowsRegistry.getIntValue(self.toontownRegistryKey, name,
-                                               missingValue)
+                                               missingValue, WindowsRegistry.RlUser)
         elif (t == WindowsRegistry.TString):
             if (missingValue == None):
                 missingValue = ""
             return WindowsRegistry.getStringValue(self.toontownRegistryKey, name,
-                                                  missingValue)
+                                                  missingValue, WindowsRegistry.RlUser)
         else:
             return missingValue
 
@@ -2454,6 +2424,10 @@
         self.httpChannel.setMaxBytesPerSecond(self.getBandwidth())
 
     def MakeNTFSFilesGlobalWriteable(self, pathToSet = None ):
+        if not WIN32:
+            return
+        import win32api
+
         if(pathToSet == None):
             pathToSet = self.getInstallDir()
         else:
@@ -2486,6 +2460,113 @@
         del self.httpChannel
         del self.http
 
+    #
+    # scan for known speed hacks
+    #
+    def scanForHacks(self):
+        if not WIN32:
+            return
+        import _winreg
+        hacksInstalled = {}
+        hacksRunning = {}
+        hackName = [
+            '!xSpeed.net',
+            'A Speeder',
+            'Speed Gear',
+            ]
+
+        # scan for registry entries
+        #
+        knownHacksRegistryKeys = {
+          hackName[0]:[
+            [_winreg.HKEY_LOCAL_MACHINE,'Software\\Microsoft\\Windows\\CurrentVersion\\Run\\!xSpeed'],
+            [_winreg.HKEY_CURRENT_USER,'Software\\!xSpeednethy'],
+            [_winreg.HKEY_CURRENT_USER,'Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\MenuOrder\\Start Menu\\Programs\\!xSpeednet'],
+            [_winreg.HKEY_LOCAL_MACHINE,'Software\\Gentee\\Paths\\!xSpeednet'],
+            [_winreg.HKEY_LOCAL_MACHINE,'Software\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\!xSpeed.net 2.0'],
+          ],
+          hackName[1]:[
+            [_winreg.HKEY_CURRENT_USER,'Software\\aspeeder'],
+            [_winreg.HKEY_LOCAL_MACHINE,'Software\\aspeeder'],
+            [_winreg.HKEY_LOCAL_MACHINE,'Software\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\aspeeder'],
+          ],
+        }
+        try:
+            for prog in knownHacksRegistryKeys.keys():
+                for key in knownHacksRegistryKeys[prog]:
+                    try:
+                        h = _winreg.OpenKey(key[0], key[1])
+                        #print 'found %s in registry %s' % (prog,key[1])
+                        hacksInstalled[prog] = 1
+                        _winreg.CloseKey(h)
+                        break                       # next program when any registry entry found
+                    except:
+                        pass
+        except:
+            pass
+
+        # Fallback #1
+        # scan MUICache
+        # not using libpandaexpress because it doesn't allow enumeration
+        #
+        knownHacksMUI = {
+          '!xspeednet': hackName[0],
+          'aspeeder': hackName[1],
+          'speed gear': hackName[2],
+        }
+        i = 0
+        try:
+            rh = _winreg.OpenKey(_winreg.HKEY_CURRENT_USER, 'Software\\Microsoft\\Windows\\ShellNoRoam\\MUICache')
+            while 1:
+                name,value,type = _winreg.EnumValue(rh, i)
+                i += 1
+                if type == 1:
+                    val = value.lower()
+                    for hackprog in knownHacksMUI:
+                        if val.find(hackprog) != -1:
+                            #print "found %s in MUICache:%s" % (knownHacksMUI[hackprog], val.encode('utf-8'))
+                            hacksInstalled[knownHacksMUI[hackprog]] = 1
+                            break
+            _winreg.CloseKey(rh)
+        except:
+            #print "%s: stopped at %d" % (sys.exc_info()[0], i)
+            pass
+
+        # Fallback #2
+        # scan for running hack processes
+        #
+        try:
+            # process access
+            import toontown.launcher.procapi
+        except:
+            pass
+        else:
+            knownHacksExe = {
+              '!xspeednet.exe': hackName[0],
+              'aspeeder.exe': hackName[1],
+              'speedgear.exe': hackName[2],
+            }
+            try:
+                for p in procapi.getProcessList():
+                    pname = p.name
+                    if knownHacksExe.has_key(pname):
+                        hacksRunning[knownHacksExe[pname]] = 1
+            except:
+                pass
+
+        if len(hacksInstalled) > 0:
+            self.notify.info('Third party programs installed:')
+            for hack in hacksInstalled.keys():
+                self.notify.info(hack)
+
+        if len(hacksRunning) > 0:
+            self.notify.info('Third party programs running:')
+            for hack in hacksRunning.keys():
+                self.notify.info(hack)
+            # quit out because 3rd party program hack detected and is running
+            self.setPandaErrorCode(8)
+            sys.exit()
+
 #============================================================
 #  Launcher startup
 #============================================================
--- src/launcher/TTuninst.wse	22 Nov 2002 00:29:14 -0000	1.6
+++ src/launcher/TTuninst.wse	10 Jul 2008 22:25:55 -0000	1.6.46.4
@@ -413,6 +413,48 @@
 item: Remark
 end
 item: Remark
+  Text=Override Japanese Unwise. The UNWISE_japanese.INI must be checked out to src/launcher directory.
+end
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=japanese
+end
+item: Compiler Variable If
+  Value=UNWISE_japanese.INI
+  Flags=00000011
+end
+item: Install File
+  Source=UNWISE_japanese.INI
+  Destination=%UNINSTALL_LANG%
+  Flags=0000000000000010
+end
+item: Compiler Variable End
+end
+item: Compiler Variable End
+end
+item: Remark
+  Text=Override Portuguese Unwise. The UNWISE_portuguese.INI must be checked out to src/launcher directory.
+end
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=portuguese
+end
+item: Compiler Variable If
+  Value=UNWISE_portuguese.INI
+  Flags=00000011
+end
+item: Install File
+  Source=UNWISE_portuguese.INI
+  Destination=%UNINSTALL_LANG%
+  Flags=0000000000000010
+end
+item: Compiler Variable End
+end
+item: Compiler Variable End
+end
+item: Remark
+end
+item: Remark
   Text=Add/Remove Programs stuff can only be changed by Admin on NT
 end
 item: Check Configuration
@@ -471,7 +513,7 @@
   end
   item: Key
     Key=Software\Microsoft\Windows\CurrentVersion\Uninstall\%APPTITLE%
-    New Value=http://www.toontown.com
+    New Value=http://toontown.terra.com.br
     New Value=
     Value Name=URLInfoAbout
     Root=2
@@ -485,7 +527,7 @@
   end
   item: Key
     Key=Software\Microsoft\Windows\CurrentVersion\Uninstall\%APPTITLE%
-    New Value=http://www.toontown.com
+    New Value=http://toontown.terra.com.br
     Value Name=HelpLink
     Root=2
   end
--- src/launcher/launcher.wse	16 Nov 2004 06:31:59 -0000	1.64
+++ src/launcher/launcher.wse	3 Jun 2008 01:20:54 -0000	1.64.4.36
@@ -2,8 +2,13 @@
 item: Global
   Version=9.0
   Title=Disney's Toontown Online Installation
+  Title French=Disneys Toontown Online Installation
+  Title German=Disneys Toontown Online Installation
+  Title Portuguese=Disney Toontown Online Installation
+  Title Spanish=Disney's Toontown Online Installation
+  Title Japanese=gD[^EEIC CXg[
   Flags=00010100
-  Languages=65 0 0 0 0 0 66 0 0 0 0 0 0 0 0 0
+  Languages=64 0 0 0 64 65 64 0 0 0 0 0 0 0 0 64
   Copy Default=1
   Japanese Font Name=MS Gothic
   Japanese Font Size=9
@@ -27,9 +32,9 @@
   FTP Cluster Size=20
   Per-User Version ID=1
   Dialogs Version=7
-  Version Description=Toontown Online
-  Version Copyright=2002
-  Version Company=Disney
+  Version Description=Disney's Toontown Online
+  Version Copyright=2002-2008
+  Version Company=Walt Disney Co.
   Crystal Format=10111100101100000010001001001001
   Crystal Destination=00000000000000000000000000001011
   Distribute Path=J:\
@@ -55,7 +60,7 @@
   Variable Name8=_USE_TESTSERVER_
   Variable Default8=0
   Variable Name9=_LANGUAGE_
-  Variable Default9=english
+  Variable Default9=portuguese
 end
 item: Open/Close INSTALL.LOG
   Flags=00000001
@@ -79,6 +84,7 @@
 end
 item: Set Variable
   Variable=MAINDIR
+  Value=C:\Program Files\Disney\Disney Online\Toontown
   Flags=10000000
 end
 item: Remark
@@ -120,7 +126,17 @@
 end
 item: Display Message
   Title=Test/Release Mismatch
+  Title French=Test/Release Mismatch
+  Title German=Test/Release Mismatch
+  Title Portuguese=Test/Release Mismatch
+  Title Spanish=Test/Release Mismatch
+  Title Japanese=Test/Release Mismatch
   Text=ERROR:  A TestServer InstallLauncher.exe is not being run inside a TestServer ActiveX installer environment!!
+  Text French=ERROR:  A TestServer InstallLauncher.exe is not being run inside a TestServer ActiveX installer environment!!
+  Text German=ERROR:  A TestServer InstallLauncher.exe is not being run inside a TestServer ActiveX installer environment!!
+  Text Portuguese=ERROR:  A TestServer InstallLauncher.exe is not being run inside a TestServer ActiveX installer environment!!
+  Text Spanish=ERROR:  A TestServer InstallLauncher.exe is not being run inside a TestServer ActiveX installer environment!!
+  Text Japanese=ERROR:  A TestServer InstallLauncher.exe is not being run inside a TestServer ActiveX installer environment!!
   Flags=00101000
 end
 item: Exit Installation
@@ -143,7 +159,7 @@
   Variable=MAINDIR
   Key=SOFTWARE\Disney\Disney Online\ToontownTest
   Value Name=INSTALL_DIR
-  Flags=00000100
+  Flags=00000010
 end
 item: Compiler Variable Else
 end
@@ -154,7 +170,17 @@
 end
 item: Display Message
   Title=Test/Release Mismatch
+  Title French=Test/Release Mismatch
+  Title German=Test/Release Mismatch
+  Title Portuguese=Test/Release Mismatch
+  Title Spanish=Test/Release Mismatch
+  Title Japanese=Test/Release Mismatch
   Text=ERROR:  A Release Server InstallLauncher.exe is not being run inside a Release Server ActiveX installer environment!!
+  Text French=ERROR:  A Release Server InstallLauncher.exe is not being run inside a Release Server ActiveX installer environment!!
+  Text German=ERROR:  A Release Server InstallLauncher.exe is not being run inside a Release Server ActiveX installer environment!!
+  Text Portuguese=ERROR:  A Release Server InstallLauncher.exe is not being run inside a Release Server ActiveX installer environment!!
+  Text Spanish=ERROR:  A Release Server InstallLauncher.exe is not being run inside a Release Server ActiveX installer environment!!
+  Text Japanese=ERROR:  A Release Server InstallLauncher.exe is not being run inside a Release Server ActiveX installer environment!!
   Flags=00101000
 end
 item: Exit Installation
@@ -171,37 +197,178 @@
   Variable=MAINDIR
   Key=SOFTWARE\Disney\Disney Online\Toontown
   Value Name=INSTALL_DIR
-  Flags=00000100
+  Flags=00000010
+end
+item: Remark
+  Text=Override APPTITLE if necessary for International
+end
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=castillian
+end
+item: Set Variable
+  Variable=APPTITLE
+  Value=Disney's Toontown Online ES
+  Flags=10000000
+end
+item: Get Registry Key Value
+  Variable=MAINDIR
+  Key=SOFTWARE\Disney\Disney Online\Toontown_ES
+  Value Name=INSTALL_DIR
+  Flags=00000010
 end
 item: Compiler Variable End
 end
-item: If/While Statement
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=japanese
+end
+item: Set Variable
+  Variable=APPTITLE
+  Value=gD[^EEIC
+  Flags=10000000
+end
+item: Get Registry Key Value
   Variable=MAINDIR
+  Key=SOFTWARE\Disney\Disney Online\Toontown_JP
+  Value Name=INSTALL_DIR
+  Flags=00000010
+end
+item: Compiler Variable End
 end
 item: Compiler Variable If
-  Variable=_USE_TESTSERVER_
-  Value=1
+  Variable=_LANGUAGE_
+  Value=german
+end
+item: Set Variable
+  Variable=APPTITLE
+  Value=Disneys Toontown Online DE
+  Flags=10000000
+end
+item: Get Registry Key Value
+  Variable=MAINDIR
+  Key=SOFTWARE\Disney\Disney Online\Toontown_DE
+  Value Name=INSTALL_DIR
+  Flags=00000010
+end
+item: Compiler Variable End
+end
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=portuguese
+end
+item: Set Variable
+  Variable=APPTITLE
+  Value=Disney Toontown Online BR
+  Flags=10000000
+end
+item: Get Registry Key Value
+  Variable=MAINDIR
+  Key=SOFTWARE\Disney\Disney Online\Toontown_BR
+  Value Name=INSTALL_DIR
+  Flags=00000010
+end
+item: Compiler Variable End
+end
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=french
+end
+item: Set Variable
+  Variable=APPTITLE
+  Value=Disney's Toontown Online FR
+  Flags=10000000
+end
+item: Get Registry Key Value
+  Variable=MAINDIR
+  Key=SOFTWARE\Disney\Disney Online\Toontown_FR
+  Value Name=INSTALL_DIR
+  Flags=00000010
+end
+item: Compiler Variable End
+end
+item: If/While Statement
+  Variable=MAINDIR
 end
 item: Display Message
   Title=No INSTALL_DIR
+  Title French=No INSTALL_DIR
+  Title German=No INSTALL_DIR
+  Title Portuguese=No INSTALL_DIR
+  Title Spanish=No INSTALL_DIR
+  Title Japanese=No INSTALL_DIR
   Text=ERROR: There is no INSTALL_DIR value set in the registry.  Using default value of C:\Program Files\Disney\Disney Online\ToontownTest.  This InstallLauncher.exe was built for the TEST Server.
+  Text French=ERROR: There is no INSTALL_DIR value set in the registry.  Using default value of C:\Program Files\Disney\Disney Online\ToontownTest.  This InstallLauncher.exe was built for the TEST Server.
+  Text German=ERROR: There is no INSTALL_DIR value set in the registry.  Using default value of C:\Program Files\Disney\Disney Online\ToontownTest.  This InstallLauncher.exe was built for the TEST Server.
+  Text Portuguese=ERROR: There is no INSTALL_DIR value set in the registry.  Using default value of C:\Program Files\Disney\Disney Online\ToontownTest.  This InstallLauncher.exe was built for the TEST Server.
+  Text Spanish=ERROR: There is no INSTALL_DIR value set in the registry.  Using default value of C:\Program Files\Disney\Disney Online\ToontownTest.  This InstallLauncher.exe was built for the TEST Server.
+  Text Japanese=ERROR: There is no INSTALL_DIR value set in the registry.  Using default value of C:\Program Files\Disney\Disney Online\ToontownTest.  This InstallLauncher.exe was built for the TEST Server.
   Flags=00101000
 end
+item: Compiler Variable If
+  Variable=_USE_TESTSERVER_
+  Value=1
+end
 item: Set Variable
   Variable=MAINDIR
   Value=C:\Program Files\Disney\Disney Online\ToontownTest
 end
 item: Compiler Variable Else
 end
-item: Display Message
-  Title=No INSTALL_DIR
-  Text=ERROR: There is no INSTALL_DIR value set in the registry.  Using default value of C:\Program Files\Disney\Disney Online\Toontown.   This InstallLauncher.exe was built for the RELEASE Server.
-  Flags=00101000
-end
 item: Set Variable
   Variable=MAINDIR
   Value=C:\Program Files\Disney\Disney Online\Toontown
 end
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=castillian
+end
+item: Set Variable
+  Variable=MAINDIR
+  Value=C:\Program Files\Disney\Disney Online\Toontown_ES
+end
+item: Compiler Variable End
+end
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=japanese
+end
+item: Set Variable
+  Variable=MAINDIR
+  Value=C:\Program Files\Disney\Disney Online\Toontown_JP
+end
+item: Compiler Variable End
+end
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=german
+end
+item: Set Variable
+  Variable=MAINDIR
+  Value=C:\Program Files\Disney\Disney Online\Toontown_DE
+end
+item: Compiler Variable End
+end
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=portuguese
+end
+item: Set Variable
+  Variable=MAINDIR
+  Value=C:\Program Files\Disney\Disney Online\Toontown_BR
+end
+item: Compiler Variable End
+end
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=french
+end
+item: Set Variable
+  Variable=MAINDIR
+  Value=C:\Program Files\Disney\Disney Online\Toontown_FR
+end
+item: Compiler Variable End
+end
 item: Compiler Variable End
 end
 item: End Block
@@ -367,7 +534,17 @@
 end
 item: Display Message
   Title=Panda In Use
+  Title French=Panda In Use
+  Title German=Panda In Use
+  Title Portuguese=Panda In Use
+  Title Spanish=Panda In Use
+  Title Japanese=Panda In Use
   Text=Toontown is currently running on your computer, which is preventing the installer from updating Toontown files.  Please exit Toontown before running the Toontown installer again.
+  Text French=Toontown is currently running on your computer, which is preventing the installer from updating Toontown files.  Please exit Toontown before running the Toontown installer again.
+  Text German=Toontown is currently running on your computer, which is preventing the installer from updating Toontown files.  Please exit Toontown before running the Toontown installer again.
+  Text Portuguese=Toontown is currently running on your computer, which is preventing the installer from updating Toontown files.  Please exit Toontown before running the Toontown installer again.
+  Text Spanish=Toontown is currently running on your computer, which is preventing the installer from updating Toontown files.  Please exit Toontown before running the Toontown installer again.
+  Text Japanese=Toontown is currently running on your computer, which is preventing the installer from updating Toontown files.  Please exit Toontown before running the Toontown installer again.
   Flags=00001000
 end
 item: Exit Installation
@@ -479,6 +656,35 @@
 end
 item: Compiler Variable End
 end
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=german
+end
+item: Remark
+  Text=Force to Deutsch
+end
+item: Set Variable
+  Variable=LANG
+  Value=%_LANG_E_NAME_%
+end
+item: Compiler Variable End
+end
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=french
+end
+item: Remark
+  Text=Force to French
+end
+item: Set Variable
+  Variable=LANG
+  Value=%_LANG_D_NAME_%
+end
+item: Compiler Variable End
+end
+item: Remark
+  Text=*** Do not Force to Japanese and Portuguese ***
+end
 item: Remark
   Text=Begin writing to the INSTALL.LOG 
 end
@@ -578,11 +784,15 @@
   Key=Software\Disney\Disney Online\ToontownTest
   New Value=1
   Value Name=LAUNCHER_EXTRACTED
-  Root=2
+  Root=1
   Data Type=3
 end
 item: Compiler Variable Else
 end
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=english
+end
 item: Set Variable
   Variable=STARTMENU_URL
   Value=http://play.toontown.com/red/shortcut_play.php
@@ -635,90 +845,628 @@
   Key=Software\Disney\Disney Online\Toontown
   New Value=1
   Value Name=LAUNCHER_EXTRACTED
-  Root=2
+  Root=1
   Data Type=3
 end
 item: Compiler Variable End
 end
 item: Remark
-  Text=Uninstall the plugin log file
+  Text=International version.
 end
-remarked item: Remark
-  Text=Netscape uninstall. Ask the registry for the netscape directory
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=castillian
 end
-remarked item: Get Registry Key Value
-  Variable=NETSCAPE_DIR
-  Key=SOFTWARE\Disney\Disney Online\Toontown
-  Default="not installed"
-  Value Name=NETSCAPE_DIR
-  Flags=00000100
+item: Set Variable
+  Variable=STARTMENU_URL
+  Value=http://toontown.es/
 end
-remarked item: Remark
-  Text=If Wise cannot find the NETSCAPE_DIR registry entry, it returns a default value of "not installed", which will just give harmless errors on deletion
+item: Set Variable
+  Variable=DESKTOP_URL
+  Value=http://toontown.es/
 end
-remarked item: If/While Statement
-  Variable=NETSCAPE_DIR
-  Value="not installed"
-  Flags=00000001
+item: Set Variable
+  Variable=TTINST_LOGNAME
+  Value=ToontownInstaller*.log
 end
-remarked item: End Block
+item: Set Variable
+  Variable=TT_URL
+  Value=Toontown.url
 end
-item: Remark
+item: Set Variable
+  Variable=PLAY_TT_URL
+  Value=PlayToontown.url
 end
-item: Remark
-  Text=Get the path to internet explorer from the registry
+item: Set Variable
+  Variable=PLAYTT_LINKNAME
+  Value=Juega Toontown.lnk
 end
-item: Get Registry Key Value
-  Variable=IEPATH
-  Key=SOFTWARE\Microsoft\IE4\Setup
-  Value Name=Path
-  Flags=00010100
+item: Set Variable
+  Variable=TOONTOWN_REGKEY
+  Value=Toontown_ES
 end
-item: Remark
-  Text=Add start menu shortcuts to web and uninstall
+item: Set Variable
+  Variable=ACTIVEX_UNINSTALL_ARG
+  Value=-uninstall_activex
+end
+item: Set Variable
+  Variable=TEST_SERVER_STR
+  Value= ES
+end
+item: Edit Registry
+  Total Keys=1
+  Key=Software\Disney\Disney Online\Toontown_ES
+  New Value=1
+  Value Name=LAUNCHER_EXTRACTED
+  Root=1
+  Data Type=3
+end
+item: Compiler Variable End
 end
 item: Compiler Variable If
   Variable=_LANGUAGE_
-  Value=english
+  Value=japanese
 end
-item: Get Registry Key Value
-  Variable=PROGRAMS
-  Key=SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders\
-  Value Name=Programs
-  Flags=00000010
+item: Set Variable
+  Variable=STARTMENU_URL
+  Value=http://toontown.disney.co.jp/
 end
-item: Get Registry Key Value
-  Variable=DESKTOPDIR
-  Key=Software\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders
-  Default=%WIN%\Desktop
-  Value Name=Desktop
-  Flags=00000010
+item: Set Variable
+  Variable=DESKTOP_URL
+  Value=http://toontown.disney.co.jp/
 end
 item: Set Variable
-  Variable=PROG_GROUP_NAME
-  Value=%PROGRAMS%\Disney's Toontown Online%TEST_SERVER_STR%
+  Variable=TTINST_LOGNAME
+  Value=ToontownInstaller*.log
 end
-item: Create Shortcut
-  Source=%IEPATH%\IEXPLORE.EXE
-  Destination=%PROG_GROUP_NAME%\%PLAYTT_LINKNAME%
-  Command Options=%STARTMENU_URL%
-  Icon Number=0
-  Icon Pathname=%MAINDIR%\toontown.ico
-  Key Type=1536
-  Flags=00000001
+item: Set Variable
+  Variable=TT_URL
+  Value=gD[^E.url
 end
-item: Create Shortcut
-  Source=%MAINDIR%\unwise.exe
-  Destination=%PROG_GROUP_NAME%\Uninstall.lnk
-  Icon Number=0
-  Key Type=1536
-  Flags=00000001
+item: Set Variable
+  Variable=PLAY_TT_URL
+  Value=vCgD[^E.url
 end
-item: Remark
-  Text=Add desktop icon to web page
+item: Set Variable
+  Variable=PLAYTT_LINKNAME
+  Value=gD[^EV.lnk
 end
-item: Create Shortcut
-  Source=%IEPATH%\IEXPLORE.EXE
+item: Set Variable
+  Variable=TOONTOWN_REGKEY
+  Value=Toontown_JP
+end
+item: Set Variable
+  Variable=ACTIVEX_UNINSTALL_ARG
+  Value=-uninstall_activex
+end
+item: Set Variable
+  Variable=TEST_SERVER_STR
+end
+item: Edit Registry
+  Total Keys=1
+  Key=Software\Disney\Disney Online\Toontown_JP
+  New Value=1
+  Value Name=LAUNCHER_EXTRACTED
+  Root=1
+  Data Type=3
+end
+item: Compiler Variable End
+end
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=german
+end
+item: Set Variable
+  Variable=STARTMENU_URL
+  Value=http://iplay.german.toontown.com/red/shortcut_play.php 
+end
+item: Set Variable
+  Variable=DESKTOP_URL
+  Value=http://iplay.german.toontown.com/red/shortcut_desktop.php
+end
+item: Set Variable
+  Variable=TTINST_LOGNAME
+  Value=ToontownInstaller*.log
+end
+item: Set Variable
+  Variable=TT_URL
+  Value=Toontown.url
+end
+item: Set Variable
+  Variable=PLAY_TT_URL
+  Value=SpieleToontown.url
+end
+item: Set Variable
+  Variable=PLAYTT_LINKNAME
+  Value=Spiele Toontown.lnk
+end
+item: Set Variable
+  Variable=TOONTOWN_REGKEY
+  Value=Toontown_DE
+end
+item: Set Variable
+  Variable=ACTIVEX_UNINSTALL_ARG
+  Value=-uninstall_activex
+end
+item: Set Variable
+  Variable=TEST_SERVER_STR
+end
+item: Edit Registry
+  Total Keys=1
+  Key=Software\Disney\Disney Online\Toontown_DE
+  New Value=1
+  Value Name=LAUNCHER_EXTRACTED
+  Root=1
+  Data Type=3
+end
+item: Compiler Variable End
+end
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=portuguese
+end
+item: Set Variable
+  Variable=STARTMENU_URL
+  Value=http://iplay.br.toontown.com/red/shortcut_play.php 
+end
+item: Set Variable
+  Variable=DESKTOP_URL
+  Value=http://iplay.br.toontown.com/red/shortcut_desktop.php
+end
+item: Set Variable
+  Variable=TTINST_LOGNAME
+  Value=ToontownInstaller*.log
+end
+item: Set Variable
+  Variable=TT_URL
+  Value=Toontown.url
+end
+item: Set Variable
+  Variable=PLAY_TT_URL
+  Value=JogoToontown.url
+end
+item: Set Variable
+  Variable=PLAYTT_LINKNAME
+  Value=Jogo Toontown.lnk
+end
+item: Set Variable
+  Variable=TOONTOWN_REGKEY
+  Value=Toontown_BR
+end
+item: Set Variable
+  Variable=ACTIVEX_UNINSTALL_ARG
+  Value=-uninstall_activex
+end
+item: Set Variable
+  Variable=TEST_SERVER_STR
+end
+item: Edit Registry
+  Total Keys=1
+  Key=Software\Disney\Disney Online\Toontown_BR
+  New Value=1
+  Value Name=LAUNCHER_EXTRACTED
+  Root=1
+  Data Type=3
+end
+item: Compiler Variable End
+end
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=french
+end
+item: Set Variable
+  Variable=STARTMENU_URL
+  Value=http://iplay.french.toontown.com/red/shortcut_play.php 
+end
+item: Set Variable
+  Variable=DESKTOP_URL
+  Value=http://iplay.french.toontown.com/red/shortcut_desktop.php
+end
+item: Set Variable
+  Variable=TTINST_LOGNAME
+  Value=ToontownInstaller*.log
+end
+item: Set Variable
+  Variable=TT_URL
+  Value=Toontown.url
+end
+item: Set Variable
+  Variable=PLAY_TT_URL
+  Value=Play Toontown.url
+end
+item: Set Variable
+  Variable=PLAYTT_LINKNAME
+  Value=Jeu Toontown.lnk
+end
+item: Set Variable
+  Variable=TOONTOWN_REGKEY
+  Value=Toontown_FR
+end
+item: Set Variable
+  Variable=ACTIVEX_UNINSTALL_ARG
+  Value=-uninstall_activex
+end
+item: Set Variable
+  Variable=TEST_SERVER_STR
+end
+item: Remark
+  Text=set LAUNCHER_EXTRACTED to 1
+end
+item: Edit Registry
+  Total Keys=1
+  Key=Software\Disney\Disney Online\Toontown_FR
+  New Value=1
+  Value Name=LAUNCHER_EXTRACTED
+  Root=1
+  Data Type=3
+end
+item: Compiler Variable End
+end
+item: Compiler Variable End
+end
+item: Remark
+  Text=Uninstall the plugin log file
+end
+remarked item: Remark
+  Text=Netscape uninstall. Ask the registry for the netscape directory
+end
+remarked item: Get Registry Key Value
+  Variable=NETSCAPE_DIR
+  Key=SOFTWARE\Disney\Disney Online\Toontown
+  Default="not installed"
+  Value Name=NETSCAPE_DIR
+  Flags=00000010
+end
+remarked item: Remark
+  Text=If Wise cannot find the NETSCAPE_DIR registry entry, it returns a default value of "not installed", which will just give harmless errors on deletion
+end
+remarked item: If/While Statement
+  Variable=NETSCAPE_DIR
+  Value="not installed"
+  Flags=00000001
+end
+remarked item: End Block
+end
+item: Remark
+end
+item: Remark
+  Text=Get the path to internet explorer from the registry
+end
+item: Get Registry Key Value
+  Variable=IEPATH
+  Key=SOFTWARE\Microsoft\IE4\Setup
+  Default=C:\Program Files\Internet Explorer
+  Value Name=Path
+  Flags=00010100
+end
+item: Remark
+  Text=Add start menu shortcuts to web and uninstall
+end
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=english
+end
+item: Get Registry Key Value
+  Variable=PROGRAMS
+  Key=SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders\
+  Value Name=Programs
+  Flags=00000010
+end
+item: Get Registry Key Value
+  Variable=DESKTOPDIR
+  Key=Software\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders
+  Default=%WIN%\Desktop
+  Value Name=Desktop
+  Flags=00000010
+end
+item: Set Variable
+  Variable=PROG_GROUP_NAME
+  Value=%PROGRAMS%\Disney's Toontown Online%TEST_SERVER_STR%
+end
+item: Create Shortcut
+  Source=%IEPATH%\IEXPLORE.EXE
+  Destination=%PROG_GROUP_NAME%\%PLAYTT_LINKNAME%
+  Command Options=%STARTMENU_URL%
+  Icon Number=0
+  Icon Pathname=%MAINDIR%\toontown.ico
+  Key Type=1536
+  Flags=00000001
+end
+item: Create Shortcut
+  Source=%MAINDIR%\unwise.exe
+  Destination=%PROG_GROUP_NAME%\Uninstall.lnk
+  Icon Number=0
+  Key Type=1536
+  Flags=00000001
+end
+item: Remark
+  Text=Add desktop icon to web page
+end
+item: Create Shortcut
+  Source=%IEPATH%\IEXPLORE.EXE
+  Destination=%DESKTOPDIR%\Disney's Toontown Online%TEST_SERVER_STR%.lnk
+  Command Options=%DESKTOP_URL%
+  Icon Number=0
+  Icon Pathname=%MAINDIR%\toontown.ico
+  Key Type=1536
+  Flags=00000001
+end
+item: Compiler Variable End
+end
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=castillian
+end
+item: Get Registry Key Value
+  Variable=PROGRAMS
+  Key=SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders\
+  Value Name=Programs
+  Flags=00000010
+end
+item: Get Registry Key Value
+  Variable=DESKTOPDIR
+  Key=Software\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders
+  Default=%WIN%\Desktop
+  Value Name=Desktop
+  Flags=00000010
+end
+item: Set Variable
+  Variable=PROG_GROUP_NAME
+  Value=%PROGRAMS%\%APPTITLE%
+end
+item: Add Text to INSTALL.LOG
+  Text=creating shortcut: %IEPATH%\IEXPLORE.EXE to %PROG_GROUP_NAME%\%PLAYTT_LINKNAME%
+end
+item: Create Shortcut
+  Source=%IEPATH%\IEXPLORE.EXE
+  Destination=%PROG_GROUP_NAME%\%PLAYTT_LINKNAME%
+  Command Options=%STARTMENU_URL%
+  Icon Number=0
+  Icon Pathname=%MAINDIR%\toontown.ico
+  Key Type=1536
+  Flags=00000001
+end
+item: Add Text to INSTALL.LOG
+  Text=creating shortcut: %MAINDIR%\unwise.exe %PROG_GROUP_NAME%\Uninstall.lnk
+end
+item: Create Shortcut
+  Source=%MAINDIR%\unwise.exe
+  Destination=%PROG_GROUP_NAME%\Uninstall.lnk
+  Icon Number=0
+  Key Type=1536
+  Flags=00000001
+end
+item: Remark
+  Text=Add desktop icon to web page
+end
+item: Create Shortcut
+  Source=%IEPATH%\IEXPLORE.EXE
+  Destination=%DESKTOPDIR%\%APPTITLE%%TEST_SERVER_STR%.lnk
+  Command Options=%DESKTOP_URL%
+  Icon Number=0
+  Icon Pathname=%MAINDIR%\toontown.ico
+  Key Type=1536
+  Flags=00000001
+end
+item: Compiler Variable End
+end
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=japanese
+end
+item: Get Registry Key Value
+  Variable=PROGRAMS
+  Key=SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders\
+  Value Name=Programs
+  Flags=00000010
+end
+item: Get Registry Key Value
+  Variable=DESKTOPDIR
+  Key=Software\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders
+  Default=%WIN%\Desktop
+  Value Name=Desktop
+  Flags=00000010
+end
+item: Set Variable
+  Variable=PROG_GROUP_NAME
+  Value=%PROGRAMS%\%APPTITLE%%TEST_SERVER_STR%
+end
+item: Create Shortcut
+  Source=%IEPATH%\IEXPLORE.EXE
+  Destination=%PROG_GROUP_NAME%\%PLAYTT_LINKNAME%
+  Command Options=%STARTMENU_URL%
+  Icon Number=0
+  Icon Pathname=%MAINDIR%\toontown.ico
+  Key Type=1536
+  Flags=00000001
+end
+item: Create Shortcut
+  Source=%MAINDIR%\unwise.exe
+  Destination=%PROG_GROUP_NAME%\ACXg[.lnk
+  Icon Number=0
+  Key Type=1536
+  Flags=00000001
+end
+item: Remark
+  Text=Add desktop icon to web page
+end
+item: Create Shortcut
+  Source=%IEPATH%\IEXPLORE.EXE
+  Destination=%DESKTOPDIR%\%APPTITLE%%TEST_SERVER_STR%.lnk
+  Command Options=%DESKTOP_URL%
+  Icon Number=0
+  Icon Pathname=%MAINDIR%\toontown.ico
+  Key Type=1536
+  Flags=00000001
+end
+item: Compiler Variable End
+end
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=german
+end
+item: Get Registry Key Value
+  Variable=PROGRAMS
+  Key=SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders\
+  Value Name=Programs
+  Flags=00000010
+end
+item: Get Registry Key Value
+  Variable=DESKTOPDIR
+  Key=Software\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders
+  Default=%WIN%\Desktop
+  Value Name=Desktop
+  Flags=00000010
+end
+item: Set Variable
+  Variable=PROG_GROUP_NAME
+  Value=%PROGRAMS%\Disneys Toontown Online%TEST_SERVER_STR%
+end
+item: Create Shortcut
+  Source=%IEPATH%\IEXPLORE.EXE
+  Destination=%PROG_GROUP_NAME%\%PLAYTT_LINKNAME%
+  Command Options=%STARTMENU_URL%
+  Icon Number=0
+  Icon Pathname=%MAINDIR%\toontown.ico
+  Key Type=1536
+  Flags=00000001
+end
+item: Create Shortcut
+  Source=%MAINDIR%\unwise.exe
+  Destination=%PROG_GROUP_NAME%\Deinstallations.lnk
+  Icon Number=0
+  Key Type=1536
+  Flags=00000001
+end
+item: Remark
+  Text=Add desktop icon to web page
+end
+item: Create Shortcut
+  Source=%IEPATH%\IEXPLORE.EXE
+  Destination=%DESKTOPDIR%\Disneys Toontown Online%TEST_SERVER_STR%.lnk
+  Command Options=%DESKTOP_URL%
+  Icon Number=0
+  Icon Pathname=%MAINDIR%\toontown.ico
+  Key Type=1536
+  Flags=00000001
+end
+item: Compiler Variable End
+end
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=portuguese
+end
+item: Get Registry Key Value
+  Variable=PROGRAMS
+  Key=SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders\
+  Value Name=Programs
+  Flags=00000010
+end
+item: Get Registry Key Value
+  Variable=DESKTOPDIR
+  Key=Software\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders
+  Default=%WIN%\Desktop
+  Value Name=Desktop
+  Flags=00000010
+end
+item: Set Variable
+  Variable=PROG_GROUP_NAME
+  Value=%PROGRAMS%\%APPTITLE%
+end
+item: Create Shortcut
+  Source=%IEPATH%\IEXPLORE.EXE
+  Destination=%PROG_GROUP_NAME%\%PLAYTT_LINKNAME%
+  Command Options=%STARTMENU_URL%
+  Icon Number=0
+  Icon Pathname=%MAINDIR%\toontown.ico
+  Key Type=1536
+  Flags=00000001
+end
+item: Create Shortcut
+  Source=%MAINDIR%\unwise.exe
+  Destination=%PROG_GROUP_NAME%\Uninstall.lnk
+  Icon Number=0
+  Key Type=1536
+  Flags=00000001
+end
+item: Remark
+  Text=Add desktop icon to web page
+end
+item: Create Shortcut
+  Source=%IEPATH%\IEXPLORE.EXE
+  Destination=%DESKTOPDIR%\%APPTITLE%.lnk
+  Command Options=%DESKTOP_URL%
+  Icon Number=0
+  Icon Pathname=%MAINDIR%\toontown.ico
+  Key Type=1536
+  Flags=00000001
+end
+item: Remark
+  Text=remove older and incorrect English named links
+end
+item: Check if File/Dir Exists
+  Pathname=%DESKTOPDIR%\Disney's Toontown Online.lnk
+  Flags=01000100
+end
+item: Delete File
+  Pathname=%DESKTOPDIR%\Disney's Toontown Online.lnk
+end
+item: End Block
+end
+item: Check if File/Dir Exists
+  Pathname=%PROGRAMS%\Disney's Toontown Online
+  Flags=01000101
+end
+item: Delete File
+  Pathname=%PROGRAMS%\Disney's Toontown Online
+  Flags=00001100
+end
+item: End Block
+end
+item: Compiler Variable End
+end
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=french
+end
+item: Get Registry Key Value
+  Variable=PROGRAMS
+  Key=SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders\
+  Value Name=Programs
+  Flags=00000010
+end
+item: Get Registry Key Value
+  Variable=DESKTOPDIR
+  Key=Software\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders
+  Default=%WIN%\Desktop
+  Value Name=Desktop
+  Flags=00000010
+end
+item: Set Variable
+  Variable=PROG_GROUP_NAME
+  Value=%PROGRAMS%\Disney's Toontown Online%TEST_SERVER_STR%
+end
+item: Create Shortcut
+  Source=%IEPATH%\IEXPLORE.EXE
+  Destination=%PROG_GROUP_NAME%\%PLAYTT_LINKNAME%
+  Command Options=%STARTMENU_URL%
+  Icon Number=0
+  Icon Pathname=%MAINDIR%\toontown.ico
+  Key Type=1536
+  Flags=00000001
+end
+item: Create Shortcut
+  Source=%MAINDIR%\unwise.exe
+  Destination=%PROG_GROUP_NAME%\Uninstall.lnk
+  Icon Number=0
+  Key Type=1536
+  Flags=00000001
+end
+item: Remark
+  Text=Add desktop icon to web page
+end
+item: Create Shortcut
+  Source=%IEPATH%\IEXPLORE.EXE
   Destination=%DESKTOPDIR%\Disney's Toontown Online%TEST_SERVER_STR%.lnk
   Command Options=%DESKTOP_URL%
   Icon Number=0
@@ -734,6 +1482,9 @@
   Text=Execute Program: %MAINDIR%\Configrc.exe %ACTIVEX_UNINSTALL_ARG%
 end
 item: Add Text to INSTALL.LOG
+  Text=Execute Program: %MAINDIR%\uninst.exe
+end
+item: Add Text to INSTALL.LOG
   Text=File Tree: %MAINDIR%\phase_2\
 end
 item: Add Text to INSTALL.LOG
@@ -816,6 +1567,48 @@
 end
 item: End Block
 end
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=castillian
+end
+item: Edit Registry
+  Total Keys=1
+  Key=Software\Microsoft\Windows\CurrentVersion\Uninstall\%APPTITLE%
+  New Value=http://toontown.es/
+  New Value=
+  Value Name=URLInfoAbout
+  Root=2
+end
+item: Compiler Variable End
+end
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=portuguese
+end
+item: Edit Registry
+  Total Keys=1
+  Key=Software\Microsoft\Windows\CurrentVersion\Uninstall\%APPTITLE%
+  New Value=http://toontown.terra.com.br/
+  New Value=
+  Value Name=URLInfoAbout
+  Root=2
+end
+item: Compiler Variable End
+end
+item: Compiler Variable If
+  Variable=_LANGUAGE_
+  Value=japanese
+end
+item: Edit Registry
+  Total Keys=1
+  Key=Software\Microsoft\Windows\CurrentVersion\Uninstall\%APPTITLE%
+  New Value=http://toontown.disney.co.jp/
+  New Value=
+  Value Name=URLInfoAbout
+  Root=2
+end
+item: Compiler Variable End
+end
 item: New Event
   Name=Cancel
 end
--- src/login/AvatarChoice.py	1 Jun 2004 19:32:17 -0000	1.59
+++ src/login/AvatarChoice.py	23 Jul 2008 01:36:44 -0000
@@ -82,8 +82,8 @@
             self['command'] = self.__handleTrialer
             self['text'] = TTLocalizer.AvatarChoiceSubscribersOnly
             self['text0_scale'] = 0.1
-            self['text1_scale'] = 0.115
-            self['text2_scale'] = 0.115
+            self['text1_scale'] = TTLocalizer.ACsubscribersOnly
+            self['text2_scale'] = TTLocalizer.ACsubscribersOnly
             self['text0_fg'] = (0,1,0.8,0.0)
             self['text1_fg'] = (0,1,0.8,1)            
             self['text2_fg'] = (0.3,1,0.9,1)
@@ -110,8 +110,8 @@
             self['text'] = TTLocalizer.AvatarChoiceMakeAToon,
             self['text_pos'] = (0,0)
             self['text0_scale'] = 0.1
-            self['text1_scale'] = 0.12
-            self['text2_scale'] = 0.12
+            self['text1_scale'] = TTLocalizer.ACmakeAToon
+            self['text2_scale'] = TTLocalizer.ACmakeAToon
             self['text0_fg'] = (0,1,0.8,0.5)
             self['text1_fg'] = (0,1,0.8,1)            
             self['text2_fg'] = (0.3,1,0.9,1)
@@ -124,7 +124,7 @@
             self['text'] = ("",
                             TTLocalizer.AvatarChoicePlayThisToon,
                             TTLocalizer.AvatarChoicePlayThisToon)
-            self['text_scale'] = 0.12
+            self['text_scale'] = TTLocalizer.ACplayThisToon
             self['text_fg'] = (1,0.9,0.1,1)
 
             # Support 3d on the frame for the avatar head
@@ -327,7 +327,9 @@
 
         tt = base.cr.loginInterface
         # UK behaves the same as castillian
-        if tt.supportsAuthenticateDelete() and (base.cr.productName != 'DisneyOnline-UK'):
+        if (tt.supportsAuthenticateDelete() and 
+            base.cr.productName not in ['DisneyOnline-UK',
+                'ES', 'JP', 'DE', 'BR', 'FR'] ):
             # If the login interface supports it, make the user
             # type his/her password in order to delete the toon.
             self.deleteWithPassword = 1
--- src/login/AvatarChooser.py	16 Jun 2004 23:05:03 -0000	1.84
+++ src/login/AvatarChooser.py	12 Jan 2005 01:52:27 -0000	1.84.6.2
@@ -124,7 +124,7 @@
         
         # set-up screen title
         self.title = OnscreenText(TTLocalizer.AvatarChooserPickAToon,
-                                  scale = 0.125,
+                                  scale = TTLocalizer.ACtitle,
                                   parent = hidden,
                                   font = ToontownGlobals.getSignFont(),
                                   fg = (1,0.9,0.1,1),
@@ -142,7 +142,7 @@
             text1_fg = (0.152, 0.750, 0.258, 1),
             text2_fg = (0.977, 0.816, 0.133, 1),
             text_pos = (0,-0.035),
-            text_scale = 0.1,
+            text_scale = TTLocalizer.ACquitButton,
             scale = 1.05,
             pos = (0, 0, -0.924),
             command = self.__handleQuit,
@@ -160,7 +160,7 @@
             text0_fg = (0.152, 0.750, 0.258, 1),
             text1_fg = (0.152, 0.750, 0.258, 1),
             text2_fg = (0.977, 0.816, 0.133, 1),
-            text_scale = 0.1,
+            text_scale = TTLocalizer.AClogoutButton,
             text_pos = (0,-0.035),
             pos = (1.105,0,-0.924),
             scale = 0.5,
--- src/makeatoon/MakeAToon.py	1 Jun 2004 19:32:17 -0000	1.122
+++ src/makeatoon/MakeAToon.py	30 Oct 2007 23:57:40 -0000	1.122.6.2
@@ -29,7 +29,7 @@
     """MakeAToon class"""
 
     # special methods
-    
+
     def __init__(self, parentFSM, avList, doneEvent, index, isPaid):
         """
         MakeAToon constructor: create a toon and let the guest customize it
@@ -64,7 +64,7 @@
                 self.warp = 1
                 self.namelessPotAv = av
             self.nameList.append(av.name)
-            
+
         self.fsm = ClassicFSM.ClassicFSM('MakeAToon',
                         [State.State('Init',
                                      self.enterInit,
@@ -99,7 +99,7 @@
                            # Final state
                            'Done',
                            )
-        
+
         self.parentFSM = parentFSM
         self.parentFSM.getStateNamed('createAvatar').addChild(self.fsm)
 
@@ -114,7 +114,7 @@
 
         if self.warp:
             self.shopsVisited = [GENDERSHOP, BODYSHOP, COLORSHOP, CLOTHESSHOP]
-            
+
         # sound
         self.music = None
         self.soundBack = None
@@ -128,7 +128,7 @@
     def enter(self):
         base.camLens.setFov(ToontownGlobals.MakeAToonCameraFov)
 
-        
+
         base.playMusic(self.music, looping = 1, volume = self.musicVolume)
 
         self.toon.startBlink()
@@ -140,7 +140,7 @@
         self.toon.loop("neutral")
         self.room.reparentTo(render)
         camera.setPosHpr(0.75, -22, 5.35, 0, -7.12, 0)
-        
+
         if self.warp:
             if (self.toon.style.torso[1] == 's'):
                 self.toon.gender = 's'
@@ -157,7 +157,7 @@
             self.toon.reparentTo(render)
             self.toon.loop("neutral")
             self.toon.setPosHpr(-4.1, -2, 0, 200, 0, 0)
-        else: 
+        else:
             self.mickey.reparentTo(render)
             self.mickey.loop("neutral")
             self.mickey.setPosHpr(4.2, -1.9, 0, 160, 0, 0)
@@ -172,7 +172,7 @@
 
         self.guiTopBar.show()
         self.guiBottomBar.show()
-        self.guiCancelButton.show()       
+        self.guiCancelButton.show()
 
         if self.warp:
             self.progressing = 0
@@ -186,7 +186,7 @@
 
         self.guiTopBar.hide()
         self.guiBottomBar.hide()
-        
+
         self.music.stop()
         self.fsm.request("Done")
 
@@ -257,7 +257,7 @@
             text = ("", TTLocalizer.MakeAToonCancel,
                     TTLocalizer.MakeAToonCancel),
             text_font = ToontownGlobals.getInterfaceFont(),
-            text_scale = 0.08,
+            text_scale = TTLocalizer.MATnextButtonScale,
             text_pos = (0,-0.03),
             text_fg = (1,1,1,1),
             text_shadow = (0,0,0,1),
@@ -333,8 +333,8 @@
             animal = whrandom.choice(animalIndicesToUse)
             head = ToonDNA.toonHeadTypes[animal]
             torso = whrandom.choice(ToonDNA.toonTorsoTypes[-3:])
-            leg = whrandom.choice(ToonDNA.toonLegTypes)        
-            self.dna.newToon( (head, torso, leg, 'm') ) 
+            leg = whrandom.choice(ToonDNA.toonLegTypes)
+            self.dna.newToon( (head, torso, leg, 'm') )
         else:
             self.dna = ToonDNA.ToonDNA()
             self.dna.makeFromNetString(self.namelessPotAv.dna)
@@ -345,7 +345,7 @@
         self.toon.setNameVisible(0)
         self.toon.startBlink()
         self.toon.startLookAround()
-      
+
         # Create Mickey
         self.mickey = Char.Char()
         mickeyDNA = CharDNA.CharDNA()
@@ -431,7 +431,7 @@
         del self.sewingMachine
         self.room.removeNode()
         del self.room
-                
+
         self.toon.stopBlink()
         self.toon.stopLookAroundNow()
 
@@ -466,7 +466,7 @@
         del self.names
         del self.dnastring
         del self.nameList
-        
+
         del self.music
         del self.soundBack
 
@@ -481,7 +481,7 @@
         self.minnie.stopEarTask()
         self.minnie.delete()
         del self.minnie
-        
+
         self.parentFSM.getStateNamed('createAvatar').removeChild(self.fsm)
         del self.parentFSM
         del self.fsm
@@ -510,10 +510,10 @@
 
     def __handleCancel(self):
         self.doneStatus = "cancel"
-        
+
         #if self.fsm.getCurrentState().getName() == 'NameShop':
         self.shopsVisited = []
-            
+
         def sendDoneTask(self):
             messenger.send(self.doneEvent)
             return Task.done
@@ -523,12 +523,12 @@
 
     def toggleSlide(self):
         self.slide = 1 - self.slide
-        
+
     def goToNextShop(self):
         self.progressing = 1
         # go to the next shop
         if self.shop == GENDERSHOP:
-            self.fsm.request("BodyShop")            
+            self.fsm.request("BodyShop")
         elif self.shop == BODYSHOP:
             self.fsm.request("ColorShop")
         elif self.shop == COLORSHOP:
@@ -540,7 +540,7 @@
         self.progressing = 0
         # go to the last shop
         if self.shop == BODYSHOP:
-            self.fsm.request("GenderShop")            
+            self.fsm.request("GenderShop")
         elif self.shop == COLORSHOP:
             self.fsm.request("BodyShop")
         elif self.shop == CLOTHESSHOP:
@@ -553,7 +553,7 @@
 
     def charSez(self, char, statement, dialogue = None):
         char.setChatAbsolute(statement, CFSpeech, dialogue)
-    
+
     # Specific State functions
 
     def enterInit(self):
@@ -596,7 +596,7 @@
                 Func(comm, *eA)
                 )
         return myInterval
-        
+
     def charRunToLeft(self, char, timelimit=1.6, comm=None, eA=[]):
         myInterval = Sequence()
         if not self.slide:
@@ -624,7 +624,7 @@
                 Func(comm, *eA)
                 )
         return myInterval
-        
+
     def charRunFromRight(self, char, newpos, newhpr, timelimit=1, comm=None, eA=[]):
         myInterval = Sequence()
         myInterval.append(
@@ -655,7 +655,7 @@
                 Func(comm, *eA)
                 )
         return myInterval
-        
+
     def charRunToRight(self, char, timelimit=1, comm=None, eA=[]):
         myInterval = Sequence()
         if not self.slide:
@@ -678,7 +678,7 @@
         myInterval.append(
             Func(char.loop, "neutral")
             )
-        
+
         if comm:
             myInterval.append(
                 Func(comm, *eA)
@@ -701,7 +701,7 @@
         self.host = self.mickey
         self.hostSez([TTLocalizer.GenderShopQuestionMickey,], self.mickeyDialogueArray[0])
         return Task.done
-        
+
     def enterGenderShop(self):
         self.toon.hide()
         # self.roomWalls.setColorScale(0.829, 0.541, 0.271, 1)
@@ -719,7 +719,7 @@
         self.shop = GENDERSHOP
         self.guiTopBar['text'] = TTLocalizer.CreateYourToonTitle
         self.guiTopBar['text_fg'] = (1,0.9,0,1)
-        self.guiTopBar['text_scale'] = 0.18
+        self.guiTopBar['text_scale'] = TTLocalizer.MATenterGenderShop
         base.transitions.fadeIn()
         self.accept("GenderShop-done", self.__handleGenderShopDone)
         self.accept("clickedNametag", self.__handleBodyClick)
@@ -803,8 +803,8 @@
             ])
         self.bs.showButtons()
         self.guiNextButton.show()
-        self.guiLastButton.show() 
-    
+        self.guiLastButton.show()
+
     def enterBodyShop(self):
         self.toon.show()
         # self.roomWalls.setColorScale(0.49, 0.612, 0.380, 1)
@@ -812,10 +812,10 @@
         self.shop = BODYSHOP
         self.guiTopBar['text'] = TTLocalizer.CreateYourToonTitle
         self.guiTopBar['text_fg'] = (0.0, 0.65, 0.35, 1)
-        self.guiTopBar['text_scale'] = 0.18
+        self.guiTopBar['text_scale'] = TTLocalizer.MATenterBodyShop
         #base.transitions.fadeIn()
         self.accept("BodyShop-done", self.__handleBodyShopDone)
-        self.draftingTable.show()       
+        self.draftingTable.show()
 
         # we need to do this first for setup...
         self.bs.enter(self.toon, self.shopsVisited)
@@ -825,7 +825,7 @@
 
         if self.progressing:
             self.hostTrack = self.charRunFromLeft(
-                char=self.host, newpos=self.hostPosition, 
+                char=self.host, newpos=self.hostPosition,
                 newhpr=self.hostHpr, comm=self.bodyShopOpening)
             self.hostTrack.start()
         else:
@@ -884,7 +884,7 @@
         self.roomWalls.setColorScale(0.61, 0.70, 0.45, 1)
         self.guiTopBar['text'] = TTLocalizer.PaintYourToonTitle
         self.guiTopBar['text_fg'] = (0.15, 0.4, 0.8, 1)
-        self.guiTopBar['text_scale'] = 0.18
+        self.guiTopBar['text_scale'] = TTLocalizer.MATenterColorShop
         #base.transitions.fadeIn()
         self.accept("ColorShop-done", self.__handleColorShopDone)
         self.easel.show()
@@ -901,7 +901,7 @@
                                       comm=self.colorShopOpening),
                 self.charRunFromRight(self.toon, newpos=self.toonPosition, newhpr=self.toonHpr))
             self.hostTrack.start()
-            
+
         self.cos.enter(self.toon, self.shopsVisited)
 
         if (COLORSHOP not in self.shopsVisited):
@@ -924,7 +924,7 @@
 
     def __handleColorShopDone(self):
         self.guiNextButton.hide()
-        self.guiLastButton.hide()   
+        self.guiLastButton.hide()
         if self.cos.doneStatus == 'next':
             self.cos.hideButtons()
             self.hostTrack = Parallel(self.charRunToRight(char=self.host, comm=self.goToNextShop),
@@ -955,14 +955,14 @@
         self.roomWalls.setColorScale(0.93, 0.64, 0.46, 1)
         self.guiTopBar['text'] = TTLocalizer.PickClothesTitle
         self.guiTopBar['text_fg'] = (1,0.9,0,1)
-        self.guiTopBar['text_scale'] = 0.16
+        self.guiTopBar['text_scale'] = TTLocalizer.MATenterClothesShop
         self.accept("ClothesShop-done", self.__handleClothesShopDone)
         self.sewingMachine.show()
         #Code added to return your toon and host to normal size
         self.toon.setScale(1.2, 1.2, 1.2)
         self.host.setScale(1, 1, 1)
         #End of new enlarging code
-            
+
         if self.progressing:
             self.hostTrack = Parallel( \
                 self.charRunFromLeft(self.host, newpos=self.hostPosition, newhpr=self.hostHpr, \
@@ -975,7 +975,7 @@
                                       comm=self.clothesShopOpening), \
                 self.charRunFromRight(self.toon, newpos=self.toonPosition, newhpr=self.toonHpr))
             self.hostTrack.start()
-            
+
         self.cls.enter(self.toon)
         if (CLOTHESSHOP not in self.shopsVisited):
             self.shopsVisited.append(CLOTHESSHOP)
@@ -989,7 +989,7 @@
 
     def __handleClothesShopDone(self):
         self.guiNextButton.hide()
-        self.guiLastButton.hide()    
+        self.guiLastButton.hide()
         if self.cls.doneStatus == 'next':
             self.cls.hideButtons()
             self.hostTrack = Parallel(self.charRunToRight(char=self.host), \
@@ -1029,7 +1029,7 @@
         self.roomWalls.setColorScale(0.9, 0.75, 0.45, 1)
         self.guiTopBar['text'] = TTLocalizer.NameToonTitle
         self.guiTopBar['text_fg'] = (0.0, 0.65, 0.35, 1)
-        self.guiTopBar['text_scale'] = 0.15
+        self.guiTopBar['text_scale'] = TTLocalizer.MATenterNameShop
         self.accept("NameShop-done", self.__handleNameShopDone)
         self.accept("NameShop-mickeyChange", self.__changeHost)
 
@@ -1038,7 +1038,7 @@
         # self.host.setScale(.8, .8, .8)
         self.host.setScale(.9, .9, .9)
         # End of new shrinking code
-    
+
         if self.progressing:
             self.hostTrack = Parallel( \
                 self.charRunFromLeft(self.host, newpos=Point3(4.9, -1.9, 0), newhpr=self.hostHpr, \
@@ -1073,7 +1073,7 @@
 
     def __changeHost(self, newText):
         self.hostSez(newText)
-        
+
     def __handleNameShopDone(self):
         self.guiLastButton.hide()
         self.guiCheckButton.hide()
@@ -1090,7 +1090,7 @@
                 return Task.done
             sdt = Task.Task(sendDoneTask)
             sdt.doneEvent = self.doneEvent
-            base.transitions.fadeOutTask(sdt)   
+            base.transitions.fadeOutTask(sdt)
         else:
             self.doneStatus = "created"
             def sendDoneTask(self):
@@ -1099,7 +1099,7 @@
             sdt = Task.Task(sendDoneTask)
             sdt.doneEvent = self.doneEvent
             base.transitions.fadeOutTask(sdt)
-    
+
     def __handleNext(self):
         messenger.send("next")
 
@@ -1115,18 +1115,3 @@
     def exitDone(self):
         pass
 
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
--- src/makeatoon/NameShop.py	21 Jun 2004 20:53:07 -0000	1.126
+++ src/makeatoon/NameShop.py	23 Jul 2008 01:36:44 -0000
@@ -24,17 +24,19 @@
 import NameCheck
 from toontown.toontowngui import TeaserPanel
 from direct.distributed.PyDatagram import PyDatagram
+from direct.showbase import PythonUtil
 
-MAX_NAME_WIDTH = 7.5
+MAX_NAME_WIDTH = TTLocalizer.NSmaxNameWidth
 
 ServerDialogTimeout = 3.0
 
 class NameShop(PandaObject.PandaObject, StateData.StateData):
     """NameShop class: contains methods for setting the Avatar's
     name via user input"""
-        
+
     notify = DirectNotifyGlobal.directNotify.newCategory("NameShop")
-    
+    #notify.setDebug(True)
+
     def __init__(self, parentFSM, doneEvent, avList, index, isPaid):
         """__init__(self, ClassicFSM, Event)
         Set-up the name shop interface to pick a name for the given toon
@@ -49,7 +51,7 @@
         self.avId = -1
         # test
         self.avExists = 0
-                
+
         # names is a list of the toon's name, wantName, approvedName, and
         # rejectedName
         # name is distributed while the other three are specialized for
@@ -72,7 +74,7 @@
         self.titleActive = 0
         self.firstActive = 0
         self.lastActive = 0
-        
+
         self.quickFind = 0
         self.listsLoaded = 0
         self.addedGenderSpecific = 0
@@ -88,12 +90,12 @@
 
         self.pickANameGUIElements = []
         self.typeANameGUIElements = []
-        
+
         self.textRolloverColor = Vec4(1,1,0,1)
         self.textDownColor = Vec4(0.5,0.9,1,1)
         self.textDisabledColor = Vec4(0.4,0.8,0.4,1)
 
-        
+
         # Add an fsm to NameShop to handle PayState, PickAName, TypeAName,
         #   NameAccepted, NameRejected, and ToonCouncil
         self.fsm = ClassicFSM.ClassicFSM('NameShop',
@@ -135,7 +137,7 @@
                            # Final state
                            'Done',
                            )
-        
+
         self.parentFSM = parentFSM
         self.parentFSM.getStateNamed('NameShop').addChild(self.fsm)
 
@@ -161,14 +163,14 @@
             state = 'normal',
             relief = None,
             text = te,
-            text_scale = 0.1,
+            text_scale = TTLocalizer.NSmakeLabel,
             text_pos = newpos,
             text_align = alig,
             textMayChange = 0,
             )
         df.bind(B1PRESS, lambda x, df = df: self.nameClickedOn(listName, index))
         return df
-    
+
     def nameClickedOn(self, listType, index):
         """If a name in one of the scrolled lists is clicked on,
         snap it to center
@@ -195,7 +197,7 @@
             for g in self.avList:
                 if g.position == self.index:
                     self.avId = g.id
-            
+
         if toon == None:
             return None
         else:
@@ -215,14 +217,14 @@
         if (not self.addedGenderSpecific) or self.oldBoy != self.boy:
             self.oldBoy = self.boy
             self.listsLoaded = 0
-           
+
             # Fill titleScrollList
             self.allTitles = [" "] + [" "] + self.nameGen.boyTitles*self.boy + \
                              self.nameGen.girlTitles*self.girl + \
                              self.nameGen.neutralTitles
             self.allTitles.sort()
             self.allTitles += [" "] + [" "]
-            
+
             # Fill firstnameScrollList
             self.allFirsts = [" "] + [" "] + self.nameGen.boyFirsts*self.boy + \
                              self.nameGen.girlFirsts*self.girl + \
@@ -234,7 +236,7 @@
                 self.allFirsts[k] = "von"
             except:
                 print "NameShop: Couldn't find von"
-                
+
             self.pickANameGUIElements.remove(self.titleScrollList)
             self.pickANameGUIElements.remove(self.firstnameScrollList)
             self.titleScrollList.destroy()
@@ -262,7 +264,7 @@
             self.firstHigh = self.makeHighlight((-0.310367, 0.0, 0.122967))
             self.pickANameGUIElements.append(self.titleHigh)
             self.pickANameGUIElements.append(self.firstHigh)
-            
+
             panel = nameShopGui.find("**/namePanel")
             self.namePanel = DirectFrame(
                 parent = aspect2d,
@@ -315,7 +317,7 @@
 
             nameShopGui.removeNode()
             # If you're doing this you'd better make the highlights
-            # again so they're on top            
+            # again so they're on top
             self.listsLoaded = 1
             self.addedGenderSpecific = 1
             self.__randomName()
@@ -339,7 +341,7 @@
 
     def __overflowNameInput(self):
         self.rejectName(TTLocalizer.NameTooLong)
-        
+
     def exit(self):
         """exit(self)
         Remove events and restore display
@@ -347,9 +349,9 @@
         self.notify.debug('exit')
         if self.isLoaded == 0:
             return None
-        
+
         self.ignore("next")
-        self.ignore("last")        
+        self.ignore("last")
 
         self.hideAll()
         return None
@@ -394,12 +396,12 @@
                     self.nameFlags[1] = 1
                 if self.lastActive:
                     newname += " "
-                    
+
             else:
                 self.firstHigh.hide()
                 self.stealth(self.firstnameScrollList)
                 self.nameIndices[1] = -1
-              
+
             if self.lastActive:
                 self.showList(self.lastprefixScrollList)
                 self.showList(self.lastsuffixScrollList)
@@ -480,9 +483,10 @@
             itemFrame_scale = 1.0,
             itemFrame_relief = RAISED,
             itemFrame_frameSize = (-0.05,0.48,-0.5,0.1),
-            itemFrame_frameColor = mcolor,  
+            itemFrame_frameColor = mcolor,
             itemFrame_borderWidth = (0.01, 0.01),
             numItemsVisible = 5,
+            forceHeight = TTLocalizer.NSdirectScrolleList,
             )
         return ds
 
@@ -499,7 +503,7 @@
             pos = npos,
             text = ntex,
             text_fg = ntexcolor,
-            text_scale = 0.8,
+            text_scale = TTLocalizer.NSmakeCheckBox,
             text_pos = (0.2,0),
             indicator_pos = (-0.566667, 0, -0.045),
             indicator_image_pos = (-0.26, 0,0.075),
@@ -513,12 +517,12 @@
             relief = 'flat',
             scale = (.552,0,.11),
             state = 'disabled',
-            frameSize = (-0.05,0.48,-0.5,0.1), 
+            frameSize = (-0.05,0.48,-0.5,0.1),
             borderWidth = (0.01, 0.01),
             pos = npos,
             frameColor = (1,0,1,.4),
             )
-    
+
     def titleToggle(self, value):
         """ Toggles titleCheck
         """
@@ -578,7 +582,7 @@
         self.firstCheck.setIndicatorValue()
         self.lastCheck['indicatorValue'] = self.lastActive
         self.lastCheck.setIndicatorValue()
-        
+
     def load(self):
         """load(self)
         """
@@ -590,7 +594,7 @@
         nameBalloon = loader.loadModel(
             "phase_3/models/props/chatbox_input")
         guiButton = loader.loadModelOnce("phase_3/models/gui/quit_button")
-      
+
         gui = loader.loadModelOnce("phase_3/models/gui/nameshop_gui")
         #### GUI Elements for TypeAName ####
         typePanel = gui.find("**/typeNamePanel")
@@ -619,7 +623,7 @@
         self.nameEntry = DirectEntry(
             parent = aspect2d,
             relief = None,
-            scale = 0.08,
+            scale = TTLocalizer.NSnameEntry,
             entryFont = getToonFont(),
             width = MAX_NAME_WIDTH,
             numLines = 2,
@@ -644,8 +648,8 @@
             text_pos = (0, -0.02),
             command = self.__typedAName,
             )
-        self.typeANameGUIElements.append(self.submitButton) 
-        
+        self.typeANameGUIElements.append(self.submitButton)
+
         #### GUI Elements for PickAName ####
         self.randomButton = DirectButton(
             parent = aspect2d,
@@ -674,13 +678,13 @@
             pos = (0.01, 0, -.695),
             scale = (1.6,1,1.7),
             text = TTLocalizer.TypeANameButton,
-            text_scale = 0.06,
-            text_pos = (0, -0.02),
+            text_scale = TTLocalizer.NStypeANameButton,
+            text_pos = (0, TTLocalizer.NStypeANameButton_pos),
             command = self.__typeAName,
             )
 
-        if base.cr.productName == "Terra-DMC":
-            # No type-a-name for DMC Terra (Spain)
+        if base.cr.productName in ['ES', 'DE', 'BR']:
+            # No type-a-name for ES (Spain), DE (German) and BR (Brazil)
             self.typeANameButton.hide()
         self.pickANameGUIElements.append(self.typeANameButton)
 
@@ -688,7 +692,7 @@
         self.nameResult = DirectLabel(
             parent = aspect2d,
             relief = None,
-            scale = 0.12,
+            scale = TTLocalizer.NSnameResult,
             pos = (0.04, 0, 0.7),
             text = " \n ",
             text_align = TextNode.ACenter,
@@ -702,8 +706,8 @@
         self.allSuffixes.sort()
         self.allPrefixes = [" "] + [" "] + self.allPrefixes + [" "] + [" "]
         self.allSuffixes = [" "] + [" "] + self.allSuffixes + [" "] + [" "]
-        
-       
+
+
         # Create 4 scrolled lists with different colors
         self.titleScrollList = self.makeScrollList(
             gui, (-0.6, 0, 0.2),
@@ -726,9 +730,9 @@
         gui.removeNode()
         self.pickANameGUIElements.append(self.lastprefixScrollList)
         self.pickANameGUIElements.append(self.lastsuffixScrollList)
-        self.pickANameGUIElements.append(self.titleScrollList)        
-        self.pickANameGUIElements.append(self.firstnameScrollList)        
-        
+        self.pickANameGUIElements.append(self.titleScrollList)
+        self.pickANameGUIElements.append(self.firstnameScrollList)
+
         # Make four highlights for each scroll List
         self.titleHigh = self.makeHighlight((-0.710367, 0.0, 0.122967))
         self.firstHigh = self.makeHighlight((-0.310367, 0.0, 0.122967))
@@ -738,7 +742,7 @@
         self.suffixHigh = self.makeHighlight((0.44, 0.0, 0.122967))
         self.pickANameGUIElements.append(self.prefixHigh)
         self.pickANameGUIElements.append(self.suffixHigh)
-        
+
         nameBalloon.removeNode()
 
         ### GUI elements for PayState ###
@@ -749,7 +753,7 @@
         buttonImage = [imageList, imageList]
         buttonText = [TTLocalizer.NameShopPay,
                       TTLocalizer.NameShopPlay]
-        
+
         self.payDialog = DirectDialog(dialogName = "paystate",
                                       topPad = 0,
                                       fadeScreen = 0.2,
@@ -770,10 +774,10 @@
         self.payDialog.buttonList[0]['text_pos'] = (0,-.02)
         self.payDialog.buttonList[1]['text_pos'] = (0,-.02)
         self.payDialog.hide()
-        
+
         buttonText = [TTLocalizer.NameShopContinueSubmission,
                       TTLocalizer.NameShopChooseAnother]
-        
+
         self.approvalDialog = DirectDialog(dialogName = "approvalstate",
                                       topPad = 0,
                                       fadeScreen = 0.2,
@@ -793,40 +797,42 @@
             self.approvalDialog.buttonList[x]['text_pos'] = (0,-.01)
             self.approvalDialog.buttonList[x]['text_scale'] = (.04,.05999)
             self.approvalDialog.buttonList[x].setScale(1.2,1,1)
-        
+
         self.approvalDialog.hide()
         guiButton.removeNode()
 
         self.uberhide(self.typeANameGUIElements)
         self.uberhide(self.pickANameGUIElements)
-        
+
         self.isLoaded = 1
         return None
 
     def ubershow(self, guiObjectsToShow):
+        #self.notify.debug("ubershow %s" % str(guiObjectsToShow))
         for x in guiObjectsToShow:
             try:
                 x.show()
             except:
                 print "NameShop: Tried to show already removed object"
 
-        if base.cr.productName == "Terra-DMC":
-            # No type-a-name for DMC Terra (Spain)
+        if base.cr.productName in ['ES', 'DE', 'BR']:
+            # No type-a-name for ES (Spain), DE (German) and BR (Brazil)
             self.typeANameButton.hide()
 
-
     def hideAll(self):
         self.uberhide(self.pickANameGUIElements)
         self.uberhide(self.typeANameGUIElements)
-        
+
     def uberhide(self, guiObjectsToHide):
+        #self.notify.debug("uberhide %s" % str(guiObjectsToHide))
         for x in guiObjectsToHide:
             try:
                 x.hide()
             except:
                 print "NameShop: Tried to hide already removed object"
-                
+
     def uberdestroy(self, guiObjectsToDestroy):
+        #self.notify.debug("uberdestroy %s" % str(guiObjectsToDestroy))
         for x in guiObjectsToDestroy:
             try:
                 x.destroy()
@@ -843,12 +849,12 @@
         """getNameFlags(self)
         """
         return self.nameFlags
-    
+
     def getNameAction(self):
         """getNameAction(self)
         """
         return self.nameAction
-    
+
     def unload(self):
         """unload(self)
         """
@@ -862,7 +868,7 @@
 
         self.uberdestroy(self.pickANameGUIElements)
         self.uberdestroy(self.typeANameGUIElements)
-        
+
         del self.toon
 
         self.payDialog.cleanup()
@@ -873,7 +879,7 @@
         self.parentFSM.getStateNamed('NameShop').removeChild(self.fsm)
         del self.parentFSM
         del self.fsm
-        
+
         self.ignoreAll()
         self.isLoaded = 0
         return None
@@ -895,7 +901,7 @@
 
         # name has passed local checks
         return None
-    
+
     # event handlers
 
     def setShopsVisited(self, list):
@@ -910,7 +916,7 @@
 
     def __handleChastised(self):
         self.chastiseDialog.cleanup()
-            
+
     def __createAvatar(self, *args):
         """__createAvatar(self)
         Create the avatar if needed, then check name
@@ -920,7 +926,7 @@
         if self.fsm.getCurrentState().getName() == 'TypeAName':
             self.__typedAName()
             return
-        
+
         if not self.avExists:
             self.serverCreateAvatar()
         else:
@@ -928,14 +934,14 @@
                 # No empty names
                 self.rejectName(TTLocalizer.EmptyNameError)
             elif self.avId == 'deleteMe':
-                self.serverCreateAvatar()   
+                self.serverCreateAvatar()
             else:
                 rejectReason = self.nameIsValid(self.names[0])
                 if rejectReason != None:
                     self.rejectName(rejectReason)
                 else:
                     self.checkNamePattern()
-                    
+
     def acceptName(self):
         self.notify.debug('acceptName')
         # The name was accepted by the server
@@ -944,7 +950,7 @@
         # Send our done event
         self.doneStatus = "done"
         messenger.send(self.doneEvent)
-        
+
     def rejectName(self, str):
         self.notify.debug('rejectName')
         self.names[0] = ""
@@ -958,8 +964,9 @@
     def __handleReject(self):
         self.rejectDialog.cleanup()
         self.nameEntry['focus'] = 1
+        self.typeANameButton.show()
         # enable the done button again
-        self.acceptOnce("next", self.__createAvatar)        
+        self.acceptOnce("next", self.__createAvatar)
 
     def restoreIndexes(self, oi):
         self.titleIndex = oi[0]
@@ -978,8 +985,8 @@
         listToDo.show()
         listToDo.decButton['state'] = 'normal'
         listToDo.incButton['state'] = 'normal'
-        
-        
+
+
     def updateLists(self):
         """Scroll lists to the newly changed indices
         """
@@ -993,8 +1000,9 @@
         self.restoreIndexes(oldindex)
         self.lastsuffixScrollList.scrollTo(self.suffixIndex-2)
         self.restoreIndexes(oldindex)
-        
+
     def __randomName(self):
+        #self.notify.debug("Finding random name")
         # Create a random name using the new function which returns
         # more information
         uberReturn = self.nameGen.randomNameMoreinfo(self.boy, self.girl)
@@ -1007,7 +1015,7 @@
         # is titleFlag)
         if uberReturn[0]:
             self.titleActive = 1
-            
+
         # If a first name is used (the second item in returned list
         # is firstFlag)
         if uberReturn[1]:
@@ -1040,7 +1048,7 @@
         except:
             print "NameShop : Should have found first name, uh oh!"
             print uberReturn
-            
+
         # If there was a last name used (you get it...)
         try:
             # Find position in scrolledList of the prefix and suffix used
@@ -1057,7 +1065,7 @@
         except:
             print "NameShop : Some part of last name not found, uh oh!"
             print uberReturn
-            
+
         self.updateCheckBoxes()
         self.updateLists()
 
@@ -1066,13 +1074,16 @@
 
     def findTempName(self):
         colorstring = TTLocalizer.NumToColor[self.toon.style.headColor]
-	animaltype = TTLocalizer.AnimalToSpecies[self.toon.style.getAnimal()]
+        animaltype = TTLocalizer.AnimalToSpecies[self.toon.style.getAnimal()]
         tempname = colorstring + " " + \
-                   animaltype 
+                   animaltype
+        if not TTLocalizer.NScolorPrecede:
+            tempname = animaltype + " " + \
+                       colorstring
         self.names[0] = tempname
         tempname = '"' + tempname + '"'
         return tempname
-        
+
     # Specific State functions
     ##### Init state #####
     def enterInit(self):
@@ -1080,7 +1091,7 @@
 
     def exitInit(self):
         pass
-    
+
     ##### PayState State #####
     def enterPayState(self):
         self.notify.debug('enterPayState')
@@ -1093,7 +1104,7 @@
             tempname = self.findTempName()
             self.payDialog['text'] = TTLocalizer.NameShopOnlyPaid + tempname
             self.payDialog.show()
-            
+
     def exitPayState(self):
         pass
 
@@ -1125,7 +1136,7 @@
         self.typeANameButton.show()
         self.nameEntry.set("")
         self.nameEntry['focus'] = 1
-    
+
     def __typeAName(self):
         if base.restrictTrialers:
             if not base.cr.isPaid():
@@ -1156,7 +1167,7 @@
         if problem:
             self.rejectName(problem)
             return
-        
+
         if not self.avExists:
             self.nameAction = 2
             self.serverCreateAvatar()
@@ -1164,6 +1175,9 @@
             self.checkNameTyped()
 
     def exitTypeANameState(self):
+        #fix type a name button shifting
+        self.typeANameButton.wrtReparentTo(self.namePanel)
+        #self.printTypeANameInfo("after reparent to self.namePanel")
         self.uberhide(self.typeANameGUIElements)
 
     ##### Approval state #####
@@ -1198,10 +1212,10 @@
                 datagram.addUint32(self.avId)
                 datagram.addUint8(0)
                 messenger.send("nameShopPost", [datagram])
-                
+
             self.typeANameButton['text'] = TTLocalizer.TypeANameButton
             self.fsm.request("PickAName")
-    
+
     def sendDeleteAvatarMsgCancelStyle(self, avId):
         # Delete the avatar
         datagram = PyDatagram()
@@ -1212,10 +1226,10 @@
         # Send the message
         messenger.send("nameShopPost", [datagram])
         return None
-        
+
     def exitApprovalState(self):
         pass
-    
+
     ##### Accepted state #####
     def enterAcceptedState(self):
         self.notify.debug('enterAcceptedState')
@@ -1231,7 +1245,7 @@
         # Everything is cool, send our done event
         self.doneStatus = "done"
         messenger.send(self.doneEvent)
-        
+
     def exitAcceptedState(self):
         pass
 
@@ -1251,7 +1265,7 @@
 
     def exitRejectedState(self):
         pass
-    
+
     ##### Done state #####
 
     def enterDone(self):
@@ -1292,20 +1306,20 @@
         datagram.addUint16(self.nameIndices[2])
         datagram.addUint16(self.nameFlags[2])
         datagram.addUint16(self.nameIndices[3])
-        datagram.addUint16(self.nameFlags[3])      
+        datagram.addUint16(self.nameFlags[3])
         # Have TCR Send the message because it has a server open
         messenger.send("nameShopPost", [datagram])
-    
+
         # let the user know we are waiting to hear back
         self.waitForServer()
-        
+
 
     def handleSetNamePatternAnswerMsg(self, di):
         self.notify.debug('handleSetNamePatternAnswerMsg')
 
         # remove the wait msg
         self.cleanupWaitForServer()
-        
+
         # Get return code
         newavId = di.getUint32()
         if newavId != self.avId:
@@ -1333,7 +1347,7 @@
             # name creation was rejected by server
             self.notify.debug("name pattern rejected")
             self.rejectName(TTLocalizer.NameError)
-            
+
         return None
 
 
@@ -1360,7 +1374,7 @@
 
         # remove the wait msg
         self.cleanupWaitForServer()
-        
+
         # Get return code
         newavId = di.getUint32()
         if newavId != self.avId:
@@ -1368,7 +1382,7 @@
             self.notify.debug("doid's don't match up!")
             self.rejectName(TTLocalizer.NameError)
             pass
-        
+
         returnCode = di.getUint16()
         if returnCode == 0:
             wishname = di.getString()
@@ -1387,7 +1401,7 @@
                                                            0)
                 self.avList.append(newPotAv)
                 self.fsm.request("Accepted")
-                
+
             elif wishname != "":
                 style = self.toon.getStyle()
                 avDNA = style.makeNetString()
@@ -1413,7 +1427,7 @@
             # name creation was rejected by server
             self.notify.debug("name typed rejected")
             self.rejectName(TTLocalizer.NameError)
-            
+
         return None
 
 
@@ -1446,7 +1460,7 @@
                                                            self.index,
                                                            1)
                 self.avList.append(newPotAv)
-                        
+
                 # Send our done event
                 self.doneStatus = "done"
                 messenger.send(self.doneEvent)
@@ -1461,7 +1475,7 @@
                 self.notify.debug("avatar invalid nameAction")
                 self.rejectName(TTLocalizer.NameError)
         else:
-            
+
             # create was rejected by server
             self.notify.debug("avatar rejected")
             self.rejectName(TTLocalizer.NameError)
--- src/minigame/DistributedCannonGame.py	10 Sep 2004 02:04:23 -0000	1.107
+++ src/minigame/DistributedCannonGame.py	28 Mar 2006 07:27:02 -0000	1.107.6.4
@@ -74,7 +73,6 @@
 class DistributedCannonGame(DistributedMinigame):
 
     notify = DirectNotifyGlobal.directNotify.newCategory("DistributedMinigame")
-    notify.setDebug(1)
 
     font = ToontownGlobals.getToonFont()
 
@@ -250,7 +248,7 @@
             text_scale = 0.2,
             text_fg = (0.95, 0.95, 0, 1),
             text_pos = (0, -.13),
-            text_font = ToontownGlobals.getSignFont(),
+            text_font = ToontownGlobals.getBuildingNametagFont(),
             image = self.jarImage,
             )
         self.rewardPanelTitle = DirectLabel(
--- src/minigame/DistributedCatchGame.py	1 Jun 2004 19:32:17 -0000	1.118
+++ src/minigame/DistributedCatchGame.py	11 Nov 2005 21:17:33 -0000	1.118.6.3
@@ -199,7 +199,7 @@
 
         # this will be used to generate textnodes
         self.__textGen = TextNode("ringGame")
-        self.__textGen.setFont(ToontownGlobals.getSignFont())
+        self.__textGen.setFont(ToontownGlobals.getBuildingNametagFont())
         self.__textGen.setAlign(TextNode.ACenter)
 
         self.introMovie = self.getIntroMovie()
--- src/minigame/DistributedPatternGame.py	1 Jun 2004 19:32:18 -0000	1.117
+++ src/minigame/DistributedPatternGame.py	11 Nov 2005 21:17:33 -0000	1.117.6.3
@@ -157,7 +157,7 @@
             text = self.strPleaseWait,
             text_fg = (.9,.9,.9,1.),
             frameColor = (1,1,1,0),
-            text_font = ToontownGlobals.getSignFont(),
+            text_font = ToontownGlobals.getBuildingNametagFont(),
             pos = (0,0,-.78),
             scale = .12)
                 
@@ -165,7 +165,7 @@
             text = self.strRound % 1,
             text_fg = self.normalTextColor,
             frameColor = (1,1,1,0),
-            text_font = ToontownGlobals.getSignFont(),
+            text_font = ToontownGlobals.getBuildingNametagFont(),
             pos = (0.014, 0, -.84),
             scale = .12)
         
--- src/minigame/DistributedRaceGame.py	1 Jun 2004 19:32:18 -0000	1.84
+++ src/minigame/DistributedRaceGame.py	11 Nov 2005 21:17:33 -0000	1.84.6.3
@@ -209,7 +209,7 @@
             "",
             fg = (1.0, 0, 0, 1),
             scale = 0.14,
-            font = ToontownGlobals.getSignFont(),
+            font = ToontownGlobals.getBuildingNametagFont(),
             wordwrap = 14,
             pos = (0.0, 0.2),
             mayChange = 1,
--- src/minigame/DistributedRingGame.py	9 Nov 2004 23:07:36 -0000	1.135
+++ src/minigame/DistributedRingGame.py	11 Nov 2005 21:17:33 -0000	1.135.4.3
@@ -175,7 +175,7 @@
 
         # this will be used to generate textnodes
         self.__textGen = TextNode("ringGame")
-        self.__textGen.setFont(ToontownGlobals.getSignFont())
+        self.__textGen.setFont(ToontownGlobals.getBuildingNametagFont())
         self.__textGen.setAlign(TextNode.ACenter)
 
     def unload(self):
@@ -476,7 +476,7 @@
     def __initTallyDisplay(self):
         # create tally-marker-generating TextNode
         self.__tallyTextNode = TextNode("tally")
-        self.__tallyTextNode.setFont(ToontownGlobals.getSignFont())
+        self.__tallyTextNode.setFont(ToontownGlobals.getBuildingNametagFont())
         self.__tallyTextNode.setAlign(TextNode.ACenter)
 
         self.tallyMarkers = [None] * self.__numRingGroups
--- src/minigame/DistributedTagGame.py	9 Sep 2004 00:29:39 -0000	1.79
+++ src/minigame/DistributedTagGame.py	11 Nov 2005 21:17:33 -0000	1.79.6.3
@@ -81,7 +81,7 @@
             "itText",
             fg = (0.95, 0.95, 0.65, 1),
             scale = 0.14,
-            font = ToontownGlobals.getSignFont(),
+            font = ToontownGlobals.getBuildingNametagFont(),
             pos = (0.0, -0.8),
             wordwrap = 15,
             mayChange = 1,
--- src/minigame/DistributedTugOfWarGame.py	19 Aug 2004 22:04:43 -0000	1.87
+++ src/minigame/DistributedTugOfWarGame.py	11 Nov 2005 21:17:33 -0000	1.87.6.3
@@ -183,7 +183,7 @@
             text = '     ',
             text_fg = (0,1,0,1),
             frameColor = (1,1,1,0),
-            text_font = ToontownGlobals.getSignFont(),
+            text_font = ToontownGlobals.getBuildingNametagFont(),
             pos = (0.014, 0, -.84),
             scale = .2)
        
--- src/minigame/MinigameAvatarScorePanel.py	1 Jun 2004 19:32:18 -0000	1.11
+++ src/minigame/MinigameAvatarScorePanel.py	20 Jan 2005 02:33:21 -0000	1.11.6.1
@@ -30,7 +30,7 @@
         self.scoreText = DirectLabel(self,
                                      relief = None,
                                      text = "0",
-                                     text_scale = 0.1,
+                                     text_scale = TTLocalizer.MASPscoreText,
                                      pos = (0.1, 0.0, -0.09))
 
         if self.avatar:
@@ -50,7 +50,7 @@
         self.nameText = DirectLabel(self,
                                     relief = None,
                                     text = avName,
-                                    text_scale = 0.055,
+                                    text_scale = TTLocalizer.MASPnameText,
                                     text_pos = (0.0, 0.06),
                                     text_wordwrap = 7.5,
                                     text_shadow = (1, 1, 1, 1))
--- src/minigame/MinigamePowerMeter.py	1 Jun 2004 19:32:18 -0000	1.8
+++ src/minigame/MinigamePowerMeter.py	20 Jan 2005 02:41:16 -0000	1.8.6.1
@@ -31,7 +31,7 @@
         self.powerText = DirectLabel(self,
                                      relief = None,
                                      text = label,
-                                     text_scale = 0.07,
+                                     text_scale = TTLocalizer.MPMpowerText,
                                      pos = (0.01, 0.0, .29))
 
         # make labels for when keys are being hit too slow or too fast
@@ -39,7 +39,7 @@
             parent = self,
             relief = None,
             text = TTLocalizer.MinigamePowerMeterTooSlow,
-            scale = 0.07,
+            scale = TTLocalizer.MPMtooSlow,
             pos = (-.15, 0, 0.05),
             color = (.1, .3, .6),
             )
@@ -47,7 +47,7 @@
             parent = self,
             relief = None,
             text = TTLocalizer.MinigamePowerMeterTooFast,
-            scale = 0.07,
+            scale = TTLocalizer.MPMtooFast,
             pos = (.15, 0, 0.05),
             color = (.1, .3, .6),
             )
@@ -80,7 +80,7 @@
             range = self.gaugeSize,
             frameSize = (-0.6, 0.6, -0.20, 0.20),
             borderWidth = (0.02, 0.02),
-            scale = .35,
+            scale = TTLocalizer.MPMgaugeA,
             pos = (0, 0, 0),
             frameColor = (0.0,0.0,0.0,0.0), # this must be translucent
             barColor = (0, 1, 0, .6),
@@ -97,7 +97,7 @@
             range = self.gaugeSize,
             frameSize = (-0.6, 0.6, -0.20, 0.20),
             borderWidth = (0.02, 0.02),
-            scale = .35,
+            scale = TTLocalizer.MPMgaugeTargetTop,
             pos = (0, 0, 0),
             #frameColor = (.8,.8,.85,1),
             frameColor = (1,1,1,1),
@@ -116,7 +116,7 @@
             frameSize = (-0.6, 0.6, -0.20, 0.20),
             #frameSize = (-0.6, 0.6, -0.05, 0.05),
             borderWidth = (0.02, 0.02),
-            scale = .35,
+            scale = TTLocalizer.MPMgaugeTargetBot,
             pos = (0, 0, 0),
             #pos = (.07, 0, .25),
             frameColor = (1,1,1,0), # this must be translucent
--- src/minigame/MinigameRulesPanel.py	1 Jun 2004 19:32:18 -0000	1.18
+++ src/minigame/MinigameRulesPanel.py	20 Jan 2005 02:41:16 -0000	1.18.6.1
@@ -71,7 +71,7 @@
             text = TTLocalizer.MinigameRulesPanelPlay,
             text_fg = (1,1,1,1),
             text_pos = (0,-0.02, 0),
-            text_scale = 0.055,
+            text_scale = TTLocalizer.MRPplayButton,
             pos = (1.0025, 0, -0.203),
             scale = 1.05,
             command = self.playCallback,
--- src/minigame/Purchase.py	10 Jun 2004 01:29:47 -0000	1.133
+++ src/minigame/Purchase.py	17 Nov 2005 21:58:13 -0000	1.133.6.1
@@ -674,7 +674,7 @@
             parent = self,
             relief = None,
             text = "",
-            text_scale = 0.08,
+            text_scale = TTLocalizer.PstatusLabel,
             text_wordwrap = 7.5,
             text_fg = (0.05, 0.14, 0.4, 1),
             text_pos = (0.1,0,0),
--- src/minigame/PurchaseBase.py	1 Jun 2004 19:32:18 -0000	1.14
+++ src/minigame/PurchaseBase.py	15 Jul 2005 19:00:25 -0000	1.14.6.2
@@ -87,7 +87,7 @@
             relief = None,
             pos = (-0.25, 0, 0.625),
             text = (TTLocalizer.GagShopYouHave % (self.toon.getMoney())),
-            text_scale = 0.08,
+            text_scale = TTLocalizer.PBstatusLabel,
             text_fg = (0.05, 0.14, 0.4, 1),
             )
         
--- src/pets/DistributedPetAI.py	6 Nov 2004 00:53:58 -0000	1.135
+++ src/pets/DistributedPetAI.py	13 Oct 2004 01:38:45 -0000	1.133
@@ -88,7 +88,7 @@
         self.__generateDistMoodFuncs()
 
         self.busy = 0
-
+        
         # to set walking speed, etc.
         self.gaitFSM = ClassicFSM.ClassicFSM(
             'petGaitFSM',
--- src/pets/PetAvatarPanel.py	8 Dec 2004 03:04:31 -0000	1.38
+++ src/pets/PetAvatarPanel.py	28 Mar 2006 07:27:37 -0000	1.37.2.4
@@ -23,7 +23,6 @@
     """
 
     notify = directNotify.newCategory("PetAvatarPanel")
-    notify.setDebug(True)
 
     def __init__(self, avatar):
         """__init__(self)"""
@@ -46,7 +45,7 @@
 
         base.panel = self
 
-        gui = loader.loadModelOnce("phase_4/models/gui/PetControlPannel")
+        gui = loader.loadModelOnce("phase_3.5/models/gui/PetControlPannel")
         guiScale = 0.116
         guiPos = (1.12, 0, 0.30)
         self.frame = DirectFrame(
@@ -82,7 +81,7 @@
                 image3_color = disabledImageColor,
                 relief = None,
                 text = TTLocalizer.PetPanelFeed,
-                text_scale = 0.5,
+                text_scale = TTLocalizer.PAPfeed,
                 text0_fg = text0Color,
                 text1_fg = text1Color,
                 text2_fg = text2Color,
@@ -111,7 +110,7 @@
                 text1_fg = text1Color,
                 text2_fg = text2Color,
                 text3_fg = text3Color,
-                text_scale = 0.5,
+                text_scale = TTLocalizer.PAPcall,
                 text_pos = (-0.5,1.3),
                 text_align = TextNode.ALeft,
                 command = self.__handleCall,
@@ -134,7 +133,7 @@
                 text1_fg = text1Color,
                 text2_fg = text2Color,
                 text3_fg = text3Color,
-                text_scale = 0.5,
+                text_scale = TTLocalizer.PAPscratch,
                 text_pos = (-0.5,2.05),
                 text_align = TextNode.ALeft,
                 command = self.__handleScratch,
@@ -156,7 +155,7 @@
                         TTLocalizer.PetPanelOwner, ""),
                 text_fg = text2Color,
                 text_shadow = (0, 0, 0, 1),
-                text_scale = 0.35,
+                text_scale = TTLocalizer.PAPowner,
                 text_pos = (0.3,1.1),
                 text_align = TextNode.ACenter,
                 command = self.__handleToOwner,
@@ -401,13 +400,13 @@
         # Put the avatar's 'state' (biggest need)
         self.stateLabel = DirectLabel(
                 parent = self.frame,
-                pos = (0.7, 0, 3.5),
+                pos = TTLocalizer.PAPstateLabelPos,
                 relief = None,
                 text = "",
                 text_font = avatar.getFont(),
                 text_fg = Vec4(0,0,0,1),
-                text_scale = 0.4,
-                text_wordwrap = 7.5,
+                text_scale = TTLocalizer.PAPstateLabel,
+                text_wordwrap = TTLocalizer.PAPstateLabelwordwrap,
                 text_shadow = (1, 1, 1, 1),
                 )
         
--- src/pets/PetTutorial.py	2 Sep 2004 23:59:18 -0000	1.1
+++ src/pets/PetTutorial.py	1 May 2008 22:29:25 -0000	1.1.6.4
@@ -33,7 +33,7 @@
                                  text = "",
                                  text_pos = (0.0, 0.32),
                                  text_fg = (1, 0, 0, 1),
-                                 text_scale = 0.13,
+                                 text_scale = TTLocalizer.PTtitle,
                                  text_font = ToontownGlobals.getSignFont(),
                                  #text_shadow = (1, 1, 1, 1),
                                  )
@@ -116,8 +116,10 @@
 
     def enterPage1(self, *args):
         self.title['text'] = TTLocalizer.PetTutorialTitle1,
+        self.title['text_scale'] = TTLocalizer.PTtitleScale1
         self['text'] = TTLocalizer.PetTutorialPage1
-        self['text_pos'] = (0.15, 0.13)
+        self['text_pos'] = TTLocalizer.PTpage1Pos
+        self['text_align'] = TTLocalizer.getPetGuiAlign()
         self['text_wordwrap'] = 16.5
         self.bPrev['state'] = DISABLED
         self.iPage1.show()
@@ -128,8 +130,10 @@
 
     def enterPage2(self, *args):
         self.title['text'] = TTLocalizer.PetTutorialTitle2,
+        self.title['text_scale'] = TTLocalizer.PTtitleScale2
         self['text'] = TTLocalizer.PetTutorialPage2
-        self['text_pos'] = (-0.27, 0.16)
+        self['text_pos'] = TTLocalizer.PTpage2Pos
+        self['text_align'] = TTLocalizer.getPetGuiAlign()
         self['text_wordwrap'] = 13.5
         self.iPage2.show()
 
@@ -138,8 +142,10 @@
 
     def enterPage3(self, *args):
         self.title['text'] = TTLocalizer.PetTutorialTitle3,
+        self.title['text_scale'] = TTLocalizer.PTtitleScale3
         self['text'] = TTLocalizer.PetTutorialPage3
-        self['text_pos'] = (0.15, 0.13)
+        self['text_pos'] = TTLocalizer.PTpage3Pos
+        self['text_align'] = TTLocalizer.getPetGuiAlign()
         self['text_wordwrap'] = 16.5
         self.bQuit.show()
         self.bNext['state'] = DISABLED
@@ -153,6 +159,3 @@
     def __handleQuit(self):
         base.localAvatar.b_setPetTutorialDone(True)
         messenger.send(self.doneEvent)
-
-
-        
--- src/pets/PetshopGUI.py	26 Aug 2004 00:34:57 -0000	1.19
+++ src/pets/PetshopGUI.py	30 Sep 2005 22:15:59 -0000	1.19.6.5
@@ -38,7 +38,6 @@
         notify = DirectNotifyGlobal.directNotify.newCategory("GoHomeDlg")
 
         def __init__(self, doneEvent):
-
             # initialize our base class.
             DirectFrame.__init__(self,
                                  pos = (0.0, 0.0, 0.0),
@@ -71,7 +71,7 @@
                                      pos = (-0.15, 0.0, -0.1),
                                      command = (lambda: messenger.send(doneEvent, [1])),
                                      )
- 
+
             self.bNo = DirectButton(self,
                                     image = (buttons.find('**/CloseBtn_UP'),
                                              buttons.find('**/CloseBtn_DN'),
@@ -126,8 +125,10 @@
             self.checkNames()
             self.letters = []
             for name in self.allNames:
-                if not (name[0] in self.letters):
-                    self.letters += name[0]
+                if not (name[0:TTLocalizer.PGUIcharLength] in self.letters):
+                    self.letters.append(name[0:TTLocalizer.PGUIcharLength])
+            # test!
+            base.psg = self
             self.curLetter = self.letters[0]
             self.curNames = []
             self.curName = ""
@@ -185,7 +186,7 @@
                 scale = self.guiScale,
                 text = TTLocalizer.PetshopAdopt,
                 text_pos = (3.3, -5.7),
-                text_scale = 0.8,
+                text_scale = TTLocalizer.PGUIadoptSubmit,
                 text_fg = text0Color,
                 pressEffect = False,
                 command = (lambda: messenger.send(doneEvent, [self.ng.returnUniqueID(self.curName)])),
@@ -206,7 +207,7 @@
                 geom = cancelIcon,
                 scale = modelScale,
                 pressEffect = False,
-                command = ( lambda: messenger.send(doneEvent, [-1]) ), 
+                command = (lambda: messenger.send(doneEvent, [-1])), 
                 )
 
             # Start with a Random Name
@@ -230,7 +231,7 @@
         def rebuildNameList(self):
             self.curNames = []
             for name in self.allNames:
-                if name[0] == self.curLetter:
+                if name[0:TTLocalizer.PGUIcharLength] == self.curLetter:
                     self.curNames += [name]
 
             if self.nameList:
@@ -245,7 +246,7 @@
                 )
             
         def updateNameText(self):
-                self.nameResult['text'] = self.curName
+            self.nameResult['text'] = self.curName
             
         def nameClickedOn(self, listType, index):
             """If a name in one of the scrolled lists is clicked on,
@@ -334,7 +335,7 @@
 
             numNames = len(self.allNames)
             self.curName = self.allNames[random.randrange(numNames)]
-            self.curLetter = self.curName[0]
+            self.curLetter = self.curName[0:TTLocalizer.PGUIcharLength]
             self.rebuildNameList()
             self.updateNameText()
             self.alphabetList.scrollTo(self.letters.index(self.curLetter))
@@ -356,7 +357,7 @@
                                  )
             self.initialiseoptions(PetshopGUI.MainMenuDlg)
             
-            textScale = 1
+            textScale =  TTLocalizer.PGUItextScale
 
             # Init buttons
             sellFishImageList = (model.find('**/SellButtonUp'),
@@ -385,7 +386,7 @@
                 geom = XImageList,
                 image = cancelImageList,
                 text = ("", TTLocalizer.PetshopCancel),
-                text_pos = (-3.3, 2.95),
+                text_pos = TTLocalizer.PGUIpetshopCancelPos,
                 text_scale = 0.8,
                 pressEffect = False,
                 command = ( lambda: messenger.send(doneEvent, [0]) ), 
@@ -557,7 +558,7 @@
                                      pos = modelPos,
                                      text = TTLocalizer.PetshopReturnConfirm % avatar.getName(),
                                      text_wordwrap = 12,
-                                     text_scale = .07,
+                                     text_scale = TTLocalizer.PGUIreturnConfirm,
                                      text_pos = (0, 0.45),
                                      text_fg = text2Color,
                                      )
@@ -633,7 +634,7 @@
                                  pos = modelPos,
                                  text = TTLocalizer.PetshopChooserTitle,
                                  text_wordwrap = 26,
-                                 text_scale = .10,
+                                 text_scale = TTLocalizer.PGUIchooserTitle,
                                  text_fg = Vec4(0.36, 0.94, 0.93, 1),
                                  text_pos = (0, 1.58),
                                  )
@@ -692,8 +693,8 @@
                 image3_color = disabledImageColor,
                 scale = modelScale,
                 text = TTLocalizer.PetshopAdopt,
-                text_scale = 0.6,
-                text_pos = (-0.21,1.05),
+                text_scale = TTLocalizer.PGUIpetsopAdopt,
+                text_pos = TTLocalizer.PGUIpetsopAdoptPos,
                 text0_fg = text0Color,
                 text1_fg = text1Color,
                 text2_fg = text2Color,
@@ -813,8 +814,8 @@
                 scale = 0.05,
                 text = self.petDesc[self.curPet],
                 text_align = TextNode.ALeft,
-                text_wordwrap = 14,
-                text_scale = 0.9,
+                text_wordwrap = TTLocalizer.PGUIwordwrap,
+                text_scale = TTLocalizer.PGUIdescLabel,
                 )
 
             if self.petCost[self.curPet] > base.localAvatar.getTotalMoney():
--- src/publish/AIcopyfiles	4 Jun 2004 01:24:13 -0000	1.3
+++ src/publish/AIcopyfiles	14 Feb 2007 09:40:42 -0000	1.5
@@ -29,9 +29,31 @@
 	srcDir=`dirname ${moduleDir}`
         packageDir=`dirname ${srcDir}`
 
-        moduleDir=`basename ${moduleDir}`
-        srcDir=`basename ${srcDir}`
-        packageDir=`basename ${packageDir}`
+        # check to see there is sub pkg dir
+
+        if [ `basename ${packageDir}` != src ]; then
+
+             # subdir doesn't exist, proceed as before
+
+             moduleDir=`basename ${moduleDir}`
+             srcDir=`basename ${srcDir}`
+             packageDir=`basename ${packageDir}`
+
+        else
+
+             # subdir exists, need to use extra variable and
+             # create new moduleDir 
+
+             moduleSubDir=${moduleDir}
+             moduleDir=`dirname ${moduleSubDir}`
+             srcDir=`dirname ${moduleDir}`
+             packageDir=`dirname ${srcDir}`
+
+             moduleDir=`basename ${moduleDir}`/`basename ${moduleSubDir}`
+             srcDir=`basename ${srcDir}`
+             packageDir=`basename ${packageDir}`
+        fi
+
         
         if [ `basename ${file} .py` != `basename ${file}` ]; then
             # The file is a Python file.  Is it in a src directory?
--- src/publish/AIprintfiles-unix-installed	12 Aug 2004 01:55:33 -0000	1.24
+++ src/publish/AIprintfiles-unix-installed	2 Jun 2008 23:55:31 -0000	1.24.6.2
@@ -101,6 +101,7 @@
 echo otp/src/configfiles/otp.dc
 echo toontown/src/configfiles/download.par
 echo toontown/src/configfiles/PetNameMasterEnglish.txt
+echo toontown/src/configfiles/PetNameMaster_${LANGUAGE}.txt
 
 # Generated code for libpanda
 AIprintlib $INSTALL/lib/pandac libpanda
@@ -132,6 +132,7 @@
 AIprintdir otp/src/uberdog .py
 
 AIprintdir toontown/src/ai .py
+AIprintdir toontown/src/ai/$LANGUAGE .py
 AIprintdir toontown/src/avatar .py
 AIprintdir toontown/src/battle .py
 AIprintdir toontown/src/building .py
@@ -149,6 +151,7 @@
 AIprintdir toontown/src/suit .py
 AIprintdir toontown/src/toon .py
 AIprintdir toontown/src/toonbase .py
+AIprintdir toontown/src/toonbase/$LANGUAGE .py
 AIprintdir toontown/src/toontowngui .py
 AIprintdir toontown/src/tutorial .py
 
--- src/publish/Scrubber.py	11 Aug 2004 01:23:22 -0000	1.81
+++ src/publish/Scrubber.py	20 May 2008 03:10:33 -0000	1.84.8.3
@@ -241,6 +241,7 @@
         self.contentDir = Filename(self.installDir, Filename('content/'))
 
         self.phase2 = re.compile('phase_2.mf')
+        self.Installer = 'InstallLauncher.exe'
 
         if command == 'scrub':
             self.doScrubCommand()
@@ -371,10 +385,10 @@
 
         # The filelist is a developer maintained text file listing all the files
         # to publish, in each phase.
-        self.filelistPath = Filename.expandFrom('$TOONTOWN/src/publish/filelist')
-        self.notify.info('init: Reading filelist: ' + self.filelistPath.cStr())
-        self.filelist = open(self.filelistPath.toOsSpecific())
+        self.notify.info('init: Reading filelist: ' + filelistPath.cStr())
+        self.filelist = open(filelistPath.toOsSpecific())
         self.lines = self.filelist.readlines()
+        self.filelist.close()
 
         # Initialize some placeholder variables
         self.currentMfname = None
@@ -611,7 +625,7 @@
             self.notify.debug('File has not changed.')
             return self.getHighestVersion(persistFilename)
         else:
-            self.notify.info('File has changed. Installing new version.')
+            self.notify.info('%s has changed. Installing new version.' % (persistFilename.getBasename()))
             # Generate the patch file and then rename the new file
             # into place.
             if (self.phase2.search(sourceFilename.cStr()) == None):
@@ -695,11 +709,16 @@
         basename = sourceFilename.getBasenameWoExtension()
         
         if len(lineList) > 2 and lineList[2]:
-            moduleName = '%s.%s' % (lineList[2], basename)
+            moduleName = '%s.%s' % (Filename.expandFrom(lineList[2]).cStr(), basename)
+            #self.notify.info("parsed moduleName:%s" % moduleName)
         else:
             moduleName = basename
+
+        if sourceFilename.exists():
+            self.currentPyList.append((sourceFilename.toOsSpecific(), moduleName))
+        else:
+            self.notify.info("warn: %s does not exist!" % (sourceFilename.cStr()))
             
-        self.currentPyList.append((sourceFilename.toOsSpecific(), moduleName))
 
     def parseFile(self, lineList):
         extractFlag = int(lineList[1])
@@ -705,7 +706,7 @@
     def parseSqueeze(self, lineList):
         sourceFilename = Filename.expandFrom(lineList[1])
         basename = sourceFilename.getBasenameWoExtension()
-        
+
         if len(lineList) > 2 and lineList[2]:
             moduleName = '%s.%s' % (Filename.expandFrom(lineList[2]).cStr(), basename)
             #self.notify.info("parsed moduleName:%s" % moduleName)
@@ -716,9 +735,10 @@
         if (sourceFilename.getExtension() == 'pyo'):
             pyfile = Filename(sourceFilename)
             pyfile.setExtension('py')
-            py_compile.compile(pyfile.toOsSpecific(),
-                               sourceFilename.toOsSpecific(),
-                               sourceFilename.getBasename())
+            if pyfile.exists():
+                py_compile.compile(pyfile.toOsSpecific(),
+                                   sourceFilename.toOsSpecific(),
+                                   sourceFilename.getBasename())
 
         # The relative path where we want to put this file
         dir = Filename.expandFrom(lineList[3])
@@ -753,8 +773,9 @@
             compressLevel = 6
 
         # Add the actual file contents to the actual multifile
-        self.currentMfile.addSubfile(relInstallFilename.getFullpath(),
-                                     sourceFilename, compressLevel)
+        if self.currentMfile.addSubfile(relInstallFilename.getFullpath(),
+                sourceFilename, compressLevel) == "":
+          self.notify.info("warn: %s does not exist!" % (sourceFilename.cStr()))
 
         # Should we extract this file individually?
         if extractFlag >= 1:
@@ -799,10 +820,15 @@
         # No need to write the list of hashes for that file, because launcherFileDb.ddb is now
         # copied to the download directory.
 
-        self.notify.info('------just creating a InstallLauncher.exe entry in launcherFileDb')
-        self.launcherFile.write('InstallLauncher.exe' + '\n')
+        self.notify.info('Just creating a '+self.Installer+' entry in launcherFileDb')
+        self.launcherFile.write(self.Installer + '\n')
 
     def parseDirCallback(self, args, dirname, filenames):
+        dirnameBase = os.path.split(dirname)[1]
+        if dirnameBase == 'CVS':
+            # Ignore CVS directories.
+            return
+        
         # Parse out the args
         installDir, extractFlag = args
         for filename in filenames:
@@ -1022,7 +1048,7 @@
         patchFile.build(persistFilename, newFilename, patchFilename)
         if (not relInstallFilename):
             # Copy InstallLauncher.exe and its patches in the installDir
-            installName = Filename(self.installDir, Filename('InstallLauncher.exe'))
+            installName = Filename(self.installDir, Filename(self.Installer))
             self.copyFile(newFilename, persistFilename)
             self.copyFile(newFilename, installName)
             # copy the patch to publish directory
@@ -1036,9 +1062,10 @@
 
 
     def copyFile(self, fromFilename, toFilename):
-        self.notify.debug('Copying %s to %s' % (fromFilename.cStr(), toFilename.cStr()))
-        shutil.copy(fromFilename.toOsSpecific(), toFilename.toOsSpecific())
-        os.system('chmod 644 "%s"' % toFilename.toOsSpecific())
+        if fromFilename.cStr() != toFilename.cStr():
+            self.notify.debug('Copying %s to %s' % (fromFilename.cStr(), toFilename.cStr()))
+            shutil.copy(fromFilename.toOsSpecific(), toFilename.toOsSpecific())
+            os.system('chmod 644 "%s"' % toFilename.toOsSpecific())
 
     def moveFile(self, fromFilename, toFilename):
         self.notify.debug('Moving %s to %s' % (fromFilename.cStr(), toFilename.cStr()))
@@ -1114,12 +1141,12 @@
     def WiseScrubber(self):
         if not cdmode:
             webLdbName = Filename(self.persistDir, Filename('launcherFileDb'))
-            wiseInstallFile = Filename.expandFrom('$TOONTOWN/src/launcher/InstallLauncher.exe')
+            wiseInstallFile = Filename.expandFrom('$TOONTOWN/src/launcher/'+self.Installer)
         else:
             webLdbName = Filename(self.persistDir, Filename('../launcherFileDb'))
-            wiseInstallFile = Filename(self.persistDir, Filename('../InstallLauncher.exe'))
-        oldInstallFile = Filename(self.persistDir, Filename('InstallLauncher.exe'))
-        InstallFilename = Filename(self.installDir, Filename('InstallLauncher.exe'))
+            wiseInstallFile = Filename(self.persistDir, Filename('../'+self.Installer))
+        oldInstallFile = Filename(self.persistDir, Filename(self.Installer))
+        InstallFilename = Filename(self.installDir, Filename(self.Installer))
 
         # write the InstallLauncher file name and its size to progress
         installSize = os.path.getsize(wiseInstallFile.toOsSpecific())
@@ -1158,8 +1185,7 @@
             ddbLine = dbLauncherFile.readline()
             dbLauncherFile.close()
 
-            # in light of 6/15/2004 corrupt launcherFile.ddb,
-            # lets do some sanity checking
+            # lets do some sanity checking for corrupt launcherFile.ddb
             index = 0
             hashCount = 0
             index = ddbLine.find(" ", index)
@@ -1175,16 +1201,18 @@
         # Lookup the line about InstallLauncher, prepend the new md5 at the list of md5's
         #self.notify.info('WiseScrubber: number of lines in launcherdb = ' + `len(lines)`)
 
-        for i in range (0, len(lines)):
-            if (lines[i].find('InstallLauncher.exe') > -1):
+        found_line = -1
+        for i in xrange(len(lines)-1, -1, -1):
+            # faster to start from the end and make sure it's an exact match
+            if (lines[i].find(self.Installer) > -1) and (len(lines[i].rstrip('\n')) == len(self.Installer)):
+                found_line = i
                 # add the new md5 in there
-                lines[i] = 'InstallLauncher.exe ' + md5.asDec() + '\n'
-                #lines[i] = lines[i].replace('InstallLauncher.exe', 'InstallLauncher.exe ' + md5.asDec())
+                lines[i] = self.Installer + ' ' + md5.asDec() + '\n'
                 # add the new md5 in ddbLine as well
                 if isDDB:
                     self.notify.info('WiseScrubber: old hash values--- ' + ddbLine)
-                    ddbLine = ddbLine.replace('InstallLauncher.exe', 'InstallLauncher.exe ' + md5.asDec())
-                break;
+                    ddbLine = ddbLine.replace(self.Installer, self.Installer + ' ' + md5.asDec())
+                break
 
         # open launcherFileDb.ddb for writing
         dbLauncherFilename = Filename(self.persistDir, Filename('launcherFileDb.ddb'))
@@ -1209,9 +1237,9 @@
                     index = ddbLine.find(" ", index+1)
                     index = ddbLine.find(" ", index+1)
                     index = ddbLine.find(" ", index+1)
-                self.notify.info('---------truncating ' + ddbLine)
+                self.notify.info('truncating ' + ddbLine)
                 ddbLine = ddbLine[0:index] + '\n'
-                self.notify.info('---------to ' + ddbLine)
+                self.notify.info('to ' + ddbLine)
         else:
             self.notify.info('WiseScrubber: copying new version.')
             # just copy the newly created InstallLauncher.exe to persist and install directory
@@ -1231,4 +1259,3 @@
         newLauncherFile.close()
 
 scrubber = Scrubber()
-
--- src/publish/buildAIcvsfiles	18 Aug 2004 04:05:47 -0000	1.5
+++ src/publish/buildAIcvsfiles	22 Feb 2007 04:24:37 -0000	1.10
@@ -11,13 +11,13 @@
 # First, make sure our CVS directory is up-to-date.
 echo "cleaning and CVS updating $destdir"
 cd $destdir || exit
-find . -name CVS -prune -o -type d -mindepth 1 -maxdepth 1 -exec rm -rf {} \;
+find . -mindepth 1 -maxdepth 1 -name CVS -prune -o -type d -exec rm -rf {} \;
 find . -name '.#*' -exec rm -f {} \;
-cvs update -Pd || exit
+cvs update -Pd $* || exit
 
 # Then completely empty the CVS directory of ordinary files (leaving
 # the CVS stuff behind).
-find . -name CVS -prune -o -type f -a \! -name '*.buildings' -exec rm -f {} \;
+find . -name CVS -prune -o -type f -a \! -name '*.buildings' -a \! -name autorestart.fc4 -a \! -name badwordpy.so -exec rm -f {} \;
 
 # There should be just the directory "CVS" (and "." and "..") remaining.
 #numfiles=`\ls -a | wc -l`
@@ -29,3 +29,8 @@
 # Now populate it with the new set of files.
 echo "populating $destdir with new files"
 (cd $srcdir && AIcopyfiles ${debug_state} ${destdir}) || exit
+
+pushd ./
+cd $srcdir
+cp -f toontown/src/configfiles/${LANGUAGE}PRC ${destdir}/language.prc
+popd
--- src/publish/commitAIcvsfiles	21 Aug 2004 00:32:48 -0000	1.11
+++ src/publish/commitAIcvsfiles	24 May 2007 03:03:56 -0000	1.14
@@ -22,10 +22,10 @@
 $CVS add `find . -name CVS -prune -o -type d -mindepth 1 -print` 2>&1 | $teenew
 
 # CVS add the text files
-$CVS add `find . -name '*.py' -o -name '*.dna' -o -name '*.dc' -o -name '*.par' -o -name Configrc` 2>&1 | $teeadd
+$CVS add `find . -name '*.py' -o -name '*.dna' -o -name '*.dc' -o -name '*.par' -o -name *.prc` 2>&1 | $teeadd
 
 # CVS add the binary files
-$CVS add -kb *.so.* autorestart 2>&1 | $teeadd
+$CVS add -kb *.so *.so.* autorestart autorestart.fc4 2>&1 | $teeadd
 
 # CVS remove anything that's not there anymore.
 $CVS remove 2>&1 | $teeadd || exit
--- src/publish/filelist	3 Dec 2004 02:09:09 -0000	1.302.2.1
+++ src/publish/filelist	20 May 2008 03:09:02 -0000	1.302.4.14
@@ -84,14 +128,15 @@
 squeeze $DIRECT/src/showbase/PythonUtil.py direct.showbase
 squeeze $DIRECT/src/task/Task.py direct.task
 squeeze $DIRECT/src/task/TaskManagerGlobal.py direct.task
-squeeze $OTP/src/otpbase/OTPLocalizer.py otp.otpbase
-#squeeze $TOONTOWN/src/launcher/Launcher.py toontown.launcher
+squeeze $TOONTOWN/src/launcher/Launcher.py toontown.launcher
+squeeze $TOONTOWN/src/toonbase/TTLocalizer.py toontown.toonbase
+squeeze $TOONTOWN/src/launcher/win32shell.py
 
 # NOTE: This should be conditional per language
-squeeze $OTP/src/otpbase/OTPLocalizerEnglish.py otp.otpbase
-squeeze $TOONTOWN/src/toonbase/TTLocalizer.py toontown.toonbase
 squeeze $TOONTOWN/src/toonbase/TTLocalizerEnglish.py toontown.toonbase
-#squeeze $TOONTOWN/src/toonbase/TTLocalizerCastillian.py toontown.toonbase
+squeeze $TOONTOWN/src/toonbase/TTLocalizerEnglishProperty.py toontown.toonbase
+squeeze $TOONTOWN/src/toonbase/${LANGUAGE}/TTLocalizer.py toontown.toonbase.${LANGUAGE}
+squeeze $TOONTOWN/src/toonbase/${LANGUAGE}/TTLocalizer_Property.py toontown.toonbase.${LANGUAGE}
 
 finalize_squeeze 2 pyz/Phase2.pyz toplevel toontown.launcher.Launcher
 
@@ -116,15 +161,16 @@
 
 file 2 $OTP/lib/libotp.dll .
 
-# MilesWin
+# MilesWin 1_x_14_branch and up
 file 2 $WINTOOLS/sdk/rad/MilesWin/redist/mss32.dll .
 file 2 $WINTOOLS/sdk/rad/MilesWin/redist/mssmp3.asi .
-# Miles 6.5
-# file 2 $WINTOOLS/sdk/rad/Miles6.5/redist/win32/Mss32.dll .
-# file 2 $WINTOOLS/sdk/rad/Miles6.5/redist/win32/mssmp3.asi .
-# Miles 6.1
-# file 2 $WINTOOLS/sdk/rad/Miles6/redist/win32/Mss32.dll .
-# file 2 $WINTOOLS/sdk/rad/Miles6/redist/win32/Mp3dec.asi .
+# Miles 6.5 (used in 1_4_8_branch)
+#file 2 $WINTOOLS/sdk/rad/Miles6.5/redist/win32/Mss32.dll .
+#file 2 $WINTOOLS/sdk/rad/Miles6.5/redist/win32/mssmp3.asi .
+# Miles 6.1 1_0_0_37 and up
+#file 2 $WINTOOLS/sdk/rad/Miles6/redist/win32/Mss32.dll .
+#file 2 $WINTOOLS/sdk/rad/Miles6/redist/win32/Mp3dec.asi .
+
 file 2 $DIRECT/lib/libdirect.dll .
 file 2 $TOONTOWN/lib/libtoontown.dll .
 
@@ -333,7 +383,10 @@
 squeeze $OTP/src/otpbase/OTPBase.py otp.otpbase
 squeeze $OTP/src/otpbase/OTPGlobals.py otp.otpbase
 squeeze $OTP/src/otpbase/OTPLocalizer.py otp.otpbase
+squeeze $OTP/src/otpbase/${LANGUAGE}/OTPLocalizer.py otp.otpbase.${LANGUAGE}
+squeeze $OTP/src/otpbase/${LANGUAGE}/OTPLocalizer_Property.py otp.otpbase.${LANGUAGE}
 squeeze $OTP/src/otpbase/OTPLocalizerEnglish.py otp.otpbase
+squeeze $OTP/src/otpbase/OTPLocalizerEnglishProperty.py otp.otpbase
 squeeze $OTP/src/otpbase/OTPTimer.py otp.otpbase
 
 squeeze $OTP/src/otpgui/OTPDialog.py otp.otpgui
@@ -657,9 +715,10 @@
 squeeze $TOONTOWN/src/makeatoon/NameShop.py toontown.makeatoon
 
 # NOTE: This should be conditional per language
-#file 0 $TOONTOWN/src/configfiles/NameMasterCastillian.txt phase_3/etc
 file 0 $TOONTOWN/src/configfiles/NameMasterEnglish.txt phase_3/etc
+file 0 $TOONTOWN/src/configfiles/NameMaster_${LANGUAGE}.txt phase_3/etc
 file 0 $TOONTOWN/src/configfiles/PetNameMasterEnglish.txt phase_3/etc
+file 0 $TOONTOWN/src/configfiles/PetNameMaster_${LANGUAGE}.txt phase_3/etc
 
 squeeze $TOONTOWN/src/minigame/ArrowKeys.py toontown.minigame
 squeeze $TOONTOWN/src/minigame/BuildMazeData.py toontown.minigame
--- src/publish/publish	30 Nov 2004 03:16:42 -0000	1.125
+++ src/publish/publish	16 May 2008 00:05:49 -0000	1.128.2.7
@@ -39,11 +39,11 @@
 # parentheses for each option (without using the parentheses).
 #
 # Usage:
-# 
+#
 # publish [options]
-# 
+#
 #   Options:
-# 
+#
 #    -m mode
 #        Specifies the publish mode.  This should be one of "live",
 #        "qa", or "test"; if omitted, the default is "test".  This
@@ -66,19 +66,19 @@
 #        This ensures you are generating patches against the
 #        most-recently published version, eliminating intervening
 #        patches you might have generated during test publishes.
-# 
+#
 #    -r tag
 #        Specifies a CVS tag to use to update all source trees (dtool,
 #        panda, direct, toontown).  If this is omitted, the trees are
 #        not updated prior to running the script.  Omitting this also
 #        implicitly omits the 'b' (build) step from -o.
-# 
+#
 #    -s series
 #        Specifies the series on ttown to publish to; e.g. 1400, 2000,
 #        3000, etc.  If this is omitted, the publish is built in the
 #        staging directory C:\publish-web, but is not copied to ttown.
 #        If you specify series 1400, you must also specify -m live.
-# 
+#
 #    -u username
 #        Specifies the username on ttown to use when copying the files
 #        to the appropriate series.  If this is omitted, the
@@ -93,22 +93,22 @@
 #        Specifies the name of the temporary staging web directory
 #        that files are copied to in a ready-to-install state, before
 #        they are scp'ed to ttown.  The default is "C:\publish-web".
-# 
+#
 #    -l language
 #        Specifies the language to publish in
 #        Default is "english"
-# 
-#    -d 
+#
+#    -d
 #        If this is specified, a debug publish will be generated,
 #        leaving assertions in the Python code.  This is unrelated to
 #        building a debug version of Panda, which is controlled by
 #        your Config.pp settings and has nothing to do with this
 #        script.
 #
-#    -R  [CD version patch rollup number] 
-#    
+#    -R  [CD version patch rollup number]
+#
 #    -B  Make one more build pass during publish to pick up any missed changes.
-# 
+#
 #ENDCOMMENT
 
 mode=test
@@ -196,10 +196,10 @@
   activex_optimize=4
 fi
 
-if [ -z "$PPREMAKE_PLATFORM" ]; then    
+if [ -z "$PPREMAKE_PLATFORM" ]; then
   PPREMAKE_PLATFORM="Cygwin"
   export PPREMAKE_PLATFORM
-fi 
+fi
 
 # Determine the language to build in
 # This gets set for Configrc.cxx to read
@@ -211,6 +211,10 @@
   export USE_JAPANESE=1
 elif [ "$language" = "german" ]; then
   export USE_GERMAN=1
+elif [ "$language" = "portuguese" ]; then
+  export USE_PORTUGUESE=1
+elif [ "$language" = "french" ]; then
+  export USE_FRENCH=1
 else
   echo 'Invalid language "'$language'".'
   exit 1
@@ -314,7 +318,9 @@
 test "$DIRECT" || { echo 'Not attached to DIRECT'; exit; }
 test "$OTP" || { echo 'Not attached to OTP'; exit; }
 test "$TOONTOWN" || { echo 'Not attached to TOONTOWN'; exit; }
-test "$TTMODELS" || { echo 'Not attached to TTMODELS'; exit; }
+if [ ! $perform_x ]; then
+  test "$TTMODELS" || { echo 'Not attached to TTMODELS'; exit; }
+fi
 if [ $cvs_persist ]; then
   test "$TTPUBLISH" || { echo 'Not attached to TTPUBLISH'; exit; }
 fi
@@ -350,7 +356,7 @@
   test "$cvs_tag" && cvs update -r "$cvs_tag" || exit
   ppremake || exit
   make install || exit
-  
+
   cd "$TOONTOWN" || exit
   test "$cvs_tag" && cvs update -r "$cvs_tag" || exit
   ppremake || exit
@@ -367,34 +373,34 @@
 if [ -z $cd_rollup ]; then
   # CD patchset doesn't need an activeX
   if [ $perform_x ]; then
-  # testserver TT/installer be rebuilt with USE_TESTSERVER envvar build flag.
-  # need to make sure it's up-to-date.
-  
-  echo "Rebuilding Toontown ActiveX installer"
-  installerDir="$TOONTOWN"/src/installer  
-  cd "$installerDir" || exit  
-  #  test "$cvs_tag" && cvs update -r "$cvs_tag" || exit
-
-  # We have to temporarily force the optimize level to a particular
-  # value to satisfy the expectations of publish.pl (the activeX
-  # builder script).
-  export PANDA_OPTIMIZE=$activex_optimize
-  export WANT_INSTALLER=1
-  ppremake installer || exit
-  make install || exit
-  echo "Creating signed Toontown ActiveX installer .cab package."
-  ./publish.pl $installerargs $language || exit
+    # testserver TT/installer be rebuilt with USE_TESTSERVER envvar build flag.
+    # need to make sure it's up-to-date.
 
-  # Now restore the installer directory to whatever optimize it
-  # should be set to normally.
-  unset PANDA_OPTIMIZE
-  unset WANT_INSTALLER
-  ppremake installer || exit
+    echo "Rebuilding Toontown ActiveX installer"
+    installerDir="$TOONTOWN"/src/installer
+    cd "$installerDir" || exit
+    #  test "$cvs_tag" && cvs update -r "$cvs_tag" || exit
+
+    # We have to temporarily force the optimize level to a particular
+    # value to satisfy the expectations of publish.pl (the activeX
+    # builder script).
+    export PANDA_OPTIMIZE=$activex_optimize
+    export WANT_INSTALLER=1
+    ppremake installer || exit
+    make install || exit
+    echo "Creating signed Toontown ActiveX installer .cab package."
+    ./publish.pl $installerargs $language || exit
+
+    # Now restore the installer directory to whatever optimize it
+    # should be set to normally.
+    unset PANDA_OPTIMIZE
+    unset WANT_INSTALLER
+    ppremake installer || exit
   fi
 fi
 
 if [ $perform_p ]; then
-  
+
   # Clean out the previous persist directory if the user so requested.
   if [ $clean_persist ]; then
     if [ $cvs_persist ]; then
@@ -406,10 +412,10 @@
     cd "$persist" && rm -rf *
   elif [ $cvs_clean_persist ]; then
     if [ -z "$cvs_persist" ]; then
-      echo "You may only specify -C in conjunction with -m live." 
+      echo "You may only specify -C in conjunction with -m live."
       exit 1
     fi
-  
+
     echo "Restoring persist directory."
     # Completely blow away the subdirectory in the ttpublish tree, and
     # check it out again.  We don't want to have any locally-modified
@@ -421,13 +427,13 @@
     rm -rf "$base"
 #    cvs update -dP -A "$base" || exit	# this doesn't allow merging branches
     cvs update -dP "$base" || exit
-  
+
   else
     # Don't empty the tree, but do clean up junk that may have been left
     # over from past runs.
-    cd "$persist" && rm -rf pyz mftemp toplevel
+    cd "$persist" && rm -rf pyz mftemp toplevel || exit
   fi
-  
+
   if [ $clean_persist ]; then
     echo "NOT generating patch files."
   else
@@ -510,19 +516,20 @@
       fi
   fi
 
+# This section is disabled in Vista-compatible ActiveX build universe (for now)
   # Copy in the ActiveX control too.
-  installerDir=$TOONTOWN/src/installer
-  cabFileBase=ttinst
-  if [ "$mode" = "qa" ]; then
-    cabFileBase=tt_test
-  fi
-  if [ $LANGUAGE ]; then
-    cabFileBase=$cabFileBase-$LANGUAGE
-  fi
-  cabFile=$cabFileBase.cab
+  #installerDir=$TOONTOWN/src/installer
+  #cabFileBase=ttinst
+  #if [ "$mode" = "qa" ]; then
+  #  cabFileBase=tt_test
+  #fi
+  #if [ ! "$language" = "english" ]; then
+  #  cabFileBase=$cabFileBase-$language
+  #fi
+  #cabFile=$cabFileBase.cab
 
-  cp "$installerDir/$activeXBuildDir/$cabFile" $installDir || exit
-  chmod 644 $installDir/$cabFile
+  #cp "$installerDir/$activeXBuildDir/$cabFile" $installDir || exit
+  #chmod 644 $installDir/$cabFile
 
   # Now copy in InstallLauncher.exe.
   # Scrubber.py does the copy and takes care of its patches
@@ -534,19 +541,39 @@
   # copy installer & patches when doing just straight copy command
   cp $persist/InstallLauncher.exe* $installDir
   chmod 755 $installDir/InstallLauncher.exe
-  chmod 644 $installDir/InstallLauncher.exe.pch*
+  chmod 644 $installDir/InstallLauncher.exe.*pch*
 
   if [ "$ttown_series" ]; then
-    if [ "$ttown_series" = "2100" ]; then       # castillian
-      baseDir=''
+    ul_content() {
+    # $1 = user, $2 = server
+    # $3 = local source path, $4 = remote dest relative path
       echo
-      echo "Cleaning download directory on ttown-$ttown_series."
+      echo "rsync'ing $3 to $1@$2:$4."
+      EXCLUDE='--exclude=*.php --exclude=static/ --exclude="CD_*/" --exclude=*.dmg'
+      $RSYNC $RSYNCFLAGS --delete $EXCLUDE $3 $1@$2:$4 || exit
+    }
+
+    ul_ttmodels() {
+    # Copy over $TTMODELS data for Pets AI
+    #
+    # $1 = user, $2 = server
+    # $3 = local $TTMODELS source path modifier, $4 = remote dest relative path
+      echo
+      echo "rsync'ing \$TTMODELS/${3}/phase_* to $1@$2:$4"
+      EXCLUDE='--exclude=audio/ --exclude=maps/ --exclude=*.ico --exclude=*.cur --exclude=*.ttf'
+      $RSYNC $RSYNCFLAGS --delete-after $EXCLUDE $TTMODELS/${3}phase_* $1@$2:$4 || exit
+    }
+
+    if [ "$ttown_series" = "2100" ]; then       # castillian
+      baseDir='/toontown'
       echo
-      $SSH $ttown_username@ttown "rm -f $baseDir/toontown-$ttown_series/common/$installBase/content/*.pz"
+      echo "Cleaning download directory on ttown2-$ttown_series."
+      $SSH $ttown_username@ttown2 "rm -f $baseDir/$ttown_series/$installBase/content/*.pz; rm -f $baseDir/$ttown_series/common/$installBase/*.pch"
 
-      echo "Copying files to ttown-$ttown_series."
-      cd "$web" || exit
-      $SCP -r $web/* $ttown_username@ttown:$baseDir/toontown-$ttown_series/common/. || exit
+      echo
+      echo "Copying files to ttown2-$ttown_series."
+      #cd "$web" || exit
+      $SCP -r $web/* $ttown_username@ttown2:$baseDir/$ttown_series/. || exit
 
     elif [ "$ttown_series" = "2200" ]; then     # japanese
       baseDir='/toontown'
@@ -557,15 +584,58 @@
 
       echo "Copying files to ttown2-$ttown_series."
       $SCP -r $web/* $ttown_username@ttown2:$baseDir/$ttown_series/common/. || exit
+
+      # Copy over $TTMODELS data for Pets AI
+      #
+      echo
+      echo "Copying $TTMODELS to ttown2"
+      EXCLUDE='--exclude=audio/ --exclude=maps/ --exclude=*.ico --exclude=*.cur'
+      $RSYNC $RSYNCFLAGS --delete-after $EXCLUDE $TTMODELS/phase_* $ttown_username@ttown2:/toontown/2200/ttmodels/
     elif [ "$ttown_series" = "2300" ]; then     # german
       baseDir='/toontown'
       echo
       echo "Cleaning download directory on ttown2-$ttown_series."
       echo
-      $SSH $ttown_username@ttown2 "rm -f $baseDir/$ttown_series/common/$installBase/content/*.pz"
+      $SSH $ttown_username@ttown2 "rm -f $baseDir/$ttown_series/$installBase/content/*.pz"
 
       echo "Copying files to ttown2-$ttown_series."
-      $SCP -r $web/* $ttown_username@ttown2:$baseDir/$ttown_series/common/. || exit
+      $SCP -r $web/download/german/* $ttown_username@ttown2:$baseDir/$ttown_series/download/german || exit
+
+      # Copy over $TTMODELS data for Pets AI
+      #
+      echo
+      echo "Copying $TTMODELS to ttown2"
+      EXCLUDE='--exclude=audio/ --exclude=maps/ --exclude=*.ico --exclude=*.cur'
+      $RSYNC $RSYNCFLAGS --delete-after $EXCLUDE $TTMODELS/phase_* $ttown_username@ttown2:/toontown/2300/ttmodels/
+    elif [ "$ttown_series" = "2400" ]; then     # portuguese
+      baseDir='/toontown'
+      ttown_username=toonbr
+      echo
+      echo "Cleaning download directory on ttown2-$ttown_series."
+      echo
+      $SSH $ttown_username@ttown2 "rm -f $baseDir/$ttown_series/$installBase/content/*.pz"
+
+      echo "Copying files to ttown2-$ttown_series."
+      $SCP -r $web/download/portuguese/* $ttown_username@ttown2:$baseDir/$ttown_series/download/portuguese || exit
+
+      ul_ttmodels "$ttown_username" ttown2 '' "$baseDir/$ttown_series/ttmodels/"
+
+    elif [ "$ttown_series" = "2500" ]; then     # french
+      baseDir='/toontown'
+      echo
+      echo "Cleaning download directory on ttown2-$ttown_series."
+      echo
+      $SSH $ttown_username@ttown2 "rm -f $baseDir/$ttown_series/$installBase/content/*.pz"
+
+      echo "Copying files to ttown2-$ttown_series."
+      $SCP -r $web/download/french/* $ttown_username@ttown2:$baseDir/$ttown_series/download/french || exit
+
+      # Copy over $TTMODELS data for Pets AI
+      #
+      echo
+      echo "Copying $TTMODELS to ttown2"
+      EXCLUDE='--exclude=audio/ --exclude=maps/ --exclude=*.ico --exclude=*.cur'
+      $RSYNC $RSYNCFLAGS --delete-after $EXCLUDE $TTMODELS/phase_* $ttown_username@ttown2:/toontown/2500/ttmodels/
     else                                        # english publish
       baseDir='/toontown/web'
       echo
@@ -574,7 +644,8 @@
 
       echo
       echo "Copying files to ttown2-$ttown_series."
-      $RSYNC $RSYNCFLAGS --delete --exclude='*.php' $web/download $ttown_username@ttown2:$baseDir/toontown-$ttown_series/common/ || exit
+      EXCLUDE='--exclude=*.php --exclude=static/ --exclude="CD_*/"'
+      $RSYNC $RSYNCFLAGS --delete $EXCLUDE $web/download/$language/currentVersion/ $ttown_username@ttown2:$baseDir/toontown-$ttown_series/common/download/$language/currentVersion/ || exit
 
       # Copy over $TTMODELS data for Pets AI
       #
--- src/publish/ttown-build-Config.pp	5 Jun 2004 01:01:44 -0000	1.18
+++ src/publish/ttown-build-Config.pp	31 Oct 2007 00:37:07 -0000	1.19.2.3
@@ -8,9 +8,19 @@
   #define OPTIMIZE 3
 #endif
 
+// use cached distributed compiles
+#define CC ccache distcc i386-redhat-linux-gcc
+#define CXX ccache distcc i386-redhat-linux-g++
+
 #define PYTHON_IPATH /usr/include/python2.2
 #define PYTHON_LPATH /usr/lib/python2.2
-#define INSTALL_PYTHON_SOURCE
+
+// These lines enable building with Mesa, in case that package is
+// actually installed.  This is necessary for the TopToonPics program.
+#define MESA_IPATH /usr/local/mesa/include
+#define MESA_LPATH /usr/local/mesa/lib
+#define MESA_LIBS OSMesa MesaGLU MesaGL
+#define MESA_MGL 1
 
 #define INSTALL_DIR $[PLAYER]/install
 
@@ -34,3 +44,31 @@
 //#define NSPR_LPATH /usr/local/nspr/lib
 //#define NSPR_LIBS nspr4
 //#defer HAVE_NSPR $[libtest $[NSPR_LPATH],$[NSPR_LIBS]]
+
+#if $[USE_TESTSERVER]
+    #defer EXTRA_CDEFS $[EXTRA_CDEFS] USE_TESTSERVER
+    // use separate build directory for test server
+    #define ODIR_SUFFIX -test
+#endif
+
+#if $[LANGUAGE]
+  #print Configuring $[LANGUAGE] build
+
+  #if $[eq $[LANGUAGE], castillian]
+    #defer EXTRA_CDEFS $[EXTRA_CDEFS] USE_CASTILLIAN PRODUCT_NAME="_ES"
+  #elif $[eq $[LANGUAGE], japanese]
+    #defer EXTRA_CDEFS $[EXTRA_CDEFS] USE_JAPANESE PRODUCT_NAME="_JP"
+  #elif $[eq $[LANGUAGE], german]
+    #defer EXTRA_CDEFS $[EXTRA_CDEFS] USE_GERMAN PRODUCT_NAME="_DE"
+  #elif $[eq $[LANGUAGE], portuguese]
+    #defer EXTRA_CDEFS $[EXTRA_CDEFS] USE_PORTUGUESE PRODUCT_NAME="_BR"
+  #elif $[eq $[LANGUAGE], french]
+    #defer EXTRA_CDEFS $[EXTRA_CDEFS] USE_FRENCH PRODUCT_NAME="_FR"
+  #else
+    #defer EXTRA_CDEFS $[EXTRA_CDEFS] USE_ENGLISH PRODUCT_NAME=""
+  #endif
+#else   // set up defaults
+  #print Configuring ENGLISH build
+  #define LANGUAGE english
+  #defer EXTRA_CDEFS $[EXTRA_CDEFS] USE_ENGLISH PRODUCT_NAME=""
+#endif
--- src/publish/ttown-build-Config.pp	22 Dec 2005 01:06:49 -0000	1.25
+++ src/publish/ttown-build-Config.pp	29 Oct 2008 04:09:04 -0000	1.25.18.1
@@ -9,8 +9,13 @@
 #endif
 
 // use cached distributed compiles
+#if $[eq $[shell uname -i], x86_64]
+  #define CC x86_64-redhat-linux-gcc
+  #define CXX x86_64-redhat-linux-g++
+#else
 #define CC ccache distcc i386-redhat-linux-gcc
 #define CXX ccache distcc i386-redhat-linux-g++
+#endif
 
 // python 2.4
 #define PYTHON_COMMAND python2.4
@@ -44,14 +49,19 @@
 
 #define GENPYCODE_LIBS libpandaexpress libpanda libpandaphysics libdirect libotp libtoontown
 
+#if $[eq $[shell uname -i], x86_64]
+  #define OPTFLAGS -Os -march=opteron -mmmx -msse -mfpmath=sse -fomit-frame-pointer -finline-functions -frename-registers -pipe
+#else
 #define OPTFLAGS -Os -march=pentium3 -mmmx -msse -mfpmath=sse -fomit-frame-pointer -finline-functions -frename-registers -pipe
+#endif
 
 // temp for drose
 //#define PYTHON_IPATH /usr/include/python2.2
 //#define PYTHON_LPATH
 
-//#define NSPR_IPATH /usr/local/nspr/include
-//#define NSPR_LPATH /usr/local/nspr/lib
+// NSPR is no longer needed
+//#define NSPR_IPATH $[wildcard /usr/include/nspr*]
+//#define NSPR_LPATH /usr/lib
 //#define NSPR_LIBS nspr4
 //#defer HAVE_NSPR $[libtest $[NSPR_LPATH],$[NSPR_LIBS]]
 
@@ -65,13 +75,13 @@
   #print Configuring $[LANGUAGE] build
 
   #if $[eq $[LANGUAGE], castillian]
-    #defer EXTRA_CDEFS $[EXTRA_CDEFS] USE_CASTILLIAN PRODUCT_NAME="_Terra-DMC"
+    #defer EXTRA_CDEFS $[EXTRA_CDEFS] USE_CASTILLIAN PRODUCT_NAME="_ES"
   #elif $[eq $[LANGUAGE], japanese]
     #defer EXTRA_CDEFS $[EXTRA_CDEFS] USE_JAPANESE PRODUCT_NAME="_JP"
   #elif $[eq $[LANGUAGE], german]
-    #defer EXTRA_CDEFS $[EXTRA_CDEFS] USE_GERMAN PRODUCT_NAME="_T-Online"
+    #defer EXTRA_CDEFS $[EXTRA_CDEFS] USE_GERMAN PRODUCT_NAME="_DE"
   #elif $[eq $[LANGUAGE], portuguese]
-    #defer EXTRA_CDEFS $[EXTRA_CDEFS] USE_PORTUGUESE PRODUCT_NAME="_Terra"
+    #defer EXTRA_CDEFS $[EXTRA_CDEFS] USE_PORTUGUESE PRODUCT_NAME="_BR"
   #elif $[eq $[LANGUAGE], french]
     #defer EXTRA_CDEFS $[EXTRA_CDEFS] USE_FRENCH PRODUCT_NAME="_FR"
   #else
--- src/publish/ttown-ncbuild-ai.sh	20 Aug 2004 03:16:40 -0000	1.12
+++ src/publish/ttown-ncbuild-ai.sh	25 Oct 2007 22:40:01 -0000	1.12.6.2
@@ -3,9 +3,10 @@
 # get some environment variable configuration
 source ~/player/toontown/src/publish/ttown-build-setup.sh
 
-export ROOT="-d :ext:$1@cvs.sourceforge.net:/cvsroot/panda3d"
+export ROOT="-d :ext:$1@panda3d.cvs.sourceforge.net:/cvsroot/panda3d"
 
 # you can control-c past cvs updating
+echo 'control-c to skip this '
 ~/player/toontown/src/publish/ttown-cvsupdate-ai.sh $2 $3
 
 /usr/bin/find ~/player/install \! -name '*.crt' -type f | xargs /bin/rm
--- src/publish/ttown-ncbuild-ai.sh	19 May 2006 23:47:08 -0000	1.13
+++ src/publish/ttown-ncbuild-ai.sh	3 Mar 2008 06:48:53 -0000	1.14
@@ -1,39 +1,39 @@
 #! /bin/sh
 
 # get some environment variable configuration
-source ~/player/toontown/src/publish/ttown-build-setup.sh
+source ./toontown/src/publish/ttown-build-setup.sh
 
 export ROOT="-d :ext:$1@panda3d.cvs.sourceforge.net:/cvsroot/panda3d"
 
 # you can control-c past cvs updating
-~/player/toontown/src/publish/ttown-cvsupdate-ai.sh $2 $3
+$PLAYER/toontown/src/publish/ttown-cvsupdate-ai.sh $2 $3
 
-/usr/bin/find ~/player/install \! -name '*.crt' -type f | xargs /bin/rm
+/usr/bin/find $PLAYER/install \! -name '*.crt' -type f | xargs /bin/rm
 
 # Rebuild dtool
 echo "Building dtool"
-(cd ~/player/dtool && ppremake && make -j install) || exit
+(cd $PLAYER/dtool && ppremake && make -j install) || exit
 
 # Rebuild panda
 echo "Building panda"
-(cd ~/player/panda && ppremake && make -j install) || exit
+(cd $PLAYER/panda && ppremake && make -j install) || exit
 
 # Rebuild direct
 echo "Building direct"
-(cd ~/player/direct && ppremake && make -j install) || exit
+(cd $PLAYER/direct && ppremake && make -j install) || exit
 
 # Rebuild otp
 echo "Building otp"
-(cd ~/player/otp && ppremake && make -j install) || exit
+(cd $PLAYER/otp && ppremake && make -j install) || exit
 
 # Rebuild toontown
 echo "Building toontown"
-(cd ~/player/toontown && ppremake && make -j install) || exit
+(cd $PLAYER/toontown && ppremake && make -j install) || exit
 
 # Rebuild ttmodels
 echo "Building ttmodels"
 (cd $PLAYER/ttmodels && ppremake && make -j install-dna) || exit
 
 # generate python code
-(cd ~/player && install/bin/genPyCode -nO) || exit
+(cd $PLAYER && install/bin/genPyCode -nO) || exit
 
--- src/quest/QuestPoster.py	1 Jun 2004 19:32:19 -0000	1.66
+++ src/quest/QuestPoster.py	22 Jan 2005 01:38:01 -0000	1.66.6.1
@@ -169,7 +169,7 @@
             parent = self.questFrame,
             relief = None,
             text = '',
-            text_scale = 0.04,
+            text_scale = TTLocalizer.QPauxText,
             text_fg = self.normalTextColor,
             text_align = TextNode.ACenter,
             textMayChange = 1,
@@ -498,7 +498,7 @@
         objectiveStrings = quest.getObjectiveStrings()
         assert type(objectiveStrings) in (types.ListType, types.TupleType)
         captions = map(string.capwords,quest.getObjectiveStrings())
-        imageColor = Vec4(*self.colors['white'])        
+        imageColor = Vec4(*self.colors['white'])
         # Adjust poster for the particular quest type
         if ((quest.getType() == Quests.DeliverGagQuest) or
             (quest.getType() == Quests.DeliverItemQuest)):
@@ -581,9 +581,9 @@
                     else:
                         rIconGeom = self.createSuitHead(holder)
                     lPos.setX(-0.18)
-                    auxText = TTLocalizer.QuestPosterAuxFrom                    
+                    auxText = TTLocalizer.QuestPosterAuxFrom
                 # Display location conditions for quest
-                infoText = string.capwords(quest.getLocationName())
+                infoText = quest.getLocationName()
                 if infoText == '':
                     infoText = TTLocalizer.QuestPosterAnywhere
         elif (quest.getType() == Quests.VisitQuest):
@@ -668,7 +668,7 @@
             if not fComplete:
                 headlineString = TTLocalizer.QuestsNewbieQuestHeadline
                 captions = [quest.getCaption()]
-                captions.append(map(string.capwords, quest.getObjectiveStrings()))
+                captions.append(quest.getObjectiveStrings())
                 auxText = TTLocalizer.QuestsCogNewbieQuestAux
                 lPos.setX(-0.18)
                 self.laffMeter = self.createLaffMeter(quest.getNewbieLevel())
@@ -912,7 +912,7 @@
             infoText = TTLocalizer.QuestPosterPlayground
             if not fComplete:
                 captions = [TTLocalizer.QuestsMinigameNewbieQuestCaption % quest.getNewbieLevel()]
-                captions.append(map(string.capwords, quest.getObjectiveStrings()))
+                captions.append(quest.getObjectiveStrings())
                 auxText = TTLocalizer.QuestsMinigameNewbieQuestAux
                 lPos.setX(-0.18)
                 self.laffMeter = self.createLaffMeter(quest.getNewbieLevel())
@@ -976,7 +976,7 @@
                 if not fComplete:
                     headlineString = TTLocalizer.QuestsNewbieQuestHeadline
                     captions = [quest.getCaption()]
-                    captions.append(map(string.capwords, quest.getObjectiveStrings()))
+                    captions.append(quest.getObjectiveStrings())
                     auxText = TTLocalizer.QuestsCogNewbieQuestAux
                     lPos.setX(-0.18)
                     self.laffMeter = self.createLaffMeter(quest.getNewbieLevel())
@@ -1036,13 +1036,13 @@
                     rIconGeom = None
                     lIconGeomScale = rIconGeomScale
                     rIconGeomScale = 1
-                    
+
             if not fComplete:
                 # Show the location of the cog/item
-                infoText = string.capwords(quest.getLocationName())
+                infoText = quest.getLocationName()
                 if infoText == '':
                     infoText = TTLocalizer.QuestPosterAnywhere
-                
+
         if fComplete:
             # Make text and background green to show it is complete
             textColor = (0,0.3,0,1)
@@ -1156,7 +1156,7 @@
                 self.laffMeter.destroy()
                 self.laffMeter = None
         else:
-            textColor = self.normalTextColor            
+            textColor = self.normalTextColor
         # Show thyself
         self.show()
         # Update color
@@ -1167,7 +1167,7 @@
         # Update picture frame captions and locations
         self.lPictureFrame.show()
         self.lPictureFrame.setPos(lPos)
-        self.lPictureFrame['text_scale'] = TEXT_SCALE        
+        self.lPictureFrame['text_scale'] = TEXT_SCALE
         # scale down the text if left picture is not centered
         if (lPos[0] != 0):
             self.lPictureFrame['text_scale'] = 0.0325
@@ -1177,7 +1177,7 @@
         if len(captions) > 1:
             self.rPictureFrame.show()
             self.rPictureFrame['text'] = captions[1]
-            self.rPictureFrame['text_scale'] = 0.0325             
+            self.rPictureFrame['text_scale'] = 0.0325
             #self.rPictureFrame.setColor(*self.colors[frameBgColor])
             self.rPictureFrame['image_color'] =Vec4(*self.colors[frameBgColor])
         else:
@@ -1193,7 +1193,7 @@
         self.rQuestIcon['geom_pos'] = (0,10,0)
         if rIconGeom:
             self.rQuestIcon['geom_scale'] = rIconGeomScale
-            
+
         # Display auxiliary text if necessary
         if auxText:
             self.auxText.show()
--- src/quest/Quests.py	24 Nov 2004 04:05:46 -0000	1.299
+++ src/quest/Quests.py	29 Sep 2005 03:55:53 -0000	1.298.2.4
@@ -436,7 +436,7 @@
         elif loc in ToontownGlobals.hoodNameMap:
             locName = TTLocalizer.QuestInLocationString % {
                 'inPhrase' : ToontownGlobals.hoodNameMap[loc][1],
-                'location' : ToontownGlobals.hoodNameMap[loc][-1]}
+                'location' : ToontownGlobals.hoodNameMap[loc][-1] + TTLocalizer.QuestsLocationArticle}
         elif loc in ToontownGlobals.StreetBranchZones:
             locName = TTLocalizer.QuestInLocationString % {
                 'inPhrase' : ToontownGlobals.StreetNames[loc][1],
@@ -1569,7 +1569,7 @@
             # plural
             itemName = TTLocalizer.QuestsItemNameAndNum % { "num" : TTLocalizer.getLocalNum(num),
                                                           "name" : ItemDict[item][1] }
-                        
+
         return (TTLocalizer.QuestsRecoverItemQuestRecoverFromSCString %
                 {"item"   : itemName,
                  "holder" : holderName,
@@ -4490,7 +4490,7 @@
         if isInPlayground:
             streetDesc = TTLocalizer.QuestsStreetLocationNamedPlayground % (toHoodName)
         else:
-            streetDesc = TTLocalizer.QuestsStreetLocationNamedStreet % (toStreetName, toHoodName)
+            streetDesc = TTLocalizer.QuestsStreetLocationNamedStreet % {'toStreetName':toStreetName, 'toHoodName':toHoodName}
 
     paragraph = TTLocalizer.QuestsLocationParagraph % {'building' : TTLocalizer.QuestsLocationBuilding % (toNpcName),
                                                      'buildingName' : toBuildingName,
--- src/racing/DistributedLeaderBoard.py	27 Dec 2005 23:50:46 -0000	1.15
+++ src/racing/DistributedLeaderBoard.py	5 Dec 2008 03:25:45 -0000	1.15.20.1
@@ -72,7 +72,6 @@
         self.display(trackName, recordTitle, scores)
 
     def buildListParts(self):
-
         self.surface = self.board.attachNewNode("surface")
 
         z = 7.7
@@ -103,7 +102,6 @@
 
         # Create blank entries for each row in the leaderboard
         for i in range(10):
-
             row, nameText, timeText, placeText = self.buildLeaderRow()
             self.nameTextNodes.append(nameText)
             placeText.setText(str(len(self.nameTextNodes))+".")
@@ -112,8 +110,8 @@
 
             #row.setH(-90)
             if len(self.nameTextNodes)== 6:
-                        z = zListTop
-                        x =  .35#.1
+                z = zListTop
+                x =  .35#.1
 
             row.setX(x)
 
@@ -155,9 +153,9 @@
         # Build the title row on the leaderboard
         row = hidden.attachNewNode("TitleRow")
         nameText = TextNode("titleRow")
-        nameText.setFont(ToontownGlobals.getSignFont())
+        nameText.setFont(ToontownGlobals.getToonFont())
         nameText.setAlign(TextNode.ACenter)
-        nameText.setTextColor(0.3, 0.75, 0.6, 1)
+        nameText.setTextColor(0.2, 0.65, 0.5, 1)
         nameText.setText("Score Title")
         #nameText.setGlyphScale(.4)
         namePath = row.attachNewNode(nameText)
--- src/racing/DistributedLeaderBoardAI.py	14 Jun 2007 23:59:17 -0000	1.8.2.1.2.1
+++ src/racing/DistributedLeaderBoardAI.py	3 Sep 2008 23:57:30 -0000	1.8.2.1.2.2
@@ -35,7 +35,7 @@
     This avoids a single leader board from loading from the pickle unnecessarily often as it waits
     till the information is actually needed to update it. Could result in double access to pickle
     files if more than one leader board is listening for it... perhaps when reading in an updated
-    pickle list could also sned message with new list so that other server side leader boards
+    pickle list could also send message with new list so that other server side leader boards
     can benefit from one leader board's work? not sure which would be more taxing.
 
     """
--- src/racing/RaceEndPanels.py	20 Mar 2007 18:20:50 -0000	1.8.2.12.2.1
+++ src/racing/RaceEndPanels.py	4 Sep 2008 20:46:00 -0000	1.8.2.12.2.3
@@ -58,7 +58,7 @@
             tLabel = DirectLabel(
                 parent = frame,
                 relief = None,
-                pos = (1.05,0.0,0.0),
+                pos = (TTLocalizer.REPtLabel_x,0.0,0.0),
                 text = '--\'--\'\'--',
                 text_fg = (0.5, 0.5, 0.5, 1.0),
                 text_scale = 0.04,
@@ -68,7 +68,7 @@
             wLabel = DirectLabel(
                 parent = frame,
                 relief = None,
-                pos = (1.29,0.0,0.0),
+                pos = (TTLocalizer.REPwLabel_x,0.0,0.0),
                 text = '',
                 text_fg = (0,0,0,1),
                 text_scale = 0.04,
--- src/racing/RaceManagerAI.py	21 Sep 2005 22:36:49 -0000	1.34.2.19
+++ src/racing/RaceManagerAI.py	4 Sep 2008 22:18:34 -0000	1.34.2.19.4.2
@@ -9,13 +9,20 @@
 import os
 import cPickle
 
+def getDefaultRecord(trackId):
+    """
+    Get the default record for this track. Used for reseting records.
+    """
+    # format: time, race type, num racers, racer name
+    return (RaceGlobals.getDefaultRecordTime(trackId), 0, 1, TTLocalizer.Goofy)
+
 class RaceManagerAI(DirectObject.DirectObject):
 
     notify = DirectNotifyGlobal.directNotify.newCategory('RaceManagerAI')
     #notify.setDebug(1)
-    
+
     serverDataFolder = simbase.config.GetString('server-data-folder', "")
-        
+
     def __init__(self, air):
         DirectObject.DirectObject.__init__(self)
         self.air = air
--- src/safezone/DistributedFishingSpot.py	2 Dec 2004 03:54:44 -0000	1.107
+++ src/safezone/DistributedFishingSpot.py	13 Dec 2005 07:16:08 -0000	1.101.2.3
@@ -496,7 +496,7 @@
         assert self.notify.debugStateCall(self)
         # Task to make the bob bounce up and down as if it is
         # floating, but has not yet had a nibble.
-        z = math.sin(task.time * 1.8) * 0.08;
+        z = math.sin(task.time * 1.8) * 0.08
         self.bob.setZ(self.waterLevel + z)
         return Task.cont
         
@@ -688,11 +688,6 @@
         if code == FishGlobals.OverTankLimit:
             reason = TTLocalizer.FishingOverTankLimit
         self.failureDialog['text'] = reason
-        if (base.cr.productName == "FR"):
-            self.failureDialog['text_pos'] = (-.35,.10)
-            self.failureDialog['text_scale'] = 0.06
-	else:
-            self.failureDialog['text_pos'] = (-.35,.8)
         self.failureDialog.show()
 
     def __showSellFishDialog(self):
@@ -923,6 +918,8 @@
             message = TTLocalizer.FishingFailure,
             style = TTDialog.CancelOnly,
             cancelButtonText = TTLocalizer.FishingExit,
+            text_pos = TTLocalizer.DFSfailureDialog_pos,
+            text_scale = TTLocalizer.DFSfailureDialog,
             )
         self.failureDialog.hide()
         
@@ -951,6 +948,7 @@
             message = TTLocalizer.FishingBroke,
             style = TTDialog.CancelOnly,
             cancelButtonText = TTLocalizer.FishingExit,
+            text_scale = TTLocalizer.DFSfailureDialog,
             )
         self.brokeDialog.hide()
 
--- src/safezone/Playground.py	6 Oct 2004 23:43:33 -0000	1.85
+++ src/safezone/Playground.py	18 May 2006 20:05:21 -0000	1.85.6.2
@@ -693,9 +693,9 @@
                 parent = self.dialog,
                 relief = None,
                 pos = imgPos,
-                scale = 1.0,
+                scale = TTLocalizer.PimgLabel,
                 image = imgNodePath,
-                image_scale = imgScale)
+                image_scale = imgScale*TTLocalizer.PimgScale)
             imageModel.removeNode()
         else:
             # ...this toon has completed their trolley quest.
--- src/shtiker/DisguisePage.py	1 Jun 2004 19:32:20 -0000	1.34
+++ src/shtiker/DisguisePage.py	18 Nov 2005 19:33:28 -0000	1.34.6.2
@@ -100,7 +100,7 @@
                 text_font = ToontownGlobals.getSuitFont(),
                 text_pos = textPos,
                 text_roll = -90,
-                text_scale = 0.1,
+                text_scale = TTLocalizer.DPtab,
                 text_align = TextNode.ACenter,
                 # Press
                 text1_fg = Vec4(1,0,0,1),
@@ -125,7 +125,7 @@
             parent = self.frame,
             text = '',
             text_font = ToontownGlobals.getSuitFont(),
-            text_scale = 0.17,
+            text_scale = TTLocalizer.DPdeptLabel,
             text_pos = (-0.1, 0.8),
             )
 
@@ -179,7 +179,7 @@
             relief = None,
             text = "",
             text_font = ToontownGlobals.getSuitFont(),
-            text_scale = 0.093,
+            text_scale = TTLocalizer.DPcogName,
             text_align = TextNode.ACenter,
             pos = (-0.948, 0, -1.15),
             )
--- src/shtiker/DisplaySettingsDialog.py	1 Jun 2004 19:32:21 -0000	1.16
+++ src/shtiker/DisplaySettingsDialog.py	28 Oct 2005 02:27:26 -0000	1.16.6.2
@@ -83,9 +83,9 @@
         self.introText = DirectLabel(
             parent = self,
             relief = None,
-            scale = 0.06,
+            scale = TTLocalizer.DSDintroText,
             text = TTLocalizer.DisplaySettingsIntro,
-            text_wordwrap = 25,
+            text_wordwrap = TTLocalizer.DSDintroTextwordwrap,
             text_align = TextNode.ALeft,
             pos = (-0.725, 0, 0.3),
             )
@@ -169,7 +169,7 @@
             boxImageScale = 2.5,
             boxImageColor = VBase4(0, 0.25, 0.5, 1),
             boxRelief = None,
-            pos = (0.0961, 0, -0.221),
+            pos = TTLocalizer.DSDwindowedButtonPos,
             command = self.__doWindowed,
             )
 
@@ -184,7 +184,7 @@
             boxImageScale = 2.5,
             boxImageColor = VBase4(0, 0.25, 0.5, 1),
             boxRelief = None,
-            pos = (0.097, 0, -0.311),
+            pos = TTLocalizer.DSDfullscreenButtonPos,
             command = self.__doFullscreen,
             )
 
@@ -212,7 +212,7 @@
                      guiButton.find("**/QuitBtn_RLVR"),
                      ),
             image_scale = (0.6,1,1),
-            text_scale = 0.06,
+            text_scale = TTLocalizer.DSDcancel,
             text_pos = (0,-0.02),
             pos = (0.20, 0, -0.53),
             command = self.__cancel,
--- src/shtiker/FishPage.py	15 Jun 2004 02:30:54 -0000	1.34
+++ src/shtiker/FishPage.py	26 Jan 2005 06:14:28 -0000	1.34.6.1
@@ -88,7 +88,7 @@
             parent = self,
             relief = None,
             text = TTLocalizer.FishPageTankTab,
-            text_scale = 0.07,
+            text_scale = TTLocalizer.FPtankTab,
             text_align = TextNode.ALeft,
             image = gui.find("**/tabs/polySurface1"),
             image_pos = (0.55,1,-0.91),
@@ -107,7 +107,7 @@
             parent = self,
             relief = None,
             text = TTLocalizer.FishPageCollectionTab,
-            text_scale = 0.07,
+            text_scale = TTLocalizer.FPcollectionTab,
             text_align = TextNode.ALeft,
             image = gui.find("**/tabs/polySurface2"),
             image_pos = (0.12,1,-0.91),
@@ -126,7 +126,7 @@
             parent = self,
             relief = None,
             text = TTLocalizer.FishPageTrophyTab,
-            text_scale = 0.07,
+            text_scale = TTLocalizer.FPtrophyTab,
             text_align = TextNode.ALeft,
             image = gui.find("**/tabs/polySurface3"),
             image_pos = (-0.28,1,-0.91),
--- src/shtiker/MapPage.py	1 Jun 2004 19:32:21 -0000	1.56
+++ src/shtiker/MapPage.py	7 Mar 2006 19:34:51 -0000	1.56.6.2
@@ -100,7 +100,7 @@
             image_scale = (1.3,1.1,1.1),
             pos = buttonLoc,
             text = TTLocalizer.MapPageBackToPlayground,
-            text_scale = 0.055,
+            text_scale = TTLocalizer.MPbackToPlayground,
             text_pos = (0,-0.02),
             textMayChange = 0,            
             command = self.backToSafeZone,
@@ -116,7 +116,7 @@
             image_scale = (.66,1.1,1.1),
             pos = (0.15,0,-.74),
             text = TTLocalizer.MapPageGoHome,
-            text_scale = 0.055,
+            text_scale = TTLocalizer.MPgoHome,
             text_pos = (0,-0.02),
             textMayChange = 0,            
             command = self.goHome,
@@ -129,9 +129,9 @@
             relief = None,
             pos = (-0.43,0,-0.726),
             text = "",
-            text_scale = 0.06,
+            text_scale = TTLocalizer.MPhoodLabel,
             text_pos = (0,0),
-            text_wordwrap = 14,
+            text_wordwrap = TTLocalizer.MPhoodWordwrap,
             )
         self.hoodLabel.hide()
 
--- src/shtiker/OptionsPage.py	1 Jun 2004 19:32:21 -0000	1.73
+++ src/shtiker/OptionsPage.py	1 May 2008 00:22:00 -0000	1.73.6.6
@@ -107,7 +107,7 @@
         self.displaySettingsFullscreen = None
         self.displaySettingsApi = None
         self.displaySettingsApiChanged = 0
-        
+
         guiButton = loader.loadModelOnce("phase_3/models/gui/quit_button")
         gui = loader.loadModelOnce("phase_3.5/models/gui/friendslist_gui")
 
@@ -152,7 +152,7 @@
             text = "",
             text_align = TextNode.ALeft,
             text_scale = options_text_scale,
-            text_wordwrap = 16,            
+            text_wordwrap = 16,
             pos = (leftMargin, 0,
                    textStartHeight - textRowHeight),
             )
@@ -164,7 +164,7 @@
             text_align = TextNode.ALeft,
             text_scale = options_text_scale,
             text_wordwrap = 16,
-            # adjust for taller two-row text            
+            # adjust for taller two-row text
             pos = (leftMargin, 0,
                    textStartHeight - 2 * textRowHeight),
             )
@@ -293,8 +293,9 @@
         self.speedChatStyleText.reparentTo(self, FOREGROUND_SORT_INDEX)
 
         if ((not base.cr.isPaid()) and
-            ((base.cr.productName == "DisneyOnline-US") or
-             (base.cr.productName == "DisneyOnline-UK"))):
+            (base.cr.productName in ['DisneyOnline-US', 'DisneyOnline-UK', 'DisneyOnline-AP',
+                'ES', 'JP', 'BR', 'DE', 'FR'])
+            ):
             self.purchaseButton = DirectButton(
                 parent = self,
                 relief = None,
@@ -410,7 +411,7 @@
     def __doneDisplaySettings(self, anyChanged, apiChanged):
         if anyChanged:
             self.__setDisplaySettings()
-        
+
             # Save the new settings so we can copy them to the
             # SettingsFile a little later.
             properties = base.win.getProperties()
@@ -419,7 +420,7 @@
             self.displaySettingsFullscreen = properties.getFullscreen()
             self.displaySettingsApi = base.pipe.getInterfaceName()
             self.displaySettingsApiChanged = apiChanged
-        
+
     def __setDisplaySettings(self):
         properties = base.win.getProperties()
         if properties.getFullscreen():
@@ -436,7 +437,7 @@
             print "change display settings..."
             text = TTLocalizer.OptionsPageDisplaySettings % settings
         else:
-            print "no change display settings..."            
+            print "no change display settings..."
             text = TTLocalizer.OptionsPageDisplaySettingsNoApi % settings
         self.DisplaySettings_Label['text'] = text
 
@@ -529,7 +530,7 @@
             taskMgr.doMethodLater(self.DisplaySettingsDelay,
                                   self.writeDisplaySettings,
                                   self.DisplaySettingsTaskName)
-            
+
         ShtikerPage.ShtikerPage.exit(self)
 
     def writeDisplaySettings(self, task = None):
@@ -541,7 +542,7 @@
         # Make sure our timer task has been removed (we might call
         # this method explicitly, before the timer has expired).
         taskMgr.remove(self.DisplaySettingsTaskName)
-        
+
         self.notify.info("writing new display settings %s, %s, %s to SettingsFile." %
                          (self.displaySettingsSize, self.displaySettingsFullscreen,
                           self.displaySettingsApi))
@@ -560,7 +561,7 @@
         self.displaySettingsChanged = 0
 
         return Task.done
-        
+
     def unload(self):
         # Now that we're unloading, we're confident the user is
         # exiting the game through one of the normal,
@@ -576,7 +577,13 @@
             self.ignore(self.displaySettings.doneEvent)
             self.displaySettings.unload()
         self.displaySettings = None
-
+        self.exitButton.destroy()
+        self.Music_toggleButton.destroy()
+        self.SoundFX_toggleButton.destroy()
+        self.Friends_toggleButton.destroy()
+        self.DisplaySettingsButton.destroy()
+        self.speedChatStyleLeftArrow.destroy()
+        self.speedChatStyleRightArrow.destroy()
         del self.title
         del self.exitButton
         del self.SoundFX_Label
@@ -588,6 +595,9 @@
         del self.Friends_toggleButton
         del self.speedChatStyleLeftArrow
         del self.speedChatStyleRightArrow
+        if hasattr(self, 'purchaseButton'):
+            self.purchaseButton.destroy()
+            del self.purchaseButton
         self.speedChatStyleText.exit()
         self.speedChatStyleText.destroy()
         del self.speedChatStyleText
@@ -600,7 +610,8 @@
         """
         if base.cr.isWebPlayToken():
             if base.cr.isPaid():
-                if (base.cr.productName == "DisneyOnline-UK"):
+                if base.cr.productName in ['DisneyOnline-UK', 'DisneyOnline-AP',
+                  'ES', 'JP', 'DE', 'BR', 'FR'] :
                     self.paidNoParentPassword = launcher and launcher.getParentPasswordSet()
                 else:
                     self.paidNoParentPassword = launcher and not launcher.getParentPasswordSet()
@@ -691,5 +703,5 @@
 ##         # available.
 ##         if self.currentSizeIndex == None:
 ##             self.currentSizeIndex = closestIndex
-            
+
 ##         self.numValidScreenSizes = len(self.validScreenSizes)
--- src/shtiker/ShardPage.py	1 Jun 2004 19:32:21 -0000	1.57
+++ src/shtiker/ShardPage.py	25 Oct 2005 21:10:05 -0000	1.57.6.1
@@ -201,7 +201,7 @@
             )
 
         # Japanese version uses colored discs instead of shard pop text
-        if base.cr.productName == "NTT-DMC":
+        if base.cr.productName == "JP":
             model = loader.loadModelCopy('phase_3.5/models/gui/matching_game_gui')
             button = model.find('**/minnieCircle')
             shardButtonR = DirectButton(
@@ -349,7 +349,7 @@
                 anyChanges = 1
             else:
                 # This is an existing shard; update the pop.
-                if base.cr.productName == "NTT-DMC":
+                if base.cr.productName == "JP":
                     buttonTuple[1]['image_color'] = self.getPopColor(pop)
                 else:
                     buttonTuple[1]['text'] = str(pop)
@@ -377,7 +377,7 @@
         # all of the WelcomeValley hoods across all shards.
         buttonTuple = self.shardButtonMap.get(ToontownGlobals.WelcomeValleyToken)
         if buttonTuple:
-            if base.cr.productName == "NTT-DMC":
+            if base.cr.productName == "JP":
                 buttonTuple[1]['image_color'] = self.getPopColor(totalWVPop)
             else:
                 buttonTuple[1]['text'] = str(totalWVPop)
--- src/shtiker/ShtikerBook.py	3 Jun 2004 21:41:07 -0000	1.93
+++ src/shtiker/ShtikerBook.py	15 Jul 2005 19:03:54 -0000	1.93.6.1
@@ -318,7 +318,7 @@
             text = ("","",pageName,""),
             text_align = TextNode.ALeft,
             text_pos = (1,-0.2),
-            text_scale = 0.75,
+            text_scale = TTLocalizer.SBpageTab,
             text_fg = (1,1,1,1),
             text_shadow = (0,0,0,1),
             image = iconImage,
--- src/shtiker/TrackPage.py	1 Jun 2004 19:32:21 -0000	1.11
+++ src/shtiker/TrackPage.py	26 Jan 2005 06:14:28 -0000	1.11.6.1
@@ -167,14 +167,14 @@
         self.endFrame = self.trackFrames[-1]
 
         self.startFrame.frame['text'] = ""
-        self.startFrame.frame['text_scale'] = 0.12
+        self.startFrame.frame['text_scale'] = TTLocalizer.TPstartFrame
         self.startFrame.frame['image_color'] = Vec4(0.2,0.2,0.2,1)
         self.startFrame.frame['text_fg'] = (1,1,1,1)
         self.startFrame.frame['text_pos'] = (0,0.08)
         self.startFrame.question.hide()
 
         self.endFrame.frame['text'] = TTLocalizer.TrackPageDone
-        self.endFrame.frame['text_scale'] = 0.12
+        self.endFrame.frame['text_scale'] = TTLocalizer.TPendFrame
         self.endFrame.frame['image_color'] = Vec4(0.2,0.2,0.2,1)
         self.endFrame.frame['text_fg'] = (1,1,1,1)
         self.endFrame.frame['text_pos'] = (0,0)
--- src/suit/HolidaySuitInvasionManagerAI.py	26 Aug 2004 03:47:48 -0000	1.7
+++ src/suit/HolidaySuitInvasionManagerAI.py	23 Jul 2008 00:00:02 -0000	1.7.6.1
@@ -6,6 +6,20 @@
 class HolidaySuitInvasionManagerAI(HolidayBaseAI.HolidayBaseAI):
 
     notify = DirectNotifyGlobal.directNotify.newCategory('HolidaySuitInvasionManagerAI')
+
+    holidayCogType = {
+        ToontownGlobals.BLOODSUCKER_INVASION: 'b',
+        ToontownGlobals.MOVER_SHAKER_INVASION: 'ms',
+        ToontownGlobals.HEAD_HUNTER_INVASION: 'hh',
+        ToontownGlobals.THE_MINGLER_INVASION: 'm',
+        ToontownGlobals.MONEY_BAGS_INVASION: 'mb',
+        ToontownGlobals.TELEMARKETER_INVASION: 'tm',
+        ToontownGlobals.BOTTOMFEEDER_INVASION: 'bf',
+        ToontownGlobals.AMBULANCE_CHASER_INVASION: 'ac',
+        ToontownGlobals.THE_BIG_CHEESE_INVASION: 'tbc',
+        ToontownGlobals.NUMBER_CRUNCHER_INVASION: 'nc',
+        ToontownGlobals.YESMAN_INVASION: 'ym'
+        }
     
     def __init__(self, air, holidayId):
         HolidayBaseAI.HolidayBaseAI.__init__(self, air, holidayId)
@@ -45,6 +59,11 @@
             # Max the number so they will not run out
             numCogs = 1000000000
             skeleton = 0
+        elif (self.holidayId in self.holidayCogType):
+            # varying types depending on table
+            numCogs = 7500
+            skeleton = 0
+            cogType = self.holidayCogType[self.holidayId]
         else:
             self.notify.warning("Unrecognized holidayId: %s" % (self.holidayId))
             return 0
--- src/toon/InventoryNew.py	2 Sep 2004 23:40:09 -0000	1.67
+++ src/toon/InventoryNew.py	20 Oct 2005 18:09:03 -0000	1.67.4.3
@@ -249,6 +249,7 @@
         self.detailAmountLabel = DirectLabel(
             parent = self.detailFrame,
             text = "",
+            text_scale = TTLocalizer.INdetailNameLabel,
             text_fg = (0.05, 0.14, 0.4, 1),
             #scale = 0.05,
             scale = 0.04,            
@@ -317,10 +318,10 @@
 
             # Add the name of the track
             self.trackNameLabels.append(DirectLabel(
-                text = Tracks[track].upper(),
+                text = TextEncoder.upper(Tracks[track]),
                 parent = self.trackRows[track],
                 pos = (-0.72, -0.1, 0.01),
-                scale = 0.05,
+                scale = TTLocalizer.INtrackNameLabels,
                 relief = None,
                 text_fg = (0.2, 0.2, 0.2, 1),
                 text_font = getInterfaceFont(),
@@ -1413,7 +1414,7 @@
                                       relief = None,
                                       pos = (0.68, 0, -0.396),
                                       text = TTLocalizer.InventoryRun,
-                                      text_scale = 0.05,
+                                      text_scale = TTLocalizer.INrunButton,
                                       text_pos = (0,-0.02),
                                       text_fg = Vec4(1,1,1,1),
                                       textMayChange = 0,            
@@ -1447,7 +1448,7 @@
                                        relief = None,
                                        pos = (0.91, 0, -0.237),
                                        text = TTLocalizer.InventoryPass,
-                                       text_scale = 0.05,
+                                       text_scale = TTLocalizer.INpassButton,
                                        text_pos = (0,-0.02),
                                        text_fg = Vec4(1,1,1,1),
                                        textMayChange = 0,            
@@ -1468,8 +1469,9 @@
                                    image_scale = 5.125,
                                    image_pos = (0, 0, -0.65),
                                    image_color = ToontownGlobals.GlobalDialogColor,
+                                   text_scale = TTLocalizer.INclickToAttack,
                                    text = TTLocalizer.InventoryClickToAttack,
-                                   textMayChange = 0,            
+                                   textMayChange = 0,
                                    )
         # This should be initially hidden.
         self.tutText.hide()
--- src/toon/NPCForceAcknowledge.py	1 Jun 2004 19:32:23 -0000	1.26
+++ src/toon/NPCForceAcknowledge.py	13 Dec 2005 20:17:47 -0000	1.26.6.1
@@ -50,7 +50,7 @@
                 parent = self.dialog,
                 relief = None,
                 pos = imgPos,
-                scale = 1.0,
+                scale = TTLocalizer.NPCFimgLabel,
                 image = imgNodePath,
                 image_scale = imgScale,
                 )
--- src/toon/NPCFriendPanel.py	1 Jun 2004 19:32:23 -0000	1.9
+++ src/toon/NPCFriendPanel.py	6 Oct 2005 05:14:47 -0000	1.9.4.1
@@ -234,7 +234,7 @@
             self.sosCountInfo['text_align'] = TextNode.ACenter
 
         if count > 0:
-            countText = "%d Remaining" % count
+            countText = (TTLocalizer.NPCFriendPanelRemaining % (count))
             self.sosCallButton['state'] = NORMAL
         else:
             countText = "Unavailable"
--- src/toon/Toon.py	10 Nov 2004 02:41:35 -0000	1.327.2.2
+++ src/toon/Toon.py	28 Mar 2006 07:28:51 -0000	1.327.2.2.2.1
--- src/toon/ToonAvatarDetailPanel.py	24 Aug 2004 23:32:34 -0000	1.8
+++ src/toon/ToonAvatarDetailPanel.py	14 Dec 2004 02:05:23 -0000	1.8.4.2
@@ -130,7 +127,7 @@
                      buttons.find('**/CloseBtn_Rllvr')),
             relief = None,
             text = TTLocalizer.AvatarDetailPanelCancel,
-            text_scale = 0.05,
+            text_scale = TTLocalizer.TADPcancelButton,
             text_pos = (0.12, -0.01),
             pos = (-0.68, 0.0, -0.76),
             scale = 2.0,
@@ -317,8 +314,8 @@
             # Track Label
             DirectLabel(parent = self,
                         relief = None, 
-                        text = string.upper(TTLocalizer.BattleGlobalTracks[track]),
-                        text_scale = 0.066,
+                        text = TextEncoder.upper(TTLocalizer.BattleGlobalTracks[track]),
+                        text_scale = TTLocalizer.TADPtrackLabel,
                         text_align = TextNode.ALeft,
                         pos = (-0.71,0,0.17 + track * ySpacing)
                         )
--- src/toon/ToonAvatarPanel.py	23 Sep 2004 00:04:38 -0000	1.14
+++ src/toon/ToonAvatarPanel.py	7 Dec 2006 21:52:38 -0000	1.14.4.4
@@ -134,7 +131,7 @@
                 image3_color = disabledImageColor,
                 relief = None,
                 text = TTLocalizer.AvatarPanelFriends,
-                text_scale = 0.06,
+                text_scale = TTLocalizer.TAPfriendButton,
                 pos = (-0.103, 0, 0.096),
                 text0_fg = text0Color,
                 text1_fg = text1Color,
@@ -159,7 +156,7 @@
                 text1_fg = text1Color,
                 text2_fg = text2Color,
                 text3_fg = text3Color,
-                text_scale = 0.06,
+                text_scale = TTLocalizer.TAPwhisperButton,
                 text_pos = (0.06,-0.02),
                 text_align = TextNode.ALeft,
                 command = self.__handleWhisper,
@@ -179,7 +176,7 @@
                 text1_fg = text1Color,
                 text2_fg = text2Color,
                 text3_fg = text3Color,
-                text_scale = 0.06,
+                text_scale = TTLocalizer.TAPsecretsButton,
                 text_pos = (0.06,-0.02),
                 text_align = TextNode.ALeft,
                 command = self.__handleSecrets,
@@ -199,12 +196,17 @@
                 text1_fg = text1Color,
                 text2_fg = text2Color,
                 text3_fg = text3Color,
-                text_scale = 0.06,
+                text_scale = TTLocalizer.TAPgoToButton,
                 text_pos = (0.06,-0.02),
                 text_align = TextNode.ALeft,
                 command = self.__handleGoto,
                 )
 
+        # hack: [french only] temporarily disallowed secrets-chat for french
+        if base.cr.productName == 'Wanadoo':
+            self.secretsButton['state'] = DISABLED
+            self.secretsButton.hide()
+
         if not base.localAvatar.isTeleportAllowed():
             # Can't teleport to a friend while we're wearing our
             # cog suit or in certain other states.
@@ -225,7 +227,7 @@
                 text1_fg = text1Color,
                 text2_fg = text2Color,
                 text3_fg = text3Color,
-                text_scale = 0.06,
+                text_scale = TTLocalizer.TAPignoreButton,
                 text_pos = (0.06,-0.02),
                 text_align = TextNode.ALeft,
                 command = self.__handleIgnore,
--- src/toonbase/TTLocalizer.py	16 Jul 2004 18:29:59 -0000	1.3
+++ src/toonbase/TTLocalizer.py	23 Jul 2008 00:02:53 -0000	1.3.6.5
@@ -17,25 +17,26 @@
     # before importing this file
     language = getConfigExpress().GetString("language", "english")
     checkLanguage = getConfigExpress().GetBool("check-language", 0)
-    # if we are not running in English force the check
-    if language != "english":
-        checkLanguage = 1
 except:
     # AI
     language = simbase.config.GetString("language", "english")
     checkLanguage = simbase.config.GetBool("check-language", 0)
-    # if we are not running in English force the check
-    if language != "english":
-        checkLanguage = 1
     
+print ("TTLocalizer: Running in language: %s" % (language))
+
+if language != "english":
+    # if we are not running in English force the check
+    checkLanguage = 1
+    _languageModule = "toontown.toonbase."+language+".TTLocalizer"
+else:
+    _languageModule = "toontown.toonbase.TTLocalizer" + string.capitalize(language)
+
+exec("from " + _languageModule + " import *")
+
 # Ask what language we are running in. Returns a string.
 def getLanguage():
     return language
 
-print ("TTLocalizer: Running in language: %s" % (language))
-_languageModule = "toontown.toonbase.TTLocalizer" + string.capitalize(language)
-exec("from " + _languageModule + " import *")
-
 if checkLanguage:
     l = {}
     g = {}
--- src/toonbase/TTLocalizerEnglish.py	12 Sep 2006 04:45:24 -0000	1.312.2.17
+++ src/toonbase/TTLocalizerEnglish.py	7 Jan 2009 01:11:10 -0000	1.312.2.17.4.1
@@ -7009,7 +7009,7 @@
     3738 : ("Heat-Get It While It's Hot", ""),
     3739 : ("", ""),
     # titles for: phase_8/dna/the_burrrgh_3300.dna
-    3801 : ("Toon HQ", ""),
+    3801 : (lToonHQ, ""),
     3806 : ("Alpine Chow Line", ""),
     3807 : ("Used Groundhog Shadows", ""),
     3808 : ("The Sweater Lodge", ""),
--- src/toonbase/TTLocalizerEnglishProperty.py	5 Jun 2008 22:51:35 -0000	1.3.16.1
+++ src/toonbase/TTLocalizerEnglishProperty.py	5 Dec 2008 03:34:04 -0000	1.3.16.2
@@ -28,6 +28,10 @@
 #catalog/CatalogChatItemPicker.py
 CCIPmessagePickerCancel = 0.06
 
+#catalog/CatalogScreen.py
+CSgiftTogglePos = (00.855, -0.13)
+CSgiftToggle = 0.08
+
 #chat/TTChatInputSpeedChat.py
 CISCspeedChat = 0.055
 CISCtopLevelOverlap = 0.0
@@ -195,6 +199,7 @@
 
 #safezone/DistributedFishingSpot.py
 DFSfailureDialog = 1.0
+DFSfailureDialog_pos = (-.35,.8)
 
 #safezone/Playground.py
 PimgLabel = 1.0
--- src/toonbase/ToontownGlobals.py	22 Jun 2007 02:39:13 -0000	1.345.2.1.2.3
+++ src/toonbase/ToontownGlobals.py	24 Jul 2008 21:15:35 -0000
@@ -850,6 +850,22 @@
 KART_RECORD_WEEKLY_RESET = 12
 TRICK_OR_TREAT = 13
 
+VALENTINES_FIREWORKS = 1000
+
+# Cog Invasions
+BIGWIG_INVASION = 1100
+BLOODSUCKER_INVASION = 1101
+MOVER_SHAKER_INVASION = 1102
+HEAD_HUNTER_INVASION = 1103
+THE_MINGLER_INVASION = 1104
+MONEY_BAGS_INVASION = 1105
+TELEMARKETER_INVASION = 1106
+BOTTOMFEEDER_INVASION = 1107
+AMBULANCE_CHASER_INVASION = 1108
+THE_BIG_CHEESE_INVASION = 1109
+NUMBER_CRUNCHER_INVASION = 1110
+YESMAN_INVASION = 1111
+
 # German Holiday name constants
 OCTOBER31_FIREWORKS = 31
 NOVEMBER19_FIREWORKS = 32
@@ -858,7 +874,6 @@
 FEBRUARY14_FIREWORKS = 51
 JULY14_FIREWORKS = 52
 JUNE22_FIREWORKS = 53
-BIGWIG_INVASION = 54
 
 # Trick or Treat Holiday Values
 TOT_REWARD_JELLYBEAN_AMOUNT = 100
--- src/toontowngui/TeaserPanel.py	20 Jul 2005 05:54:35 -0000	1.12
+++ src/toontowngui/TeaserPanel.py	24 Jul 2008 21:31:37 -0000
@@ -26,5 +27,5 @@
     #                  members only flag,
     #                  )
-    
+
     'otherHoods' : (TTLocalizer.TeaserOtherHoods,
                     "features-hoods",
@@ -124,5 +137,5 @@
 
         self.doneFunc = doneFunc
- 
+
         # if we don't have a feature browser, make one
         if not hasattr(self, "browser"):
@@ -139,5 +152,5 @@
         self.cleanup()
         self.unload()
-        
+
         if choice == 1:
             self.__handlePay()
@@ -163,5 +177,5 @@
     def destroy(self):
         self.cleanup()
-        
+
     # dialog callback code passes a value
     def cleanup(self):
@@ -183,5 +197,5 @@
             self.browser.destroy()
             del self.browser
-        
+
     def showPage(self, pageName):
         if not pageName in PageOrder:
@@ -190,6 +186,7 @@
         self.dialog = TTDialog.TTDialog(
             text = TTLocalizer.TeaserTop,
             text_wordwrap = 20,
+            text_scale = TTLocalizer.TPtop,
             topPad = -0.05,
             midPad = 1.25,
             sidePad = 0.0,
@@ -199,7 +196,7 @@
             buttonTextList = [TTLocalizer.TeaserSubscribe,
                               TTLocalizer.TeaserContinue,
                               ],
-            button_text_scale = 0.07,
+            button_text_scale = TTLocalizer.TPbutton,
             buttonPadSF = 5.5,
             sortOrder = NO_FADE_SORT_INDEX,
             )
@@ -246,5 +272,5 @@
         # make the scrolling pick list for the member features
         gui = loader.loadModelOnce("phase_3/models/gui/scroll_arrows_gui")
-                
+
         optiondefs = (
             ('parent', self.parent,    None),
@@ -288,6 +285,10 @@
         # make a panel for each feature
         for page in PageOrder:
             textInfo, imageName, aspect, members = Pages.get(page)
+            # UK and AP have no collectable cards
+            if base.cr.productName in ['DisneyOnline-UK', 'DisneyOnline-AP']:
+                if imageName == "features-mailers":
+                    imageName = "features-mailers-UK"
             imageModel = guiModel.find("**/" + imageName)
             # landscape
             if aspect == 0:
@@ -319,5 +345,5 @@
                 image_pos = (0, 0, 0.05),
                 text = textInfo,
-                text_scale = 0.05,
+                text_scale = TTLocalizer.TPpanel,
                 text_pos = (0, -0.55),
                 )
@@ -332,7 +332,7 @@
             # portrait
             elif aspect == 1:
                 scale = (0.7, 0, 0.9)
-                logoPos = (0.275, 0, -0.335)                
+                logoPos = (0.275, 0, -0.335)
             # square
             else:
                 scale = (0.8, 0, 0.8)
--- src/toontowngui/ToontownLoadingScreen.py	30 Sep 2004 02:03:34 -0000	1.6
+++ src/toontowngui/ToontownLoadingScreen.py	2 Nov 2007 22:37:16 -0000	1.6.4.2
@@ -23,7 +23,7 @@
             parent = self.banner,
             relief = None,
             text = "",
-            text_scale = 0.18,
+            text_scale = TTLocalizer.TLStip,
             textMayChange = 1,
             pos = (-1.2,0.0,0.1),
             text_fg = (0.4,0.3,0.2,1),
@@ -98,4 +98,3 @@
         # update progress bar
         self.waitBar.update(self.__count)
 
-
--- src/trolley/Trolley.py	1 Jun 2004 19:32:24 -0000	1.33
+++ src/trolley/Trolley.py	15 Jul 2005 19:05:26 -0000	1.33.6.1
@@ -202,7 +202,7 @@
             text = TTLocalizer.TrolleyHopOff,
             text_fg = (1, 1, 0.65, 1),
             text_pos = (0, -0.23),
-            text_scale = 0.8,
+            text_scale = TTLocalizer.TtrolleyHopOff,
             image = (self.upButton, self.downButton, self.rolloverButton),
             image_color = (1, 0, 0, 1),
             image_scale = (20, 1, 11),
--- src/secure/sign-xrc.sh	17 Jan 2007 19:07:21 -0000	1.9
+++ src/secure/sign-xrc.sh	19 Aug 2008 00:43:53 -0000
@@ -28,6 +28,8 @@
 case $LANGUAGE in
   castillian)
     LIVESUFFIX=_ES ;;
+  portuguese)
+    LIVESUFFIX=_BR ;;
   french)
     LIVESUFFIX=_FR ;;
 esac
